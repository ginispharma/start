
<!DOCTYPE html>
<!-- 
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          Î¤Î‘ Î”Î™ÎšÎ‘ ÎœÎŸÎ¥ Î§Î¡Î—Î£Î™ÎœÎ‘                                â•‘
â•‘                    Î•Ï†Î±ÏÎ¼Î¿Î³Î® Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ·Ï‚ Î£ÎµÎ»Î¹Î´Î¿Î´ÎµÎ¹ÎºÏ„ÏÎ½                       â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                              â•‘
â•‘ ğŸ“Œ Î§Î‘Î¡Î‘ÎšÎ¤Î—Î¡Î™Î£Î¤Î™ÎšÎ‘:                                                          â•‘
â•‘ â€¢ ÎŸÏÎ³Î¬Î½Ï‰ÏƒÎ· links ÏƒÎµ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚                                              â•‘ 
â•‘ â€¢ Drag & Drop Î³Î¹Î± ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚ ÎºÎ±Î¹ links                                      â•‘
â•‘ â€¢ Post-it ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚ Î¼Îµ Ï‡ÏÏ‰Î¼Î±Ï„Î¹ÎºÎ® ÎºÏ‰Î´Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ·                               â•‘
â•‘ â€¢ Zuccaradio web radio player                                               â•‘
â•‘ â€¢ Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î¿ backup/restore Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½                                         â•‘
â•‘ â€¢ Responsive design Î³Î¹Î± mobile/desktop                                      â•‘
â•‘ â€¢ Theme switcher Î¼Îµ Ï€Î¿Î»Î»Î±Ï€Î»Î¬ Ï‡ÏÏ‰Î¼Î±Ï„Î¹ÎºÎ¬ ÏƒÏ‡Î®Î¼Î±Ï„Î±                               â•‘
â•‘ â€¢ Welcome sound Î¼Îµ Web Audio API                                            â•‘
â•‘                                                                              â•‘
â•‘ ğŸ”§ ÎœÎ™ÎšÎ¡ÎŸÎ¡Î¥Î˜ÎœÎ™Î£Î•Î™Î£:                                                          â•‘
â•‘ â€¢ Î§ÏÏÎ¼Î±Ï„Î±: CSS Variables ÏƒÏ„Î·Î½ Î±ÏÏ‡Î® Ï„Î¿Ï… <style>                               â•‘
â•‘ â€¢ ÎšÎ¿Ï…Î¼Ï€Î¹Î¬: Î¤Î¼Î®Î¼Î± "ÎœÎ Î‘Î¡Î‘ ÎšÎŸÎ¥ÎœÎ Î™Î©Î" ÏƒÏ„Î¿ CSS                                   â•‘
â•‘ â€¢ Widgets: Î¤Î¼Î®Î¼Î±Ï„Î± "POST-IT WIDGET" ÎºÎ±Î¹ "RADIO PLAYER WIDGET"               â•‘
â•‘ â€¢ Î‰Ï‡Î¿Î¹: Î¤Î¼Î®Î¼Î± "WELCOME SOUND" ÏƒÏ„Î¿ JavaScript                                â•‘
â•‘                                                                              â•‘
â•‘ ğŸ“… Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î± ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ·: 2025-10-15                                          â•‘
â•‘ ğŸ‘¨â€ğŸ’» Î¦Ï„Î¹Î±Î³Î¼Î­Î½Î¿ Î¼Îµ Î±Î³Î¬Ï€Î· Î±Ï€ÏŒ Ï„Î¿ Doukas Pharmacy SupportÂ®                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-->

  <html lang="el">
  <head>
  <meta charset="UTF-8">

  <title>Î¤Î± Î´Î¹ÎºÎ¬ Î¼Î¿Ï… Ï‡ÏÎ®ÏƒÎ¹Î¼Î±</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" type="image/png" href="assets/logo.png">
 

  <style>
  
  /* =====================================================================
     ğŸ¨ Î£Î¤Î¥Î› CSS Î“Î™Î‘ Î¤Î—Î Î•Î¦Î‘Î¡ÎœÎŸÎ“Î— "Î¤Î‘ Î”Î™ÎšÎ‘ ÎœÎŸÎ¥ Î§Î¡Î—Î£Î™ÎœÎ‘"
     ===================================================================== */
  
  /* =====================================================================
     ğŸ¨ 1. Î˜Î•ÎœÎ‘Î¤Î™ÎšÎ‘ Î§Î¡Î©ÎœÎ‘Î¤Î‘ (CSS Variables)
     =====================================================================
     Î•Î´Ï Î¿ÏÎ¯Î¶Î¿Î½Ï„Î±Î¹ Ï„Î± Î²Î±ÏƒÎ¹ÎºÎ¬ Ï‡ÏÏÎ¼Î±Ï„Î± Ï„Î·Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î®Ï‚.
     ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î±Î»Î»Î¬Î¾ÎµÏ„Îµ Î±Ï…Ï„Î­Ï‚ Ï„Î¹Ï‚ Ï„Î¹Î¼Î­Ï‚ Î³Î¹Î± Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ® ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ·.
     --------------------------------------------------------------------- */
  :root {
    --bg1:#0d1b2a;
    --bg2:#1b263b;
    --card:#415a77;
    --text:#e0e1dd;
    --accent:#f4a261;
    --border:rgba(255,255,255,.15);
  }

  /* =====================================================================
     ğŸ—ï¸ 2. Î’Î‘Î£Î™ÎšÎ•Î£ Î¡Î¥Î˜ÎœÎ™Î£Î•Î™Î£ Î£Î•Î›Î™Î”Î‘Î£ (Reset + Body + Wrapper)
     =====================================================================
     Î•Î´Ï Î¿ÏÎ¯Î¶Î¿Î½Ï„Î±Î¹ Î¿Î¹ Î²Î±ÏƒÎ¹ÎºÎ­Ï‚ ÏÏ…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ Ï„Î·Ï‚ ÏƒÎµÎ»Î¯Î´Î±Ï‚:
     - Î‘Ï†Î±Î¯ÏÎµÏƒÎ· Ï€ÏÎ¿ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Ï‰Î½ margins/paddings
     - Î¦ÏŒÎ½Ï„Î¿ ÏƒÎµÎ»Î¯Î´Î±Ï‚ Î¼Îµ gradient
     - ÎšÎµÎ½Ï„ÏÎ¹ÎºÎ® ÏƒÏ„Î®Î»Î· Ï€ÎµÏÎ¹ÎµÏ‡Î¿Î¼Î­Î½Î¿Ï…
     --------------------------------------------------------------------- */ 
 	 
* { box-sizing: border-box; }
body {
  margin:0;
  background:linear-gradient(160deg,var(--bg1),var(--bg2));
  background-size: 100% 100%;      /* Î‘Ï€Î¿Ï†Ï…Î³Î® ÎµÏ€Î±Î½Î¬Î»Î·ÏˆÎ·Ï‚ gradient */
  background-repeat: no-repeat;    /* Î‘Ï€Î¿Ï†Ï…Î³Î® tiling */
  background-attachment: fixed;    /* Î£Ï„Î±Î¸ÎµÏÏŒ ÎºÎ±Ï„Î¬ Ï„Î¿ scroll */
  color:var(--text);
  font-family:Arial,Helvetica,sans-serif;
  padding-bottom: 70px; /* Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· padding ÏƒÏ„Î¿ body */
}
.wrap { 
  max-width:1250px; 
  margin:0 auto; 
  padding:10px 10px 20px; /* ÎœÎµÎ¯Ï‰ÏƒÎ· Î±Ï€ÏŒ 24px 10px 210px */
}
  /* =====================================================================
     ğŸ“‹ 3. ÎšÎ•Î¦Î‘Î›Î™Î”Î‘ Î£Î•Î›Î™Î”Î‘Î£ (Header)
     =====================================================================
     Î£Ï„Ï…Î» Î³Î¹Î± Ï„Î·Î½ ÎºÎµÏ†Î±Î»Î¯Î´Î± Î¼Îµ Ï„Î¯Ï„Î»Î¿ ÎºÎ±Î¹ Ï…Ï€ÏŒÏ„Î¹Ï„Î»Î¿Ï…Ï‚
     --------------------------------------------------------------------- */
  header { text-align:center; margin-bottom:8px; }
  header h1 { margin:4px 0 0; font-size:28px; font-weight:800; }
  header h2 { margin:6px 0 0; font-size:16px; color:#2a9df4; font-weight:700; }
  header h3 { margin:6px 0 0; font-size:13px; color:#bbb; font-weight:500; }


/* =====================================================================
   ğŸ”˜ 4. ÎœÎ Î‘Î¡Î‘ ÎšÎŸÎ¥ÎœÎ Î™Î©Î (Topbar)
   =====================================================================
   Î•Î´Ï Î¿ÏÎ¯Î¶Î¿Î½Ï„Î±Î¹ Ï„Î± ÏƒÏ„Ï…Î» Î³Î¹Î± Ï„Î·Î½ ÎµÏ€Î¬Î½Ï‰ Î¼Ï€Î¬ÏÎ± Î¼Îµ Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬:
   - Î£Ï„Î¿Î¯Ï‡Î¹ÏƒÎ· ÎºÎ¿Ï…Î¼Ï€Î¹ÏÎ½ (Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬, ÎºÎ­Î½Ï„ÏÎ¿, Î´ÎµÎ¾Î¹Î¬)
   - Responsive ÏƒÏ…Î¼Ï€ÎµÏÎ¹Ï†Î¿ÏÎ¬
   - Î•Î¹Î´Î¹ÎºÎ¬ Ï‡ÏÏÎ¼Î±Ï„Î± Î³Î¹Î± ÎºÎ»ÎµÎ¹ÏƒÏ„Î¬ widgets (ÎºÎ¯Ï„ÏÎ¹Î½Î¿/Ï‡ÏÏ…ÏƒÏŒ)
   --------------------------------------------------------------------- */
.topbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 10px 10px; 
    padding:8px;   /* ÎœÎµÎ¯Ï‰ÏƒÎ· ÎºÎ¬Ï„Ï‰ margin */
    position: relative;
    max-width: 1200px;  /* Î”ÎµÎ¾Î¹Î± Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬ themeSelect*/
    margin: 30px auto 33px auto; /* ÎœÎµÎ¯Ï‰ÏƒÎ· Ï€Î¬Î½Ï‰ ÎºÎ¬Ï„Ï‰ margin topbar */
    width: 100%;
    box-sizing: border-box;
    gap: 0/* Î‘Ï†Î±Î¯ÏÎµÏƒÎ· gap */
}

.topbar-left {
    width:-40px;
    display: flex;
    justify-content: flex-start;
}

.topbar-center {
    display: flex;
    gap: 10px;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    flex: 1;
}

.topbar-right {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 6px; /* ÎšÎµÎ½ÏŒ Î¼ÎµÏ„Î±Î¾Ï Ï„Ï‰Î½ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Ï‰Î½ */
    width: auto; /* Î‘Î»Î»Î±Î³Î® Î±Ï€ÏŒ 300px ÏƒÎµ auto */
    position: relative;
    flex-wrap: nowrap; /* ÎÎ± Î¼Î·Î½ Ï„Ï…Î»Î¯Î³Î¿Î½Ï„Î±Î¹ */
    min-width: 250px; /* Î•Î»Î¬Ï‡Î¹ÏƒÏ„Î¿ Ï€Î»Î¬Ï„Î¿Ï‚ */
}



.wrap {
  max-widt1h: 1250px;
  margin:  auto;
  padding: 12px 0 120px; /* ÎœÎµÎ¯Ï‰ÏƒÎ· ÎºÎ¬Ï„Ï‰ padding Î±Ï€ÏŒ 210px ÏƒÎµ 120px */
  width: 100%;
  box-sizing: border-box;
  
}

/* Î”Î¹ÏŒÏÎ¸Ï‰ÏƒÎ· footer Î³Î¹Î± Î½Î± Î¼Î·Î½ ÎºÏÏÎ²ÎµÎ¹ Ï€ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿ */
footer {
  position: fixed;
  left: 0;
  bottom: 0;
  width: 100%;
  background: rgba(35,36,41,.96);
  backdrop-filter: blur(6px);
  text-align: center;
  color: #a8b0bb;
  font-size: 12px;
  padding: 4px 10px;
  z-index: 999;
  height: auto;
  min-height: 60px; /* ÎœÎµÎ¯Ï‰ÏƒÎ· ÏÏˆÎ¿Ï…Ï‚ */
}

body:has(footer) .wrap {
  padding-bottom: 80px; /* ÎœÎµÎ¯Ï‰ÏƒÎ· padding Î³Î¹Î± footer */
}


  /* -------------------------------------------------
     5. ÎšÎŸÎ¥ÎœÎ Î™Î‘
  ------------------------------------------------- */
  button {
    padding:8px 14px; border:none; border-radius:10px; cursor:pointer;
    background:var(--accent); color:#fff; font-weight:700; font-size:14px;
  }
  button.gray { background:#596070!important; color:#ccc!important; }
  button:disabled { opacity:.45; cursor:not-allowed; }
  button:hover { opacity:0.85; }
  button:active { transform:scale(0.97); }

  /* Theme Selector ÎºÎ¬Ï„Ï‰ Î±Ï€ÏŒ Ï„Î¿ ÏÎ¿Î»ÏŒÎ³Î¹ - ÎµÏ…Î¸Ï…Î³ÏÎ±Î¼Î¼Î¹ÏƒÎ¼Î­Î½Î¿ Î¼Îµ Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ */
.theme-selector-below-clock {
    display: flex;
    justify-content: flex-end;
    transform: translateY 15px;  /* <-- Î Î¡ÎŸÎ£Î˜Î•Î£Î¤Î• Î‘Î¥Î¤ÎŸ */
    padding-right: 20px;
}
  
  .theme-selector-below-clock #themeSelect {
    padding: 8px 10px;
    border-radius: 10px;
    border: none;
    background: var(--accent);
    color: #fff;
    font-weight: 700;
    font-size: 14px;
    cursor: pointer;
    min-width: 140px;
    height: 30px;
    min-height:38px;
    line-height: 1;
    box-sizing: border-box;
  }
  .theme-selector-below-clock #themeSelect:hover {
    opacity: 0.85;
  }
  .theme-selector-below-clock #themeSelect:active {
    transform: scale(0.97);
  }
  #theme-toggle {
  position: relative;
}



/* -------------------------------------------------
     6. ÎšÎ‘Î¤Î—Î“ÎŸÎ¡Î™Î•Î£
  ------------------------------------------------- */
#categories { 
    display:flex; 
    flex-direction:column; 
    gap:12px; 
    padding: 0 30px; /* ÎŠÎ´Î¹Î¿ padding */
    width: 100%;
    max-width: 1255px;
    margin: 0 auto;
    box-sizing: border-box;
}
  .category {
    background:rgba(255,255,255,.04); border:1px solid var(--border);
    border-radius:14px; padding:10px;
  }
  .category.drag-over { outline:2px dashed #5aa9ff; outline-offset:4px; }

/* ===== Î£Ï„Ï…Î» Î³Î¹Î± Ï„Î¯Ï„Î»Î¿ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±Ï‚ ===== */

.category-title {
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: relative;
  padding: 4px 2px;
}

/* ÎŒÎ½Î¿Î¼Î± ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±Ï‚ Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬ - ÎœÎ• Î¤ÎŸ ÎÎ•ÎŸ Î§Î¡Î©ÎœÎ‘Î¤Î™Î£Î¤ÎŸ Î¦Î©ÎÎ¤ÎŸ */
.category-title h2 {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  color: var(--text);
  
  /* ÎÎ•ÎŸ Î£Î¤Î¥Î› Î Î‘Î¡ÎŸÎœÎŸÎ™ÎŸ ÎœÎ• Î¤ÎŸ Î¡ÎŸÎ›ÎŸÎ™ */
  backdrop-filter: blur(10px);
  border-radius: 12px;
  padding: 8px 16px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  text-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
  border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Î•Î½Î­ÏÎ³ÎµÎ¹ÎµÏ‚ Î´ÎµÎ¾Î¹Î¬ */
.cat-actions {
  display: flex;
  gap: 6px;
  align-items: center;
  opacity: 0;
  transition: opacity .2s;
}

/* Î¦Î±Î¯Î½Î¿Î½Ï„Î±Î¹ ÏƒÏ„Î¿ hover */
.category-title:hover .cat-actions {
  opacity: 1;
}

/* Collapse ÎºÎ¿Ï…Î¼Ï€Î¯ */
.toggle-btn {
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
  user-select: none;
  padding: 2px 6px;
  border-radius: 6px;
  background: rgba(0,0,0,.35);
  color: var(--text);
  transition: background .2s;
}
.toggle-btn:hover {
  background: rgba(0,0,0,.65);
}

/* Edit / Delete */
.cat-btn {
  cursor: pointer;
  font-size: 12px;
  padding: 2px 6px;
  border-radius: 6px;
  background: rgba(0,0,0,.35);
  color: var(--text);
  transition: background .2s;
}
.cat-btn:hover {
  background: rgba(0,0,0,.65);
}


  /* -------------------------------------------------
     7. GRID & CARDS
  ------------------------------------------------- */


.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  gap:6px
  width: 95%;
  aspect-ratio: 1/1;
  overflow: visible;

  display: flex;
  align-items: center;
  justify-content: center;
  transition: .08s ease;
  padding: 10px;

  /* âœ¨ Fade-in animation */
  opacity: 0;
  transform: translateY(10px);
  animation: fadeInUp 0.6s ease forwards;
}

.card:hover {
  transform: translateY(-3px);
  background: color-mix(in oklab, var(--accent) 20%, transparent);
  border-color: var(--accent);
}

.card.pinned {
  outline: 2px solid gold;
  outline-offset: -2px;
  box-shadow: 0 0 0 2px rgba(255,215,0,.25) inset;
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}



  /*background & shadow */

.card {
  border-radius: 12px;
  gap: 6px;
  width: 95%;
  aspect-ratio: 1/1;
  overflow: visible;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: .3s ease;
  padding: 10px;
  
  /* âœ¨ Soft background & shadow */
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.01));
  border: 1px solid rgba(255, 255, 255, 0.12);
  box-shadow: 
    0 2px 8px rgba(0, 0, 0, 0.15),
    0 0 15px rgba(244, 162, 97, 0.08);
  
  /* ğŸŒŠ Floating animation */
  animation: fadeInUp 0.6s ease forwards, cardFloat 3s ease-in-out infinite;
}

/* Animation Î³Î¹Î± Î±Ï€Î±Î»ÏŒ "Ï€Î»Ï‰Ï„ÏŒ" ÎµÏ†Î­ */
@keyframes cardFloat {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-3px);
  }
}








  /* -------------------------------------------------
     8. LINKS Î£Î• ÎšÎ‘Î¡Î¤Î•Î£
  ------------------------------------------------- */
  .card a {
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    text-decoration:none; color:var(--text); width:100%; height:100%;
  }
  .card img.favicon {
    width:48px; height:48px; margin-bottom:8px; display:block;
  }
  .link-title {
    font-size:9px; font-weight:700; color:var(--text);
    white-space:nowrap; word-break:break-word; text-align:center;
    max-width:95%;
  }
  .link-desc {
  font-size: 8px; 
  color: rgba(255,255,255,.6); 
  margin-top: 2px;
  max-width: 90%; 
  white-space: nowrap; 
  overflow: hidden; 
  text-overflow: ellipsis;
  max-width: 15ch;
}

  /* Hover ÏƒÎµ links */
  a { color:var(--text); text-decoration:none; transition:.25s; }
  a:not(.fav):not(.del):not(.edit):hover {
    color:var(--accent);
    background:rgba(230,57,70,0.15);
    font-weight:600; padding:2px 4px; border-radius:6px;
  }
  
  
.card a:not(.fav):not(.del):not(.edit):hover {
  color: var(--accent);
  background: rgba(255, 255, 255, 0.15);
  border-radius: 10px;
  font-weight: 700;
  box-shadow: 0 0 12px rgba(244, 162, 97, 0.8);
}


 /* -------------------------------------------------
  9. ÎÎ•ÎŸ MENU Î Î‘ÎÎ© Î£Î¤Î™Î£ ÎšÎ‘Î¡Î¤Î•Î£
  ------------------------------------------------- */

/* Ï„Î¿ <a> Î¼Î­Î½ÎµÎ¹ Ï‡Î±Î¼Î·Î»Î¬ ÏÏƒÏ„Îµ Î½Î± Î¼Î·Î½ ÏƒÎºÎµÏ€Î¬Î¶ÎµÎ¹ Ï„Î¿ ÎºÎ¿Ï…Î¼Ï€Î¯ */
.card a {
  position: relative;
  z-index: 0;
}

.card .menu-btn {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 15px;
  height: 15px;
  border: none;
  border-radius: 50%;
  background: var(--accent);
  color: white;
  font-size: 12px;
  font-weight: bold;
  line-height: 18px;
  text-align: center;
  cursor: pointer;
  opacity: 0;
  transition: all 0.3s ease;
  z-index: 1100;
  pointer-events: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(4px);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}
.card:hover .menu-btn {
  opacity: 1;
  transform: scale(1.1);
}
.card .menu-btn:hover {
  background: color-mix(in srgb, var(--accent) 80%, #000 20%);
  transform: scale(1.15);
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.4);
  display: flex;
}
/* popup Î¼Îµ Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¬ÎºÎ¹Î± */
.card .menu-popup {
  position: absolute;
  top: -32px;
  right: 2px;
  display: none;
  flex-direction: row;
  gap: 2px;
  background: #1b2631;
  border: 1px solid #000;
  border-radius: 6px;
  padding: 2px 4px;
  z-index: 1000;
  box-shadow: 0 1px 5px rgba(0,0,0,0.4);
  transform: scale(0.9);
  transform-origin: top right;
}

/* styling Î³Î¹Î± Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¬ÎºÎ¹Î± */
.card .menu-popup button {
  background: #2c3e50;
  border: 1px solid #000;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.2s ease, background 0.2s ease;
}

/* ÎµÎ¹ÎºÎ¿Î½Î¯Î´Î¹Î¿ Î¼Î­ÏƒÎ± ÏƒÏ„Î¿ ÎºÎ¿Ï…Î¼Ï€Î¯ */
.card .menu-popup button svg {
  width: 10px;
  height: 10px;
  fill: #fff;
  transition: fill 0.2s ease;
}

/* hover ÎµÏ†Î­ */
.card .menu-popup button:hover {
  transform: scale(1.1);
  background: var(--accent);
 display: flex;
}

.card .menu-popup button:hover svg {
  fill: #fff;
}


  /* -------------------------------------------------
     10. FOOTER
  ------------------------------------------------- */
  footer {
    position:fixed; left:0; bottom:0; width:100%;
    background:rgba(35,36,41,.96); backdrop-filter:blur(6px);
    text-align:center; color:#a8b0bb; font-size:12px; padding:4px 10px;
  }
  footer .btnrow { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin-bottom:6px; }
  footer .note { color:#aab2bd; font-weight:700; }
  body:has(footer) .wrap { padding-bottom:70px; }
  


  /* -------------------------------------------------
     11. MODALS
  ------------------------------------------------- */
  .modal {
    position:fixed; inset:0; display:none;
    align-items:center; justify-content:center;
    background:rgba(0,0,0,.6); z-index:4000;
  }
  .modal .box {
    background:var(--bg2); border:1px solid var(--border);
    border-radius:14px; padding:16px; width:94%; max-width:420px;
  }
  .modal h3 { margin:0 0 8px; font-size:18px; }
  .modal .row { display:flex; flex-direction:column; gap:6px; margin:8px 0; }
  .modal input,.modal textarea,select {
    background:var(--card); color:var(--text); border:1px solid var(--border);
    border-radius:8px; padding:8px; width:100%;
  }
  .modal .actions { display:flex; gap:8px; justify-content:flex-end; margin-top:6px; }

  /* Î•Ï€Î¹Î»Î¿Î³Î® ÎµÎ¹ÎºÎ¿Î½Î¹Î´Î¯Î¿Ï… */
  .icon-row { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
  .icon-row select,.icon-row input[type=file]{flex:1;}
  .icon-preview { display:flex; align-items:center; gap:8px; margin-top:4px; font-size:12px; color:#cbd5e1; }
  .icon-preview img{width:24px;height:24px;}

  /* ÎšÎ¿Ï…Î¼Ï€Î¯ Ï€Î±Î»Î­Ï„Î±Ï‚ (Î±ÏŒÏÎ±Ï„Î¿) */
#paletteBtn {
    position:fixed; top:50%; right:0; transform:translateY(-50%);
    width:10px; height:30px; opacity:0; cursor:pointer; z-index:4500;
    padding: 5px 5px;
    margin-right: 5px;
}

  /* Î Î±Î»Î­Ï„Î± */
  .palette-row { display:flex; align-items:center; gap:12px; }
  .color-swatch { width:48px; height:48px; border-radius:8px; border:1px solid var(--border); }

  /* -------------------------------------------------
     12. TOOLTIP
  ------------------------------------------------- */
  [data-tooltip]{position:relative;}
  [data-tooltip]::after{
    content:attr(data-tooltip);
    position:absolute; bottom:107%; left:50%; transform:translateX(-50%);
    background:#fff9c4; color:#0a58ca; border:1px solid rgba(10,88,202,.35);
    padding:4px 8px; border-radius:6px; white-space:nowrap; font-size:12px; font-weight:600;
    opacity:0; pointer-events:none; transition:opacity .2s; box-shadow:0 6px 18px rgba(0,0,0,.2);
  }
  [data-tooltip]:hover::after{opacity:1;}

  /* -------------------------------------------------
     13. TRANSITIONS
  ------------------------------------------------- */
  body, footer, button {
    transition: background .3s, color .3s, opacity .3s, transform .1s;
  }
  
  .category.drag-over {
  outline: 2px dashed #5aa9ff;
  outline-offset: 4px;
  background: rgba(90, 169, 255, 0.08);
}

  /* -------------------------------------------------
     14. BUBBLE Î•Î¦Î•
  ------------------------------------------------- */

.bubbles {
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0; left: 0;
  overflow: hidden;
  z-index: -1;
}
.bubbles span {
  position: absolute;
  display: block;
  width: 20px; height: 20px;
  background: rgba(255,255,255,0.2);
  border-radius: 50%;
  bottom: -100px;
  animation: rise 20s infinite;
}
.bubbles span:nth-child(1){ left:10%; animation-duration:12s; width:15px; height:15px;}
.bubbles span:nth-child(2){ left:20%; animation-duration:18s;}
.bubbles span:nth-child(3){ left:70%; animation-duration:16s; width:25px; height:25px;}
.bubbles span:nth-child(4){ left:50%; animation-duration:22s;}
.bubbles span:nth-child(5){ left:85%; animation-duration:26s;}

@keyframes rise {
  0% {transform: translateY(0) scale(1);}
  100% {transform: translateY(-1200px) scale(0.5);}
}
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  gap: 12px;
  margin-top: 10px;
}

 .grid {
  transition: max-height 0.3s ease, opacity 0.3s ease;
  overflow: hidden;
  max-height: 9999px;
  opacity: 1;
}

.grid.collapsed {
  max-height: 0;
  opacity: 0;
  pointer-events: none;
}

.grid {
  transition: all 0.4s ease;
}

.toggle-btn {
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
  user-select: none;
  padding: 2px 6px;
  border-radius: 6px;
  background: rgba(0,0,0,.35);
  color: var(--text);
  transition: background .2s;
}
.toggle-btn:hover {
  background: rgba(0,0,0,.65);
}

/* ÎÎ­Î¿ ÏƒÏ„Ï…Î» Î³Î¹Î± header */
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
  position: relative;
  padding: 0 40px; /* ÎŠÎ´Î¹Î¿ padding Î¼Îµ Ï„Î¿ wrap */
  max-width: 1200px;
  margin: 0 auto 10px auto;
  width: 100%;
  box-sizing: border-box;
}

.logo-title {
  display: flex;
  align-items: center;
  gap: 14px;
}

.logo-title img {
  height: 70px;
  border-radius: 12px;
}

.titles h1 {
  margin: 4px 0 0;
  font-size: 26px;
  font-weight: 800;
}
.titles h2 {
  margin: 6px 0 0;
  font-size: 14px;
  color: #2a9df4;
  font-weight: 700;
}
.titles h3 {
  margin: 6px 0 0;
  font-size: 13px;
  color: #bbb;
  font-weight: 500;
}

footer {
  position: fixed;
  left: 0;
  bottom: 0;
  width: 100%;
  background: rgba(35,36,41,.96);
  backdrop-filter: blur(6px);
  font-size: 12px;
  color: #a8b0bb;
  padding: 4px 10px;
  overflow: visible;
  z-index: 999;
  height: auto;
  min-height: 70px;
}

/* Wrapper Î³Î¹Î± Ï„Î¿ pulse */
.note-wrapper {
  display: inline-block;
  animation: pulse 2s ease-in-out infinite;
}

.note {
  display: block;
  text-align: center;
  white-space: nowrap;
  animation: scroll-right 12s linear infinite,
             colorShift 8s linear infinite;
}

/* ÎšÎ¯Î½Î·ÏƒÎ· */
@keyframes scroll-right {
  0%   { transform: translateX(-100vw); }
  100% { transform: translateX(100vw); }
}

/* Î•Î½Î±Î»Î»Î±Î³Î® Ï‡ÏÏÎ¼Î±Ï„Î¿Ï‚ */
@keyframes colorShift {
  0%   { color: #f4a261; }
  25%  { color: #2a9df4; }
  50%  { color: #a1ff0a; }
  75%  { color: #ff4081; }
  100% { color: #f4a261; }
}

/* Pulse */
@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50%      { transform: scale(1.2); }
}

.typewriter {
  display: inline-block;
  overflow: hidden;
  white-space: nowrap;
  border-right: 2px solid var(--accent);
  width: 0;
  animation: typing 3s steps(25, end) forwards,
             hideCursor 0.1s 3s forwards;
}

@keyframes hideCursor {
  to {
    border-color: transparent;
  }
}

@keyframes typing {
  from { width: 0 }
  to   { width: 100% }
}

.card {
  opacity: 0;
  transform: translateY(10px);
  animation: fadeInUp 0.6s ease forwards;
}

/* Keyframes ÏŒÏ€Ï‰Ï‚ Ï€ÏÎ¹Î½ */
@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===============================
   ğŸ“Œ Drag & Drop Styles - ENHANCED
   =============================== */

.card.dragging {
  opacity: 0.5;
  transform: scale(0.95) rotate(2deg);
  transition: none;
  box-shadow: 0 8px 25px rgba(0,0,0,0.3);
  z-index: 1000;
}

.card.drop-target {
  transform: scale(1.05);
  box-shadow: 0 8px 25px rgba(0, 122, 204, 0.3);
  border: 2px solid #007acc;
  transition: all 0.2s ease;
}

.category.drop-target {
  background: rgba(0, 122, 204, 0.1);
  border: 2px dashed #007acc;
  transition: all 0.2s ease;
}

.category.drag-over {
  background: rgba(0, 122, 204, 0.1);
  border: 2px dashed #007acc;
}

/* Drop indicator Î³Î¹Î± precise positioning */
.drop-indicator {
  position: absolute;
  height: 3px;
  background: linear-gradient(90deg, #007acc, #00a8ff);
  border-radius: 2px;
  z-index: 1000;
  pointer-events: none;
  box-shadow: 0 2px 8px rgba(0, 122, 204, 0.5);
  animation: pulse-indicator 1s infinite;
}

@keyframes pulse-indicator {
  0%, 100% { opacity: 1; transform: scaleY(1); }
  50% { opacity: 0.7; transform: scaleY(1.5); }
}

/* Î’ÎµÎ»Ï„Î¹Ï‰Î¼Î­Î½Î¿ feedback Î³Î¹Î± draggable items */
.card[draggable="true"] {
  cursor: grab;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card[draggable="true"]:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.card[draggable="true"]:active {
  cursor: grabbing;
}


/* âœ… Î´Î¹Î¿ÏÎ¸ÏÏƒÎµÎ¹Ï‚ Î³Î¹Î± hover ÏƒÏ„Î¹Ï‚ ÎºÎ¬ÏÏ„ÎµÏ‚ */

/* Î¤Î¿ link Î¼Î­ÏƒÎ± ÏƒÏ„Î·Î½ ÎºÎ¬ÏÏ„Î± Î´ÎµÎ½ ÎºÎ¬Î½ÎµÎ¹ scale */
.card a:not(.fav):not(.del):not(.edit):hover {
  color: var(--accent);
  background: rgba(230,57,70,0.1);
  border-radius: 10px;
}

/* ÎŸÎ»ÏŒÎºÎ»Î·ÏÎ· Î· ÎºÎ¬ÏÏ„Î± Î¼ÎµÎ³Î±Î»ÏÎ½ÎµÎ¹ ÏƒÏ„Î¿ hover */
.card:hover {
  transform: scale(1.04);
  background: color-mix(in oklab, var(--accent) 20%, transparent);
  border-color: var(--accent);
}

/* Î¤Î¿ grid Î±Ï†Î®Î½ÎµÎ¹ Ï„Î¹Ï‚ ÎºÎ¬ÏÏ„ÎµÏ‚ Î½Î± "Î¾ÎµÏ†ÎµÏÎ³Î¿Ï…Î½" ÏŒÏ„Î±Î½ ÎºÎ¬Î½Î¿Ï…Î½ scale */
.grid {
  overflow: visible !important;
}

.palette-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin: 6px 0;
}

.palette-row label {
  flex: 1; 
  cursor: pointer;
  font-weight: 600;
}

.palette-row input[type="color"] {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

.color-preview {
  width: 28px;
  height: 28px;
  border-radius: 6px;
  border: 1px solid var(--border);
  cursor: pointer;
}

.row.palette-row {
  flex-direction: row !important;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}


.theme-toggle-wrapper {
  position: absolute;
  top: 10px;
  right: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.theme-toggle-wrapper .version {
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
  opacity: 0.7;
}

/* -------------------------------------------------
   12. Î¡ÎŸÎ›ÎŸÎ™ - Î—ÎœÎ•Î¡ÎŸÎœÎ—ÎÎ™Î‘ (Î”Î•ÎÎ™Î‘ Î£Î• Î™Î”Î™Î‘ Î“Î¡Î‘ÎœÎœÎ—)
   === ÎŸÎ¼Î¿Î¹ÏŒÎ¼Î¿ÏÏ†Î¿ ÏƒÏ„Ï…Î» + Ï†Ï‰Ï„ÎµÎ¹Î½ÏŒ Ï€ÎµÏÎ¯Î³ÏÎ±Î¼Î¼Î± ===
------------------------------------------------- */

header {
  display: flex;
  justify-content: space-between;
  gap: 30px;
  align-items: center;
  margin-bottom: 10px;
  position: relative;
  padding: 0 10px 0 40px;
}

/* ===== Î£Ï„Ï…Î» ÏÎ¿Î»Î¿Î³Î¹Î¿Ï ===== */
.datetime-widget {
  position: relative;
  background: rgba(30, 30, 30, 0.25);
  border: 1px solid rgba(255, 255, 255, 0.22);
  border-radius: 14px;
  backdrop-filter: blur(15px) saturate(180%);
  -webkit-backdrop-filter: blur(15px) saturate(180%);
  box-shadow:
    0 6px 20px rgba(0, 0, 0, 0.4),
    inset 0 1px 1px rgba(255, 255, 255, 0.05);
  padding: 12px 18px;
  min-width: 180px;
  text-align: center;
  flex-shrink: 0;
  margin-left: 10px;
  transition: all 0.25s ease-in-out;
  overflow: hidden;
}

/* --- Neon Ï†Ï‰Ï„ÎµÎ¹Î½Î® Î³ÏÎ±Î¼Î¼Î® Î³ÏÏÏ‰ Î±Ï€ÏŒ Ï„Î¿ Ï€Î»Î±Î¯ÏƒÎ¹Î¿ --- */
.datetime-widget::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 14px;
  padding: 2px;
  background: linear-gradient(
    130deg,
    rgba(0, 255, 204, 0.6),
    rgba(0, 136, 255, 0.6),
    rgba(0, 255, 204, 0.6)
  );
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0.35;
  transition: opacity 0.3s ease;
}

/* Î•Ï†Î­ hover */
.datetime-widget:hover::before {
  opacity: 0.8;
}

.datetime-widget:hover {
  transform: translateY(-2px);
  box-shadow:
    0 8px 18px rgba(0, 0, 0, 0.55),
    inset 0 1px 2px rgba(255, 255, 255, 0.1);
}

/* ÎÏÎ± */
.datetime-widget .time {
  font-size: 24px;
  font-weight: 700;
  color: var(--accent);
  margin-bottom: 4px;
  text-shadow: 0 0 12px rgba(44, 162, 97, 0.3);
  font-family: 'Courier New', monospace;
  animation: pulse 2s ease-in-out infinite;
}

/* Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± */
.datetime-widget .date {
  font-size: 16px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.9);
  opacity: 0.85;
}

/* ÎšÎµÎ½Ï„ÏÎ¹ÎºÏŒ content */
.logo-title {
  display: flex;
  align-items: center;
  gap: 16px;
  flex: 1;
  justify-content: center;
  margin-left: 30px;
}

/* Responsive Î³Î¹Î± ÎºÎ¹Î½Î·Ï„Î¬ */
@media (max-width: 768px) {
  header {
    flex-direction: column;
    gap: 15px;
    text-align: center;
    padding: 0 10px;
  }

  .datetime-widget {
    margin-left: 0;
    order: -1;
    width: fit-content;
    margin-left: auto;
    margin-right: auto;
  }

  .logo-title {
    flex-direction: column;
    margin-left: 0;
  }
}

/* Animation Î³Î¹Î± Ï€Î±Î»Î¼ÏŒ ÏÏÎ±Ï‚ */
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.8; }
}



/* ===== Î§Î¡Î©ÎœÎ‘Î¤Î™Î£Î¤ÎŸ Î¦Î©ÎÎ¤ÎŸ ÎœÎŸÎÎŸ Î“Î™Î‘ Î¤ÎŸ ÎŸÎÎŸÎœÎ‘ ÎšÎ‘Î¤Î—Î“ÎŸÎ¡Î™Î‘Î£ ===== */
.category-title {
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: relative;
  padding: 4px 2px;
}

/* Î¤Î¿ ÏŒÎ½Î¿Î¼Î± ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±Ï‚ Î¼Îµ Ï„Î¿ special Ï†ÏŒÎ½Ï„Î¿ */
.category-title h2 {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  color: var(--text);
  
  /* ÎÎ­Î¿ ÏƒÏ„Ï…Î» Î³Î¹Î± Ï„Î¿ Ï†ÏŒÎ½Ï„Î¿ */
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  padding: 8px 16px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  
  /* ÎšÎµÎ¯Î¼ÎµÎ½Î¿ */
  text-shadow: 0 0 10px rgba(244, 162, 97, 0.3);
}

/* Î•Î½Î­ÏÎ³ÎµÎ¹ÎµÏ‚ Î´ÎµÎ¾Î¹Î¬ */
.cat-actions {
  display: flex;
  gap: 6px;
  align-items: center;
  opacity: 0;
  transition: opacity .2s;
}

/* Î¦Î±Î¯Î½Î¿Î½Ï„Î±Î¹ ÏƒÏ„Î¿ hover */
.category-title:hover .cat-actions {
  opacity: 1;
}
/* Î”Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ¬ Ï‡ÏÏÎ¼Î±Ï„Î± Î³Î¹Î± ÎºÎ¬Î¸Îµ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î± */
.category:nth-child(1) .category-title h2 {
  background: linear-gradient(135deg, rgba(244, 162, 97, 0.2), rgba(244, 162, 97, 0.1));
  border: 1px solid rgba(244, 162, 97, 0.3);
}

.category:nth-child(2) .category-title h2 {
  background: linear-gradient(135deg, rgba(42, 157, 244, 0.2), rgba(42, 157, 244, 0.1));
  border: 1px solid rgba(42, 157, 244, 0.3);
}

.category:nth-child(3) .category-title h2 {
  background: linear-gradient(135deg, rgba(161, 255, 10, 0.2), rgba(161, 255, 10, 0.1));
  border: 1px solid rgba(161, 255, 10, 0.3);
}

.category:nth-child(4) .category-title h2 {
  background: linear-gradient(135deg, rgba(255, 64, 129, 0.2), rgba(255, 64, 129, 0.1));
  border: 1px solid rgba(255, 64, 129, 0.3);
}

.category:nth-child(5) .category-title h2 {
  background: linear-gradient(135deg, rgba(159, 89, 243, 0.2), rgba(159, 89, 243, 0.1));
  border: 1px solid rgba(159, 89, 243, 0.3);
}

/* Help Menu Styles - Î”Î™Î©Î¡Î˜Î©ÎœÎ•ÎÎ•Î£ */
.help-menu {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    z-index: 1000;
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    margin: 0 auto;
}

.help-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.7);
    z-index: 999;
}

.help-menu h2 {
    color: #2c3e50;
    margin-bottom: 25px;
    text-align: center;
    border-bottom: 2px solid #3498db;
    padding-bottom: 10px;
}

.help-section {
    margin-bottom: 25px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
    border-left: 4px solid #3498db;
}

.help-section h3 {
    color: #2c3e50;
    margin-bottom: 12px;
    font-size: 1.1em;
}

.help-section p {
    margin-bottom: 10px;
    color: #555;
}

.help-section ul {
    list-style-type: none;
    padding-left: 0;
}

.help-section li {
    margin-bottom: 8px;
    padding-left: 20px;
    position: relative;
    color: #555;
}

.help-section li:before {
    content: "â€¢";
    color: #3498db;
    position: absolute;
    left: 0;
    font-weight: bold;
}

.close-help {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    font-size: 28px;
    cursor: pointer;
    color: #7f8c8d;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.close-help:hover {
    background: #f0f0f0;
    color: #e74c3c;
}

/* Î’ÎŸÎ—Î˜Î•Î™Î‘ ÎšÎŸÎ¥ÎœÎ Î™ - ÎœÎŸÎÎŸ Î‘Î¥Î¤ÎŸ ÎšÎ¡Î‘Î¤Î‘ */
.help-btn {
    background: var(--accent) !important;
}

.help-btn:hover {
    background: var(--accent-hover, #8e44ad) !important;
    transform: translateY(-2px);
}

/* Responsive Î²ÎµÎ»Ï„Î¹ÏÏƒÎµÎ¹Ï‚ help */
@media (max-width: 768px) {
    .help-menu {
        width: 95%;
        padding: 20px;
        margin: 10px;
    }
}

@media (max-width: 480px) {
    .help-menu {
        width: 98%;
        padding: 15px;
        margin: 5px;
    }
}

@media (max-width: 768px) {
    header,
    .topbar,
    #categories,
    .wrap {
        padding: 0 20px;
    }
    
    .radio-player,
    .postit-widget {
        left: 20px;
        right: 20px;
        width: calc(100% - 40px);
        max-width: none;
    }
    
    .topbar {
        flex-direction: column;
        gap: 10px;
    }
    
    .topbar-left,
    .topbar-right {
        width: 100%;
        justify-content: center;
    }
}



	
/* Zuccaradio Button Styles */
.zuccaradio-btn,
button.zuccaradio-btn {
    background: linear-gradient(135deg, #ff6b6b, #ee5a24) !important;
    color: white !important;
    border: 1px solid rgba(255,255,255,0.3) !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
    box-shadow: 0 4px 15px rgba(238, 90, 36, 0.3) !important;
}

.zuccaradio-btn:hover,
button.zuccaradio-btn:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 6px 20px rgba(238, 90, 36, 0.4) !important;
    background: linear-gradient(135deg, #ff7979, #ff3838) !important;
}

/* ÎŒÏ„Î±Î½ Ï€Î±Î¯Î¶ÎµÎ¹ Ï„Î¿ ÏÎ±Î´Î¹ÏŒÏ†Ï‰Î½Î¿ - Î Î¡Î‘Î£Î™ÎÎŸ Î¼Îµ animation */
.zuccaradio-btn.playing,
button.zuccaradio-btn.playing {
    background: linear-gradient(135deg, #00b894, #00a085) !important;
    box-shadow: 0 4px 15px rgba(0, 184, 148, 0.5) !important;
    animation: radioPulse 2s ease-in-out infinite !important;
}

.zuccaradio-btn.playing:hover,
button.zuccaradio-btn.playing:hover {
    background: linear-gradient(135deg, #00d4a7, #00b894) !important;
    box-shadow: 0 6px 20px rgba(0, 184, 148, 0.6) !important;
    transform: translateY(-2px) !important;
}

@keyframes radioPulse {
    0%, 100% {
        box-shadow: 0 4px 15px rgba(0, 184, 148, 0.5);
    }
    50% {
        box-shadow: 0 4px 25px rgba(0, 184, 148, 0.8);
    }
}

/* =====================================================================
   ğŸµ RADIO PLAYER WIDGET (Zuccaradio)
   =====================================================================
   Î¤Î¿ Radio Player widget ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹ ÏƒÏ„Î·Î½ Î±ÏÎ¹ÏƒÏ„ÎµÏÎ® Ï€Î»ÎµÏ…ÏÎ¬.
   Î•Î´Ï Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± ÏÏ…Î¸Î¼Î¯ÏƒÎµÏ„Îµ Ï„Î·Î½ ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ· Ï„Î¿Ï… ÏÎ±Î´Î¹Î¿Ï†ÏÎ½Î¿Ï….
   --------------------------------------------------------------------- */
/* === ZUCCARADIO POPUP PLAYER (Î´Î¹Î¬Ï†Î±Î½Î¿ frosted ÎµÏ†Î­) === */
.radio-player {
    position: fixed;
    top: 120px;
    left: 40px;
    transform: none;

    /* âœ¨ Î²Î±ÏƒÎ¹ÎºÏŒ Î³Ï…Î¬Î»Î¹Î½Î¿ ÎµÏ†Î­ âœ¨ */
    background: rgba(30, 30, 30, 0.7);      /* Î·Î¼Î¹Î´Î¹Î±Ï†Î±Î½Î­Ï‚ Î³ÎºÏÎ¹ */
    backdrop-filter: blur(14px) saturate(160%); /* Î¸ÏŒÎ»Ï‰ÏƒÎ· & Î¶Ï‰Î·ÏÎ¬ Ï‡ÏÏÎ¼Î±Ï„Î± */

    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 14px;
    padding: 16px;
    z-index: 10000;
    display: none;
    min-width: 250px;
    max-width: 250px;

    /* âœ¨ Î²Î¬Î¸Î¿Ï‚ & glow âœ¨ */
    box-shadow:
      0 6px 20px rgba(0, 0, 0, 0.4),
      inset 0 1px 1px rgba(255, 255, 255, 0.05);
    color: var(--text);
    transition: all 0.3s ease;
    overflow: hidden;  /* Î“Î¹Î± Î½Î± Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î®ÏƒÎµÎ¹ Ï„Î¿ neon border */
}

/* Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ ÎµÏ†Î­ hover (ÏƒÎ±Î½ Î½Î± â€œÎ¾Ï…Ï€Î½Î¬â€ Î»Î¯Î³Î¿ Ï„Î¿ Î³Ï…Î±Î»Î¯) */
.radio-player:hover {
    box-shadow:
      0 10px 25px rgba(0, 0, 0, 0.55),
      inset 0 1px 2px rgba(255, 255, 255, 0.08);
    transform: translateY(-2px);
}

/* --- Neon Ï†Ï‰Ï„ÎµÎ¹Î½Î® Î³ÏÎ±Î¼Î¼Î® Î³ÏÏÏ‰ Î±Ï€ÏŒ Ï„Î¿ ZuccaRadio --- */
.radio-player::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 14px;
  padding: 2px;
  background: linear-gradient(
    130deg,
    rgba(255, 107, 107, 0.6),
    rgba(0, 184, 148, 0.6),
    rgba(255, 107, 107, 0.6)
  );
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0.35;
  transition: opacity 0.3s ease;
}

.radio-player:hover::before {
  opacity: 0.8;
}



/* ===== Volume Control ===== */
.volume-container {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  right: 360px;
  top: 50%;
  transform: translateY(-50%);
}

.volume-control {
  width: 90px;
  accent-color: var(--accent);
}

.volume-control::-webkit-slider-runnable-track {
    background: var(--card);
    border-radius: 10px;
    height: 6px;
    border: 1px solid var(--border);
}

.volume-control::-webkit-slider-thumb {
    appearance: none;
    background: var(--accent);
    border: 2px solid white;
    border-radius: 50%;
    width: 16px;
    height: 16px;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}

.volume-control::-moz-range-track {
    background: var(--card);
    border-radius: 10px;
    height: 6px;
    border: 1px solid var(--border);
}

.volume-control::-moz-range-thumb {
    background: var(--accent);
    border: 2px solid white;
    border-radius: 50%;
    width: 16px;
    height: 16px;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}

#volumeTooltip {
  position: absolute;
  bottom: 125%;
  transform: translateX(-50%);
  pointer-events: none;
}

.volume-icon {
    font-size: 16px;
    margin-right: 5px;
    cursor: pointer;
    transition: transform 0.2s ease;
    z-index: 100;
}

.volume-icon:hover {
    transform: scale(1.1);
}

/* === Î•Î½Î¿Ï€Î¿Î¯Î·ÏƒÎ· ÎºÎ¿Ï…Î¼Ï€Î¹ÏÎ½ & volume === */
.topbar {
  display: flex;
  align-items: center;
  justify-content: flex-start;
}

.topbar button,
.help-btn {
  padding: 8px 14px !important;
  font-size: 14px !important;
  height: 36px !important;
  border-radius: 10px !important;
  background: var(--accent) !important;
  color: #fff !important;
  border: none !important;
  box-shadow: none !important;
  font-weight: 700 !important;
}

/* Î¤Î¿ Zucca Radio ÎºÎ¿Ï…Î¼Ï€Î¯ Î­Ï‡ÎµÎ¹ Î´Î¹ÎºÏŒ Ï„Î¿Ï… styling */
.topbar .zuccaradio-btn {
  padding: 8px 14px !important;
  font-size: 14px !important;
  height: 36px !important;
  border-radius: 10px !important;
  font-weight: 700 !important;
}

/* ===== ÎšÎ™Î¤Î¡Î™ÎÎŸ/Î§Î¡Î¥Î£ÎŸ Î§Î¡Î©ÎœÎ‘ Î“Î™Î‘ ÎšÎ›Î•Î™Î£Î¤Î‘ WIDGETS ===== */
/* Zuccaradio ÎºÎ¿Ï…Î¼Ï€Î¯ ÏŒÏ„Î±Î½ ÎµÎ¯Î½Î±Î¹ ÎºÎ»ÎµÎ¹ÏƒÏ„ÏŒ (Ï‡Ï‰ÏÎ¯Ï‚ .active) */
.topbar .zuccaradio-btn:not(.active) {
  background: linear-gradient(135deg, #ffd700, #ffb300) !important;
  color: #333 !important;
  box-shadow: 0 3px 10px rgba(255, 179, 0, 0.4) !important;
}

.topbar .zuccaradio-btn:not(.active):hover {
  background: linear-gradient(135deg, #ffed4e, #ffc107) !important;
  transform: translateY(-1px) !important;
  box-shadow: 0 4px 15px rgba(255, 179, 0, 0.6) !important;
}

/* ===== POST-IT ÎšÎŸÎ¥ÎœÎ Î™ ÎŸÎ¤Î‘Î Î•Î™ÎÎ‘Î™ ÎšÎ›Î•Î™Î£Î¤ÎŸ ===== */
#postitWidgetBtn:not(.active) {
  background: linear-gradient(135deg, #ffd700, #ffb300) !important;
  color: #333 !important;
  box-shadow: 0 3px 10px rgba(255, 179, 0, 0.4) !important;
  transition: all 0.3s ease !important;
}

/* Hover effect Î³Î¹Î± Ï„Î¿ Post-it ÎºÎ¿Ï…Î¼Ï€Î¯ - Î±Î»Î»Î¬Î¶ÎµÎ¹ Ï‡ÏÏÎ¼Î± ÎºÎ±Î¹ Î±Î½Ï…ÏˆÏÎ½ÎµÏ„Î±Î¹ */
#postitWidgetBtn:not(.active):hover {
  background: linear-gradient(135deg, #ffed4e, #ffc107) !important;
  transform: translateY(-2px) scale(1.02) !important;
  box-shadow: 0 6px 20px rgba(255, 179, 0, 0.7) !important;
  color: #222 !important;
}

.volume-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  flex-shrink: 0;
  position: relative;
  left:320px;
}

.volume-control {
  width: 90px;
  accent-color: var(--accent);
  transform: translateY(1px);
}

.volume-icon {
  cursor: pointer;
  font-size: 16px;
  transition: transform 0.2s ease;
}

.volume-icon:hover {
  transform: scale(1.1);
}



/* PERMANENT BUTTON HEIGHT FIX */
.topbar button,
.topbar .zuccaradio-btn,
.topbar .help-btn {
    height: 38px !important;
    min-height: 38px !important;
    padding: 8px 14px !important;
    line-height: 1 !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    box-sizing: border-box !important;
}

.topbar #themeSelect {
    height: 38px !important;
    min-height: 38px !important;
    padding: 0 20px !important;
    line-height: 38px !important;
    box-sizing: border-box !important;
	width: 150px !important;
    min-width: 150px !important;
}

.volume-container {
    height: 38px !important;
    display: flex !important;
    align-items: center !important;
}

/* Zoom resistance Î³Î¹Î± Topbar - Zuccaradio ÎºÎ±Î¹ ÏŒÎ»Î± Ï„Î± buttons */
.topbar {
    transform-origin: top left;
}

@media (min-resolution: 110dpi) and (max-resolution: 150dpi) {
    .topbar {
        transform: scale(0.9);
    }
}

@media (min-resolution: 151dpi) {
    .topbar {
        transform: scale(0.85);
    }
}

.category, .card {
  transition: transform 0.15s ease;
}

/* Î£Ï„Î±Î¸ÎµÏÎ¬ ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ ÏƒÏ„Î¿ footer */
footer .btnrow {
  display: flex !important;
  justify-content: center;
  gap: 15px;
  margin-bottom: 4px;
  position: relative;
  width: 100%;
  padding: 4px 0;
}

footer .btnrow button {
  padding: 12px 18px !important;
  border-radius: 12px !important;
  font-weight: 700 !important;
  font-size: 15px !important;
  height: 38px !important;
  min-height: 38px !important;
  min-width: 180px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  box-sizing: border-box !important;
  transition: all 0.2s ease !important;
}

#postitWidgetBtn {
  background: var(--accent);
  color: white;
  font-weight: 700;
  border: 1px solid var(--accent);
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(var(--accent-rgb), 0.3);
  transition: all 0.3s ease;
}

#postitWidgetBtn:hover {
  transform: translateY(-2px);
  filter: brightness(1.1);
  box-shadow: 0 6px 20px rgba(var(--accent-rgb), 0.4);
}

#postitWidgetBtn.active {
  background: linear-gradient(135deg, #00b894, #00a085) !important;
  box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3) !important;
}



/* =====================================================================
   ğŸ“ POST-IT WIDGET - Î’Î‘Î£Î™ÎšÎ•Î£ Î¡Î¥Î˜ÎœÎ™Î£Î•Î™Î£
   =====================================================================
   Î¤Î¿ Post-it widget ÎµÎ¯Î½Î±Î¹ Î­Î½Î± floating Ï€Î±ÏÎ¬Î¸Ï…ÏÎ¿ Ï€Î¿Ï… ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹
   ÏƒÏ„Î·Î½ Ï€Î¬Î½Ï‰ Î´ÎµÎ¾Î¹Î¬ Î³Ï‰Î½Î¯Î±. Î•Î´Ï Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± ÏÏ…Î¸Î¼Î¯ÏƒÎµÏ„Îµ:
   - Î˜Î­ÏƒÎ· ÎºÎ±Î¹ Î¼Î­Î³ÎµÎ¸Î¿Ï‚
   - Î§ÏÏÎ¼Î±Ï„Î± Ï†ÏŒÎ½Ï„Î¿Ï… ÎºÎ±Î¹ Ï€ÎµÏÎ¹Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚  
   - Î•Ï†Î­ ÏƒÎºÎ¹Î¬Ï‚
   --------------------------------------------------------------------- */
.postit-widget {
    position: fixed !important;
    top: 10px !important;
    right: 10px !important;
    transform: none !important;
    background: rgba(30, 30, 30, 0.3);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 14px;
    padding: 16px;
    z-index: 10001 !important;
    display: none;
    width: 320px !important;
    max-height: 85vh !important;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4), inset 0 1px 1px rgba(255, 255, 255, 0.05);
    color: var(--text);
    overflow-y: auto !important;
    transform-origin: top right;
}

/* --- Neon Ï†Ï‰Ï„ÎµÎ¹Î½Î® Î³ÏÎ±Î¼Î¼Î® Î³ÏÏÏ‰ Î±Ï€ÏŒ Ï„Î¿ Post-it --- */
.postit-widget::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 14px;
  padding: 2px;
  background: linear-gradient(
    130deg,
    rgba(244, 162, 97, 0.6),
    rgba(42, 157, 244, 0.6),
    rgba(244, 162, 97, 0.6)
  );
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0.35;
  transition: opacity 0.3s ease;
}

.postit-widget:hover::before {
  opacity: 0.8;
}

/* Zoom resistance Î³Î¹Î± Post-it Widget */
@media (min-resolution: 110dpi) and (max-resolution: 150dpi) {
    .postit-widget {
        transform: scale(0.9);
    }
}

@media (min-resolution: 151dpi) {
    .postit-widget {
        transform: scale(0.85);
    }
}

.postit-widget h3 {
    margin: 0 0 12px 0;
    text-align: center;
    color: var(--accent);
    font-size: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.postit-widget .close-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    background: none;
    border: none;
    font-size: 18px;
    cursor: pointer;
    color: var(--text);
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.postit-widget .close-btn:hover {
    background: var(--accent);
    color: white;
    transform: scale(1.1);
}

.postit-input-area {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 15px;
}

.postit-input-area textarea {
    width: 100%;
    padding: 12px;
    background: var(--bg);
    color: var(--text);
    border: 1px solid var(--accent);
    border-radius: 8px;
    resize: vertical;
    min-height: 50px;
    font-size: 14px;
    font-family: Arial, sans-serif;
    box-sizing: border-box;
    transition: border-color 0.2s ease;
}

.postit-input-area textarea:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.2);
}

.postit-input-area input[type="date"] {
    width: 100%;
    padding: 10px;
    background: var(--bg);
    color: var(--text);
    border: 1px solid var(--accent);
    border-radius: 8px;
    font-size: 14px;
    box-sizing: border-box;
    cursor: pointer;
    transition: border-color 0.2s ease;
}

.postit-input-area input[type="date"]:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.2);
}

.color-picker {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin: 10px 0;
}

.color-option {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    cursor: pointer;
    border: 3px solid transparent;
    transition: all 0.2s ease;
}

.color-option:hover {
    transform: scale(1.1);
    border-color: var(--accent);
}

.color-option.selected {
    border-color: var(--accent);
    box-shadow: 0 0 10px rgba(var(--accent-rgb), 0.5);
}

.postit-actions {
    display: flex;
    gap: 8px;
    margin-bottom: 15px;
}

.postit-actions button {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-add {
    background: var(--accent);
    color: white;
}

.btn-add:hover {
    background: var(--accent);
    filter: brightness(1.1);
    transform: translateY(-2px);
}

.btn-clear {
    background: var(--bg);
    color: var(--text);
    border: 1px solid var(--accent);
}

.btn-clear:hover {
    background: var(--accent);
    color: white;
}

.postit-list {
   max-height: calc(100vh - 200px); /* Î‘Ï†Î®Î½ÎµÎ¹ Ï‡ÏÏÎ¿ Î³Î¹Î± header ÎºÎ±Î¹ footer */
    overflow-y: auto; /* Î•Î¼Ï†Î±Î½Î¯Î¶ÎµÎ¹ scrollbar ÏŒÏ„Î±Î½ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ */
    flex-grow: 1; /* Î•Ï€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ ÏƒÏ„Î· Î»Î¯ÏƒÏ„Î± Î½Î± Î¼ÎµÎ³Î±Î»ÏÎ½ÎµÎ¹ */
}

.postit-item {
    background:  #0d0d0d
    border-radius: 10px;
    padding: 12px;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.2s ease;
    position: relative;
}

.postit-item:hover {
    background: rgba(70, 60, 90, 0.8);
    transform: translateX(3px);
}

.postit-item-color {
    width: 6px;
    height: 100%;
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    border-radius: 10px 0 0 10px;
}

.postit-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 5px;
    margin-left: 10px;
    min-width: 0; /* Î•Ï€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ ÏƒÏ„Î¿ flex item Î½Î± ÏƒÏ…ÏÏÎ¹ÎºÎ½Ï‰Î¸ÎµÎ¯ */
    overflow: hidden; /* ÎšÏÏÎ²ÎµÎ¹ Ï„Î¿ Ï€ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿ Ï€Î¿Ï… Î¾ÎµÏ€ÎµÏÎ½Î¬ */
}


.postit-date {
    display: flex;
    align-items: center;
    justify-content: space-between; /* ÎšÎ±Ï„Î±Î½Î­Î¼ÎµÎ¹ Ï„Î¿ Ï‡ÏÏÎ¿ */
    gap: 5px;
    font-size: 13px;
    color: #ff6b6b;
    font-weight: 600;
}

/* ===== ÎšÎ•Î™ÎœÎ•ÎÎŸ Î£Î—ÎœÎ•Î™Î©Î£Î•Î©Î POST-IT ===== */
.postit-text {
    font-size: 16px;
    font-weight: bold;
    color: #fff;
    word-wrap: break-word;
    word-break: break-word; /* Î•Ï€Î¹Ï€Î»Î­Î¿Î½ ÏƒÏ€Î¬ÏƒÎ¹Î¼Î¿ Î»Î­Î¾ÎµÏ‰Î½ */
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    overflow-wrap: break-word; /* Î£Ï€Î¬ÎµÎ¹ Î¼Î±ÎºÏÎ¹Î­Ï‚ Î»Î­Î¾ÎµÎ¹Ï‚ */
}

.postit-item-actions {
    display: flex;
    gap: 6px;
    flex-shrink: 0; /* Î”ÎµÎ½ ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ ÏƒÏ„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ Î½Î± ÏƒÏ…ÏÏÎ¹ÎºÎ½Ï‰Î¸Î¿ÏÎ½ */
}


 .postit-item-actions button {
    width: 24px; /* ÎœÎ¹ÎºÏÏŒÏ„ÎµÏÎ± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ */
    height: 24px; /* ÎœÎ¹ÎºÏÏŒÏ„ÎµÏÎ± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ */
    font-size: 12px; /* ÎœÎ¹ÎºÏÏŒÏ„ÎµÏÎ± ÎµÎ¹ÎºÎ¿Î½Î¯Î´Î¹Î± */
    border: none;
    border-radius: 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    transition: all 0.2s ease;
    padding: 0;
}

.btn-edit {
    background: rgba(255, 166, 0, 0.279);
}

.btn-edit:hover {
    background: rgba(255, 165, 0, 0.5);
    transform: scale(1.1);
}

.btn-copy {
    background: rgba(100, 149, 237, 0.3);
}

.btn-copy:hover {
    background: rgba(100, 149, 237, 0.5);
    transform: scale(1.1);
}

.btn-delete {
    background: rgba(220, 53, 69, 0.3);
}

.btn-delete:hover {
    background: rgba(220, 53, 69, 0.5);
    transform: scale(1.1);
}

.postit-list::-webkit-scrollbar {
    width: 8px;
}

.postit-list::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
}

.postit-list::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 10px;
}

.postit-list::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* === Degrande Ï†ÏŒÎ½Ï„Î¿ Ï€ÏÎ¿Ï‚ Ï„Î± ÎºÎ¬Ï„Ï‰ Î½ÎµÎ¿!!!!=== */
:root {
  --bg3: #3d3f6e; /* Ï€Î¹Î¿ Î±Î½Î¿Î¹Ï‡Ï„ÏŒ Ï†ÏŒÎ½Ï„Î¿ Î³Î¹Î± degrande */
}

body {
  background: linear-gradient(to bottom, var(--bg1) 0%, var(--bg2) 50%, #2c3e50 100%);
  background-size: 100% 100%;      /* Î‘Ï€Î¿Ï†Ï…Î³Î® ÎµÏ€Î±Î½Î¬Î»Î·ÏˆÎ·Ï‚ gradient */
  background-repeat: no-repeat;    /* Î‘Ï€Î¿Ï†Ï…Î³Î® tiling */
  background-attachment: fixed;    /* Î£Ï„Î±Î¸ÎµÏÏŒ ÎºÎ±Ï„Î¬ Ï„Î¿ scroll */
}

/* =====================================================================
   ğŸ’¡ TIP BANNER SYSTEM - Î¡Î¥Î˜ÎœÎ™Î£Î•Î™Î£
   =====================================================================
   Î£Ï„Ï…Î» Î³Î¹Î± Ï„Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ·Ï‚ Ï„Ï…Ï‡Î±Î¯Ï‰Î½ ÏƒÏ…Î¼Î²Î¿Ï…Î»ÏÎ½
   --------------------------------------------------------------------- */

/* ğŸ“¦ CONTAINER - Î¤Î¿ ÎºÎ¿Ï…Ï„Î¯ Ï€Î¿Ï… Ï€ÎµÏÎ¹Î­Ï‡ÎµÎ¹ Ï„Î¿ tip banner
   ----------------------------------------------------------------- */
.tip-banner-container {
  width: 100%;
  max-width: 1200px;           /* ÎœÎ­Î³Î¹ÏƒÏ„Î¿ Ï€Î»Î¬Ï„Î¿Ï‚ container */
  
  /* ğŸ”§ ÎšÎ•ÎÎŸ Î‘Î ÎŸ Î¤Î‘ ÎšÎŸÎ¥ÎœÎ Î™Î‘ - Î‘Î›Î›Î‘ÎÎ¤Î• Î•Î”Î©! */
  margin: -35px auto 15px auto;  /* 5px Ï€Î¬Î½Ï‰ (Î±Ï€ÏŒ ÎºÎ¿Ï…Î¼Ï€Î¹Î¬), 15px ÎºÎ¬Ï„Ï‰ (Î¼Î­Ï‡ÏÎ¹ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚) */
                               /* Î‘Î»Î»Î¬Î¾Ï„Îµ Ï„Î¿ 5px Î³Î¹Î± Î½Î± Î±Î»Î»Î¬Î¾ÎµÏ„Îµ Ï„Î¿ ÎºÎµÎ½ÏŒ Î±Ï€ÏŒ Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ */
  
  padding: 0 40px;             /* Î‘Ï€Î¿ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚ Î±Ï€ÏŒ Î¬ÎºÏÎ± ÏƒÎµÎ»Î¯Î´Î±Ï‚ (Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬/Î´ÎµÎ¾Î¹Î¬) */
  position: relative;
  
  /* ğŸ“ Î¥Î¨ÎŸÎ£ Î§Î©Î¡ÎŸÎ¥ - Î‘Î»Î»Î¬Î¾Ï„Îµ Î±Î½ Î¸Î­Î»ÎµÏ„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ¿/Î»Î¹Î³ÏŒÏ„ÎµÏÎ¿ ÏÏˆÎ¿Ï‚ */
  height: 50px;                /* ÎÏˆÎ¿Ï‚ Ï„Î¿Ï… Ï‡ÏÏÎ¿Ï… Î³Î¹Î± Ï„Î¿ banner */
  
  overflow: visible;           /* Î•Ï€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î¿ banner Î½Î± Ï†Î±Î¯Î½ÎµÏ„Î±Î¹ Î­Î¾Ï‰ Î±Ï€ÏŒ Ï„Î¿ container */
}

/* ğŸ¯ TIP BANNER - Î¤Î¿ Î¼Î®Î½Ï…Î¼Î± Ï€Î¿Ï… ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹
   ----------------------------------------------------------------- */
.tip-banner {
  /* ğŸ¨ Î§Î¡Î©ÎœÎ‘Î¤Î‘ */
  background: rgba(0, 168, 107, 0.15);  /* Î ÏÎ¬ÏƒÎ¹Î½Î¿ Î´Î¹Î±Ï†Î±Î½Î­Ï‚ Ï†ÏŒÎ½Ï„Î¿ */
  border: 1px solid rgba(0, 168, 107, 0.4);  /* Î ÏÎ¬ÏƒÎ¹Î½Î¿ Ï€ÎµÏÎ¯Î³ÏÎ±Î¼Î¼Î± */
  color: #00ff88;                        /* Î ÏÎ¬ÏƒÎ¹Î½Î¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ */
  
  /* ğŸ“ ÎšÎ•Î™ÎœÎ•ÎÎŸ */
  font-size: 20px;             /* ÎœÎ­Î³ÎµÎ¸Î¿Ï‚ Î³ÏÎ±Î¼Î¼Î±Ï„Î¿ÏƒÎµÎ¹ÏÎ¬Ï‚ - Î±Î»Î»Î¬Î¾Ï„Îµ Î³Î¹Î± Î¼ÎµÎ³Î±Î»ÏÏ„ÎµÏÎ¿/Î¼Î¹ÎºÏÏŒÏ„ÎµÏÎ¿ */
  font-weight: 600;            /* Î Î¬Ï‡Î¿Ï‚ Î³ÏÎ±Î¼Î¼Î±Ï„Î¿ÏƒÎµÎ¹ÏÎ¬Ï‚ (400=ÎºÎ±Î½Î¿Î½Î¹ÎºÏŒ, 700=bold) */
  white-space: nowrap;         /* Î¤Î¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ Î´ÎµÎ½ ÏƒÏ€Î¬ÎµÎ¹ ÏƒÎµ Î³ÏÎ±Î¼Î¼Î­Ï‚ */
  
  /* ğŸ“ Î”Î™Î‘Î£Î¤Î‘Î£Î•Î™Î£ */
  padding: 12px 20px;          /* Î•ÏƒÏ‰Ï„ÎµÏÎ¹ÎºÎ¬ ÎºÎµÎ½Î¬ (Ï€Î¬Î½Ï‰/ÎºÎ¬Ï„Ï‰ Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬/Î´ÎµÎ¾Î¹Î¬) */
  border-radius: 12px;         /* Î£Ï„ÏÎ¿Î³Î³Ï…Î»Î¬ Î¬ÎºÏÎ± */
  
  /* ğŸ­ Î•Î¦Î¦Î• */
  backdrop-filter: blur(10px); /* Î˜ÏŒÎ»Ï‰Î¼Î± Ï†ÏŒÎ½Ï„Î¿Ï… Ï€Î¯ÏƒÏ‰ Î±Ï€ÏŒ Ï„Î¿ banner */
  box-shadow: 0 4px 15px rgba(0, 168, 107, 0.3);  /* Î£ÎºÎ¹Î¬ */
  
  /* ğŸ“ Î¤ÎŸÎ ÎŸÎ˜Î•Î¤Î—Î£Î— */
  position: absolute;
  top: 0;                      /* ÎšÎ¿Î»Î»Î¬ÎµÎ¹ ÏƒÏ„Î·Î½ ÎºÎ¿ÏÏ…Ï†Î® Ï„Î¿Ï… container */
  right: 100%;                 /* ÎÎµÎºÎ¹Î½Î¬ÎµÎ¹ Î±Ï€ÏŒ Î­Î¾Ï‰ Î´ÎµÎ¾Î¹Î¬ (ÎºÏÏ…Î¼Î¼Î­Î½Î¿) */
  z-index: 1000;               /* Î£Ï„ÏÏÎ¼Î± ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ·Ï‚ (Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ Î¬Î»Î»Î± ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î±) */
  
  /* ğŸ¬ ANIMATION - ÎšÎ¯Î½Î·ÏƒÎ· Î±Ï€ÏŒ Î´ÎµÎ¾Î¹Î¬ Ï€ÏÎ¿Ï‚ Ï„Î· Î¼Î­ÏƒÎ· */
  animation: slideFromRight 1s ease-out forwards;
  /* 1s = Î´Î¹Î¬ÏÎºÎµÎ¹Î±, ease-out = ÎµÏ€Î¹Î²ÏÎ¬Î´Ï…Î½ÏƒÎ· ÏƒÏ„Î¿ Ï„Î­Î»Î¿Ï‚, forwards = Î¼Î­Î½ÎµÎ¹ ÏƒÏ„Î¿ Ï„Î­Î»Î¿Ï‚ */
}

/* ğŸ”´ Î Î¡Î‘Î£Î™ÎÎŸ DOT - Î¤Î¿ ÎºÎ¿Ï…ÎºÎºÎ¯Î´Î± ÏƒÏ„Î± Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬
   ----------------------------------------------------------------- */
.tip-banner::before {
  content: 'â—';                /* Î¤Î¿ ÏƒÏÎ¼Î²Î¿Î»Î¿ (Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï„Î¿ Î±Î»Î»Î¬Î¾ÎµÏ„Îµ) */
  color: #00a86b;              /* Î§ÏÏÎ¼Î± dot */
  font-size: 16px;             /* ÎœÎ­Î³ÎµÎ¸Î¿Ï‚ dot */
  margin-right: 10px;          /* Î‘Ï€ÏŒÏƒÏ„Î±ÏƒÎ· Î±Ï€ÏŒ Ï„Î¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ */
  font-weight: bold;
  display: inline-block;
  animation: pulse 2s ease-in-out infinite;  /* Î Î±Î»Î¼ÏŒÏ‚ ÎºÎ¬Î¸Îµ 2 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î± */
}

/* ğŸ–±ï¸ HOVER EFFECT - ÎŒÏ„Î±Î½ Ï€ÎµÏÎ½Î¬ÎµÎ¹ Ï„Î¿ Ï€Î¿Î½Ï„Î¯ÎºÎ¹ Î±Ï€ÏŒ Ï€Î¬Î½Ï‰
   ----------------------------------------------------------------- */
.tip-banner:hover {
  background: rgba(0, 168, 107, 0.25);       /* Î Î¹Î¿ Î­Î½Ï„Î¿Î½Î¿ Ï†ÏŒÎ½Ï„Î¿ */
  border-color: rgba(0, 168, 107, 0.6);      /* Î Î¹Î¿ Î­Î½Ï„Î¿Î½Î¿ Ï€ÎµÏÎ¯Î³ÏÎ±Î¼Î¼Î± */
  box-shadow: 0 6px 20px rgba(0, 168, 107, 0.5);  /* ÎœÎµÎ³Î±Î»ÏÏ„ÎµÏÎ· ÏƒÎºÎ¹Î¬ */
  animation: none;                            /* Î£Ï„Î±Î¼Î±Ï„Î¬ÎµÎ¹ Ï„Î¿ slide animation */
}

/* ğŸª Î§ÎŸÎ¡ÎŸÎ Î—Î”Î—ÎœÎ‘ ÎšÎ•Î™ÎœÎ•ÎÎŸÎ¥ - Bounce effect ÏƒÏ„Î¿ hover
   ----------------------------------------------------------------- */
.tip-banner:hover::after {
  content: attr(data-text);    /* Î Î±Î¯ÏÎ½ÎµÎ¹ Ï„Î¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ Î±Ï€ÏŒ Ï„Î¿ data-text attribute */
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  padding: 12px 20px;
  animation: bounce 0.6s ease-in-out infinite;  /* Î§Î¿ÏÎ¿Ï€Î·Î´Î¬ÎµÎ¹ ÎºÎ¬Î¸Îµ 0.6 Î´ÎµÏ…Ï„. */
}

/* ğŸ‘» ÎšÏÏÎ²Î¿Ï…Î¼Îµ Ï„Î¿ Î±ÏÏ‡Î¹ÎºÏŒ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ ÏŒÏ„Î±Î½ Ï‡Î¿ÏÎ¿Ï€Î·Î´Î¬ÎµÎ¹
   ----------------------------------------------------------------- */
.tip-banner:hover {
  color: transparent;          /* ÎšÏÏÎ²Î¿Ï…Î¼Îµ Ï„Î¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ */
}
.tip-banner:hover::before {
  color: transparent;          /* ÎšÏÏÎ²Î¿Ï…Î¼Îµ Ï„Î¿ dot */
}
.tip-banner:hover::after {
  color: #00ff88;              /* Î•Î¼Ï†Î±Î½Î¯Î¶Î¿Ï…Î¼Îµ Ï„Î¿ Î½Î­Î¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ Ï€Î¿Ï… Ï‡Î¿ÏÎ¿Ï€Î·Î´Î¬ÎµÎ¹ */
}

/* ğŸ¬ ANIMATIONS - ÎšÎ¹Î½Î®ÏƒÎµÎ¹Ï‚ ÎºÎ±Î¹ ÎµÏ†Î­
   ====================================================================== */

/* 1ï¸âƒ£ SLIDE FROM RIGHT - ÎšÎ¯Î½Î·ÏƒÎ· Î±Ï€ÏŒ Î´ÎµÎ¾Î¹Î¬ Ï€ÏÎ¿Ï‚ Ï„Î· Î¼Î­ÏƒÎ·
   ----------------------------------------------------------------- */
@keyframes slideFromRight {
  0% {
    right: 100%;               /* Î‘ÏÏ‡Î¯Î¶ÎµÎ¹ ÎµÎ½Ï„ÎµÎ»ÏÏ‚ Î­Î¾Ï‰ Î±Ï€ÏŒ Ï„Î· ÏƒÎµÎ»Î¯Î´Î± (Î´ÎµÎ¾Î¹Î¬) */
    opacity: 0;                /* Î‘ÏŒÏÎ±Ï„Î¿ ÏƒÏ„Î·Î½ Î±ÏÏ‡Î® */
  }
  100% {
    right: 50%;                /* ÎšÎ±Ï„Î±Î»Î®Î³ÎµÎ¹ ÏƒÏ„Î¿ ÎºÎ­Î½Ï„ÏÎ¿ (50% Î±Ï€ÏŒ Î´ÎµÎ¾Î¹Î¬) */
    transform: translateX(50%); /* ÎœÎµÏ„Î±ÎºÎ¯Î½Î·ÏƒÎ· Î³Î¹Î± Î½Î± ÎºÎµÎ½Ï„ÏÎ±ÏÎ¹ÏƒÏ„ÎµÎ¯ Ï„Î­Î»ÎµÎ¹Î± */
    opacity: 1;                /* Î Î»Î®ÏÏ‰Ï‚ Î¿ÏÎ±Ï„ÏŒ ÏƒÏ„Î¿ Ï„Î­Î»Î¿Ï‚ */
  }
  /* ğŸ’¡ Î£Î¥ÎœÎ’ÎŸÎ¥Î›Î—: Î‘Î»Î»Î¬Î¾Ï„Îµ Ï„Î¿ right: 50% ÏƒÎµ 40% Î® 60% Î³Î¹Î± Î½Î± Ï„Î¿ Î¼ÎµÏ„Î±ÎºÎ¹Î½Î®ÏƒÎµÏ„Îµ */
}

/* 2ï¸âƒ£ BOUNCE - Î§Î¿ÏÎ¿Ï€Î®Î´Î·Î¼Î± ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… (hover effect)
   ----------------------------------------------------------------- */
@keyframes bounce {
  0%, 100% {
    transform: translateY(0);   /* ÎšÎ±Î½Î¿Î½Î¹ÎºÎ® Î¸Î­ÏƒÎ· */
  }
  25% {
    transform: translateY(-5px); /* Î‘Î½ÎµÎ²Î±Î¯Î½ÎµÎ¹ 5px */
  }
  50% {
    transform: translateY(0);   /* Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î® ÏƒÏ„Î· Î¸Î­ÏƒÎ· */
  }
  75% {
    transform: translateY(-3px); /* ÎœÎ¹ÎºÏÏŒ Î±Î½Î­Î²Î±ÏƒÎ¼Î± */
  }
  /* ğŸ’¡ Î£Î¥ÎœÎ’ÎŸÎ¥Î›Î—: Î‘Î»Î»Î¬Î¾Ï„Îµ Ï„Î± -5px/-3px Î³Î¹Î± Ï€Î¹Î¿ Î­Î½Ï„Î¿Î½Î¿ Î® Î®Ï€Î¹Î¿ Ï‡Î¿ÏÎ¿Ï€Î®Î´Î·Î¼Î± */
}

/* 3ï¸âƒ£ PULSE - Î Î±Î»Î¼ÏŒÏ‚ Î³Î¹Î± Ï„Î¿ Ï€ÏÎ¬ÏƒÎ¹Î½Î¿ dot
   ----------------------------------------------------------------- */
@keyframes pulse {
  0%, 100% {
    opacity: 1;                 /* Î Î»Î®ÏÎ·Ï‚ Ï†Ï‰Ï„ÎµÎ¹Î½ÏŒÏ„Î·Ï„Î± */
    transform: scale(1);        /* ÎšÎ±Î½Î¿Î½Î¹ÎºÏŒ Î¼Î­Î³ÎµÎ¸Î¿Ï‚ */
  }
  50% {
    opacity: 0.6;               /* ÎœÎµÎ¹Ï‰Î¼Î­Î½Î· Ï†Ï‰Ï„ÎµÎ¹Î½ÏŒÏ„Î·Ï„Î± */
    transform: scale(1.2);      /* ÎœÎµÎ³Î±Î»ÏÎ½ÎµÎ¹ ÎºÎ±Ï„Î¬ 20% */
  }
  /* ğŸ’¡ Î£Î¥ÎœÎ’ÎŸÎ¥Î›Î—: Î‘Î»Î»Î¬Î¾Ï„Îµ Ï„Î¿ scale(1.2) Î³Î¹Î± Î¼ÎµÎ³Î±Î»ÏÏ„ÎµÏÎ¿/Î¼Î¹ÎºÏÏŒÏ„ÎµÏÎ¿ Ï€Î±Î»Î¼ÏŒ */
}

/* Responsive Î³Î¹Î± tip banner */
@media (max-width: 768px) {
  .tip-banner {
    margin: 10px 10px;
    padding: 10px 15px;
    font-size: 16px;
  }
}



.video-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1 !important;
}

.video-background video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: brightness(0.7) contrast(1.4); /* Î¡Ï…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ Ï†Ï‰Ï„ÎµÎ¹Î½ÏŒÏ„Î·Ï„Î±Ï‚ */
  opacity: 0.7;
}

/* Î ÏÎ¿ÏƒÎ¸Î­ÏƒÏ„Îµ blur effect */
.video-background.blurred video {
  filter: blur(2px) brightness(0.8);
}

/* Î’ÎµÎ»Ï„Î¯Ï‰ÏƒÎ· Î±Ï€ÏŒÎ´Î¿ÏƒÎ·Ï‚ */
.video-background video {
  transform: translateZ(0); /* Hardware acceleration */
  will-change: opacity;
}

/* Hide ÏƒÏ„Î¿ mobile Î³Î¹Î± ÎºÎ±Î»ÏÏ„ÎµÏÎ· Î±Ï€ÏŒÎ´Î¿ÏƒÎ· */
@media (max-width: 768px) {
  .video-background {
    display: none;
  }
  body {
    background: linear-gradient(160deg,var(--bg1),var(--bg2));
  }
}

/* CSS Î³Î¹Î± video toggle ÎºÎ¿Ï…Î¼Ï€Î¯ */
#videoToggle {
  background: #e74c3c !important; /* ÎšÏŒÎºÎºÎ¹Î½Î¿ ÏŒÏ„Î±Î½ OFF */
  color: white !important;
  transition: all 0.3s ease;
  border: none;
  padding: 8px 14px;
  border-radius: 10px;
  font-weight: 700;
  cursor: pointer;
}

#videoToggle.video-on {
  background: #27ae60 !important; /* Î ÏÎ¬ÏƒÎ¹Î½Î¿ ÏŒÏ„Î±Î½ ON */
}

#videoToggle:hover {
  opacity: 0.8;
  transform: scale(1.05);
}

/* ÎšÎ»Î¬ÏƒÎ· Î³Î¹Î± Î±Ï€ÏŒÎºÏÏ…ÏˆÎ· video */
.video-background.hidden {
  display: none !important;
}

/* Responsive topbar */
.topbar {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: space-between;
}

.topbar-center {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;  /* Î‘Ï€ÏŒÏƒÏ„Î±ÏƒÎ· Î±Î½Î¬Î¼ÎµÏƒÎ± ÏƒÏ„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ */
  justify-content: center;
  flex: 1;
  min-width: 0;
}


/* Î£Îµ Î¼Î¹ÎºÏÎ­Ï‚ Î¿Î¸ÏŒÎ½ÎµÏ‚, ÏƒÏ„Î¿Î¯Î²Î±Î¾Îµ Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ */
@media (max-width: 1200px) {
  .topbar-center button {
    padding: 6px 8px;
    font-size: 14px;
  }
}
.wrap {
  position: relative !important;
  z-index: 100 !important;
  background: rgba(0, 0, 0, 0.1) !important;
}


/* ğŸ¬ğŸ”Š ÎŸÎ¼Î¿Î¹ÏŒÎ¼Î¿ÏÏ†Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ Video & Audio ÏƒÏ„Î¿ topbar */
#videoToggle, #audioButton {
    background: #e74c3c !important;
    color: white !important;
    transition: all 0.3s ease;
    border: none;
    padding: 6px 12px !important;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    font-size: 13px !important;
    min-width: 85px;
    text-align: center;
    white-space: nowrap; /* ÎÎ± Î¼Î·Î½ ÏƒÏ€Î¬ÎµÎ¹ Ï„Î¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ */
    flex-shrink: 0; /* ÎÎ± Î¼Î·Î½ ÏƒÏ…ÏÏÎ¹ÎºÎ½ÏÎ½Î¿Î½Ï„Î±Î¹ */
    margin: 4px; /* Î‘Ï†Î±Î¯ÏÎµÏƒÎ· ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ margins */
}

#videoToggle.video-on, #audioButton.audio-on {
    background: #27ae60 !important;
}

#videoToggle:hover, #audioButton:hover {
    opacity: 0.8;
    transform: scale(1.05);
}

#audioButton.audio-on {
  background: #27ae60 !important; /* Î ÏÎ¬ÏƒÎ¹Î½Î¿ ÏŒÏ„Î±Î½ ON */
}

#audioButton.audio-off {
  background: #e74c3c !important; /* ÎšÏŒÎºÎºÎ¹Î½Î¿ ÏŒÏ„Î±Î½ OFF */
}

#videoToggle:hover, #audioButton:hover {
  opacity: 0.8;
  transform: scale(1.05);
}





/* === AUTO-NAVIGATION VISUAL EFFECTS === */

/* ÎšÏÏÎ¹Î± ÎºÎ¬ÏÏ„Î± - Î±ÏƒÏ†Î±Î»Î­Ï‚ positioning */
.card.autonav-highlight {
  position: relative;
}

/* ğŸŸ¦ ÎœÏ€Î»Îµ Î³ÏÎ±Î¼Î¼Î® Î³ÏÏÏ‰ Î³ÏÏÏ‰ - border effect */
.card.autonav-highlight::before {
  content: '';
  position: absolute;
  top: -3px;
  left: -3px;
  right: -3px;
  bottom: -3px;
  border: 3px solid #4a90e2;
  border-radius: 10px;
  animation: autonavBlueGlow 1s ease-in-out infinite;
  pointer-events: none;
  z-index: 1;
}

/* ğŸŸ¡ Î§ÏÏ…ÏƒÎ® Î³ÏÎ±Î¼Î¼Î® ÏƒÏ„Î¿ ÎºÎ¬Ï„Ï‰ Î¼Î­ÏÎ¿Ï‚ */

.card.autonav-highlight::after {
  content: '';
  position: absolute;
  bottom: -6px;
  left: 10%;
  right: 10%;
  height: 4px;
  background: linear-gradient(90deg, 
    transparent, 
    #ffd700, 
    #ffa500, 
    #ffd700, 
    transparent
  );
  border-radius: 2px;
  animation: autonavGlow 2s ease-in-out infinite;
  pointer-events: none;
  z-index: 2;
}

/* ğŸ”µ Animation Î³Î¹Î± Ï„Î· Î¼Ï€Î»Îµ Î³ÏÎ±Î¼Î¼Î® */
@keyframes autonavBlueGlow {
  0%, 100% { 
    opacity: 0.7; 
    box-shadow: 0 0 12px rgba(74, 144, 226, 0.6);
    transform: scale(1);
  }
  50% { 
    opacity: 1; 
    box-shadow: 0 0 25px rgba(74, 144, 226, 0.9), 0 0 35px rgba(74, 144, 226, 0.5);
    transform: scale(1.02);
  }
}

/* ğŸ”¶ Animation Î³Î¹Î± Ï„Î· Ï‡ÏÏ…ÏƒÎ® Î³ÏÎ±Î¼Î¼Î® */
@keyframes autonavGlow {
  0%, 100% { 
    opacity: 1; 
    box-shadow: 0 0 10px #ffd700; 
    transform: scaleX(1);
  }
  50% { 
    opacity: 0.8; 
    box-shadow: 0 0 20px #ffa500; 
    transform: scaleX(1.1);
  }
}



/* =====================================================================
   â˜€ï¸ 15. WIDGET ÎšÎ‘Î™Î¡ÎŸÎ¥ (Weather Widget)
   ===================================================================== */

/* Î˜Î­ÏƒÎ· Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬ Î±Ï€Î¿ Ï„Î·Î½ ÎµÏ€Ï‰Î½Ï…Î¼Î¯Î± ÎºÎ±Î¹ ÏƒÏ„Ï…Î» Glass-morphism */

.weather-widget {
  position: relative;
  background: rgba(30, 30, 30, 0.25);
  border: 1px solid rgba(255, 255, 255, 0.22);
  border-radius: 14px;
  backdrop-filter: blur(15px) saturate(180%);
  -webkit-backdrop-filter: blur(15px) saturate(180%);
  box-shadow:
    0 6px 20px rgba(0, 0, 0, 0.4),
    inset 0 1px 1px rgba(255, 255, 255, 0.05);
  padding: 12px 18px;
  min-width: 150px;
  text-align: center;
  flex-shrink: 0;
  margin-right: 30px;
  transition: all 0.25s ease-in-out;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
}

/* Neon effect (Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Ï€Î¿ÏÏ„Î¿ÎºÎ±Î»Î¯/ÎºÎ¯Ï„ÏÎ¹Î½Î¿ Ï„ÏŒÎ½Î¿) */
.weather-widget::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 14px;
  padding: 2px;
  background: linear-gradient(
    130deg,
    rgba(255, 165, 0, 0.6), /* Î§ÏÏÎ¼Î± Ï€Î¿Ï… Ï„Î±Î¹ÏÎ¹Î¬Î¶ÎµÎ¹ Î¼Îµ Ï„Î¿Î½ ÎºÎ±Î¹ÏÏŒ (Î®Î»Î¹Î¿Ï‚/accent) */
    rgba(255, 255, 0, 0.6),
    rgba(255, 165, 0, 0.6)
  );
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0.35;
  transition: opacity 0.3s ease;
}

.weather-widget:hover::before {
  opacity: 0.8;
}

.weather-widget:hover {
  transform: translateY(-2px);
  box-shadow:
    0 8px 18px rgba(0, 0, 0, 0.55),
    inset 0 1px 2px rgba(255, 255, 255, 0.1);
}

.weather-widget .location {
    font-size: 16px;
    font-weight: 700;
    color: var(--accent); /* Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Ï„Î¿ accent color */
    margin-bottom: 5px;
}

.weather-widget .temp-icon {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 5px;
}

.weather-widget .temperature {
    font-size: 24px;
    font-weight: 800;
    color: var(--text);
    text-shadow: 0 0 8px rgba(244, 162, 97, 0.4);
}

.weather-widget .weather-icon {
    width: 30px;
    height: 30px;
}

.weather-widget .condition {
    font-size: 14px;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.7);
}

/* Responsive adjustment: Î£Ï„Î¹Ï‚ Î¼Î¹ÎºÏÎ­Ï‚ Î¿Î¸ÏŒÎ½ÎµÏ‚ Ï„Î¿Ï€Î¿Î¸ÎµÏ„ÎµÎ¯Ï„Î±Î¹ Ï€ÏÏÏ„Î¿ ÏƒÏ„Î· ÏƒÏ„Î®Î»Î· */
@media (max-width: 768px) {
  .weather-widget {
    margin: 0 auto 10px auto;
    order: -2;
  }
  
  /* Î ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÎ½Î·Î¼ÎµÏÏÏƒÎµÏ„Îµ ÎºÎ±Î¹ Ï„Î¿ header/logo-title Î³Î¹Î± Î½Î± Ï…Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¶ÎµÎ¹ ÎºÎ±Î¹ Ï„Î± Î´ÏÎ¿ widgets */
  header {
    /* Î•Î¬Î½ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹, Î±Ï†Î±Î¹ÏÎ­ÏƒÏ„Îµ Ï„Î¿ flex-shrink: 0; Î±Ï€ÏŒ Ï„Î¿ datetime-widget Î³Î¹Î± Î½Î± Ï‡Ï‰ÏÎ­ÏƒÎµÎ¹ */
  }
}


 </style>
	
 <!-- Video background -->
<div class="video-background" style="z-index: -9999 !important; pointer-events: none !important;">
 <video autoplay muted loop playsinline>
  
    <source src="assets/render.mp4" type="video/mp4">
  </video>
  <div class="video-overlay"></div>
</div>	
	


 <!-- Audio element - ÎºÏÏ…Ï†ÏŒ -->
  <audio id="welcomeSound" preload="auto" style="display: none;">
    <source src="assets/hello.mp3" type="audio/mpeg">
    <source src="assets/hello.wav" type="audio/wav">
  </audio>

<!-- Bubbles  -->
<div class="bubbles">
  <span></span><span></span><span></span><span></span><span></span>
</div>


<div class="wrap" style="padding-bottom: 10px;">

<header>





  <div class="logo-title">
    <img src="assets/logo.png" alt="Logo">
    <div class="titles">
      <h1 class="typewriter">Î¤Î± Î´Î¹ÎºÎ¬ Î¼Î¿Ï… Ï‡ÏÎ®ÏƒÎ¹Î¼Î±</h1>
      <h2>Î£Ï…ÏƒÏ„ÎµÎ³Î±ÏƒÎ¼Î­Î½Î± Î¦Î±ÏÎ¼Î±ÎºÎµÎ¯Î± ÎÎµÎ¿Îº. & ÎÎ¹Îº. ÎœÎµÎ½ÎµÎ¾Î¹Î¬Î´Î·Ï‚ & Î£Î™Î‘ ÎŸ.Î•.</h2>
      <h3>Î§ÏÎ®ÏƒÎ¹Î¼Î± ÎµÏÎ³Î±Î»ÎµÎ¯Î± ÎºÎ±Î¹ ÏƒÏÎ½Î´ÎµÏƒÎ¼Î¿Î¹</h3>
    </div>
  </div>
  
<!-- Î¡Î¿Î»ÏŒÎ¹ - Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± (Î•ÎÎ© Î±Ï€ÏŒ Ï„Î¿ logo-title) -->
<div class="datetime-widget" id="titleWidget" data-tooltip="Î¤Î¹ ÏÏÎ± ÎµÎ¯Î½Î±Î¹ Î¾Î­ÏÎµÎ¹Ï‚??">
    <div class="time" id="currentTime">00:00:00</div>
    <div class="date" id="currentDate">Î Î±ÏÎ±ÏƒÎºÎµÏ…Î®, 1 Î™Î±Î½Î¿Ï…Î±ÏÎ¯Î¿Ï…</div>
</div>




</header>

<div class="topbar">
  <!-- Î‘ÏÎ¹ÏƒÏ„ÎµÏÎ¬ -->
  <div class="topbar-left">
  </div>
  
  <!-- ÎšÎµÎ½Ï„ÏÎ¹ÎºÎ¬ ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ -->
  <div class="topbar-center">
    <button id="addBtnTop">+ Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î½Î­Î¿Ï… link</button>
    <button id="undoBtnTop" class="gray" disabled>â†© Î‘Î½Î±Î¯ÏÎµÏƒÎ·</button>
    <button id="backupBtn">Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·</button>
    <button id="restoreBtn">Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬</button>
    <button id="zuccaradioBtn" class="zuccaradio-btn" data-tooltip="Î‘ÎºÎ¿ÏÏƒÏ„Îµ Zuccaradio">ğŸµ Zuccaradio</button>
    <button class="nav-btn help-btn default" id="helpBtn" data-tooltip="Î”Î¹Î¬Î²Î±ÏƒÎ­ Î¼Îµ">ğŸ’¡ Î’Î¿Î®Î¸ÎµÎ¹Î±</button>
	

  
  <!-- Î”ÎµÎ¾Î¹Î¬ - Theme Selector -->
  <div class="topbar-right">
   <button id="videoToggle" onclick="toggleVideo()">ğŸ“¹ Video</button>
   <button id="audioButton" onclick="toggleVideoAudio()">ğŸ”‡ Audio</button>
    <select id="themeSelect">
      <option value="dark">Dark     ğŸŒ™</option>      
      <option value="green">Green   ğŸŒµ</option>
      <option value="brown">Brown   â˜•</option>
      <option value="purple">Purple ğŸª€</option>
	  <option value="blue">Blue     ğŸŒŠ</option>
      <option value="orange">Orange ğŸŠ</option>
	  <option value="light">Light   â˜€ï¸</option>
      <option value="pink">Pink     ğŸŒ¸</option>
    </select>
  </div>
</div>
  
</div>

<!-- TIP BANNER - Î¤Î¿Ï€Î¿Î¸ÎµÏ„ÎµÎ¯Ï„Î±Î¹ Î±ÎºÏÎ¹Î²ÏÏ‚ ÎµÎ´Ï, Î¼ÎµÏ„Î±Î¾Ï topbar ÎºÎ±Î¹ categories -->
<div class="tip-banner-container">
  <div id="tip-banner" class="tip-banner" style="display: none;"></div>
</div>

<div id="categories"></div>
</div>

<footer>
  <div class="btnrow">
    <button id="addBtnFoot">+ Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î½Î­Î¿Ï… link</button>
    <button id="postitWidgetBtn">ğŸ“ Post-it</button>
  </div>
  <div class="note">Î¦Ï„Î¹Î±Î³Î¼Î­Î½Î¿ Î¼Îµ Î±Î³Î¬Ï€Î· Î±Ï€ÏŒ Ï„Î¿ Doukas Pharmacy SupportÂ®</div>
</footer>

<!-- ===== MODAL ÎÎ•ÎŸÎ¥ LINK ===== -->
<div class="modal" id="modalForm">
  <div class="box">
    <h3 id="modalTitle">ÎÎ­Î¿ link</h3>
    <form id="linkForm" autocomplete="off">
      <!-- URL -->
      <div class="row">
        <input autocomplete="off" type="text" id="url" placeholder="Î”Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ· (URL)" required>
      </div>

      <!-- ÎŒÎ½Î¿Î¼Î± -->
      <div class="row">
        <input autocomplete="off" type="text" id="name" placeholder="ÎŒÎ½Î¿Î¼Î± (max 13)">
      </div>

      <!-- Î ÎµÏÎ¹Î³ÏÎ±Ï†Î® -->
      <div class="row">
        <input autocomplete="off" type="text" id="desc" placeholder="Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®">
      </div>

      <!-- Icon ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚ -->
      <div class="row">
        <label style="font-size:13px;">Î•Î¹ÎºÎ¿Î½Î¯Î´Î¹Î¿</label>
        <div class="icon-row">
          <select id="iconMode">
            <option value="auto">Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î¿ favicon</option>
            <option value="builtin">Î•Î½ÏƒÏ‰Î¼Î±Ï„Ï‰Î¼Î­Î½Î¿ ÎµÎ¹ÎºÎ¿Î½Î¯Î´Î¹Î¿</option>
            <option value="upload">Î‘Î½Î­Î²Î±ÏƒÎ¼Î± ÎµÎ¹ÎºÏŒÎ½Î±Ï‚...</option>
            <option value="url">Î‘Ï€ÏŒ URL...</option>
          </select>

          <!-- Builtin -->
          <select id="builtinIcon" style="display:none">
            <option value="star">â˜… Î‘ÏƒÏ„Î­ÏÎ¹</option>
            <option value="heart">â¤ ÎšÎ±ÏÎ´Î¹Î¬</option>
            <option value="pill">ğŸ’Š Î§Î¬Ï€Î¹</option>
            <option value="firstaid">ğŸ©¹ Î ÏÏÏ„ÎµÏ‚ Î²Î¿Î®Î¸ÎµÎ¹ÎµÏ‚</option>
            <option value="link">ğŸ”— Link</option>
            <option value="doc">ğŸ“„ ÎˆÎ³Î³ÏÎ±Ï†Î¿</option>
          </select>

          <!-- Upload -->
          <input id="iconFile" type="file"
                 accept="image/*,.ico,.png,.jpg,.jpeg,.webp,.svg"
                 style="display:none">

          <!-- URL -->
          <input id="iconUrl" type="url"
                 placeholder="https://example.com/icon.png"
                 style="display:none; flex:1;">
        </div>

        <!-- Î ÏÎ¿ÎµÏ€Î¹ÏƒÎºÏŒÏ€Î·ÏƒÎ· -->
        <div class="icon-preview" id="iconPreview" style="display:none">
          <span>Î ÏÎ¿ÎµÏ€Î¹ÏƒÎºÏŒÏ€Î·ÏƒÎ·:</span>
          <img id="iconPreviewImg" alt="icon">
        </div>
      </div>

      <!-- Î•Ï€Î¹Î»Î¿Î³Î® / Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±Ï‚ -->
      <div class="row">
        <select id="categorySelect"></select>
        <input autocomplete="off" type="text" id="newCategory" placeholder="ÎÎ­Î± ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±">
      </div>

      <!-- ÎšÎ¿Ï…Î¼Ï€Î¹Î¬ -->
      <div class="actions">
        <button type="button" id="cancelModal">Î†ÎºÏ…ÏÎ¿</button>
        <button type="submit">Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·</button>
      </div>
    </form>
  </div>
</div>

<div class="theme-toggle-wrapper">
  <span class="version">ver. 4.1.4f</span>
</div>

<!-- ===== MODAL Î Î‘Î›Î•Î¤Î‘Î£ Î§Î¡Î©ÎœÎ‘Î¤Î©Î ===== -->
<div class="modal" id="paletteModal">
  <div class="box">
    <h3>Î Î±Î»Î­Ï„Î± Î§ÏÏ‰Î¼Î¬Ï„Ï‰Î½</h3>

    <div class="row palette-row">
      <label for="bg1">Î¦ÏŒÎ½Ï„Î¿ 1</label>
      <input type="color" id="bg1" value="#0d1b2a">
      <div class="color-preview" id="preview-bg1"></div>
    </div>

    <div class="row palette-row">
      <label for="bg2">Î¦ÏŒÎ½Ï„Î¿ 2</label>
      <input type="color" id="bg2" value="#1b263b">
      <div class="color-preview" id="preview-bg2"></div>
    </div>

    <div class="row palette-row">
      <label for="card">ÎšÎ¬ÏÏ„Î±</label>
      <input type="color" id="card" value="#415a77">
      <div class="color-preview" id="preview-card"></div>
    </div>

    <div class="row palette-row">
      <label for="accent">ÎšÎ¿Ï…Î¼Ï€Î¯</label>
      <input type="color" id="accent" value="#2f80ed">
      <div class="color-preview" id="preview-accent"></div>
    </div>

    <div class="row palette-row">
      <label for="text">ÎšÎµÎ¯Î¼ÎµÎ½Î¿</label>
      <input type="color" id="text" value="#eaeef5">
      <div class="color-preview" id="preview-text"></div>
    </div>

    <div class="row palette-row">
      <label for="border">Î ÎµÏÎ¯Î³ÏÎ±Î¼Î¼Î±</label>
      <input type="color" id="border" value="#cccccc">
      <div class="color-preview" id="preview-border"></div>
    </div>

    <div class="actions-row">
      <button id="defaultPalette">Default</button>
      <button id="closePalette">ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿</button>
    </div>
  
    <div class="row palette-row">
      <label for="autoBackup">Auto-Backup Restore</label>
      <button id="autoBackupBtn">Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬</button>
    </div>
  </div>
</div>

<!-- ===== ÎšÎ¡Î¥Î¦ÎŸ ÎšÎŸÎ¥ÎœÎ Î™ Î“Î™Î‘ Î Î‘Î›Î•Î¤Î‘ ===== -->
<div id="paletteBtn" data-tooltip="Î¡Ï…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ Ï‡ÏÏ‰Î¼Î¬Ï„Ï‰Î½"></div>

<!-- Help Menu -->
<div class="help-overlay" id="helpOverlay"></div>
<div class="help-menu" id="helpMenu">
    <button class="close-help" id="closeHelp">&times;</button>
    
    <h2>ğŸ“š ÎŸÎ´Î·Î³Î¯ÎµÏ‚ Î§ÏÎ®ÏƒÎ·Ï‚</h2>
    
    <div class="help-section">
	<h3>ğŸ‘ ÎœÎ¹Î± ÎµÏ†Î±ÏÎ¼Î¿Î³Î® Ï€Î»Î®ÏÏ‰Ï‚ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÎ® Ï€Î¿Ï… Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÎ¹:</h3>
	<ul>
  <p> âœ… ÎˆÎ¾Ï…Ï€Î½Î· Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÏƒÎµÎ»Î¹Î´Î¿Î´ÎµÎ¹ÎºÏ„ÏÎ½</p>
  <p> âœ… Optimized Drag & Drop performance  </p>
 <p>  âœ… Post-it ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚ Î¼Îµ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î· Ï€ÏÎ¿ÏƒÎ±ÏÎ¼Î¿Î³Î® Ï‡ÏÏ‰Î¼Î¬Ï„Ï‰Î½</p>
 <p>  âœ… Zuccaradio web radio</p>
  <p> âœ… Welcome sound ÏƒÏ„Î¿ Ï€ÏÏÏ„Î¿ ÎºÎ»Î¹Îº</p>
  <p> âœ… Î Î»Î®ÏÎ· ÎµÎ»Î»Î·Î½Î¹ÎºÎ¬ ÏƒÏ‡ÏŒÎ»Î¹Î± Î³Î¹Î± ÎµÏÎºÎ¿Î»Î· ÎµÎºÎ¼Î¬Î¸Î·ÏƒÎ·</p>
  <p> âœ… Auto-Navigation system Î¼Îµ Ï„Ï…Ï‡Î±Î¯Î¿ highlight</p>
   <ul>
   
  <li> Î“Î¹Î± Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î· Î® ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚, ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î®ÏƒÏ„Îµ Î¼Îµ Ï„Î¿ Doukas Pharmacy SupportÂ®</li>
	
        <h3>ğŸ´ Î ÏÏ‚ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ Ï„Î± shortcuts</h3>
        <p>Î“Î¹Î± ÎµÏÎºÎ¿Î»Î¿ Ï‡ÎµÎ¹ÏÎ¹ÏƒÎ¼ÏŒ Ï„Ï‰Î½ Î±Î³Î±Ï€Î·Î¼Î­Î½Ï‰Î½ ÏƒÎ±Ï‚ sites</p>
        <ul>
            <li>Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ <strong>"Î•Ï€ÏŒÎ¼ÎµÎ½Î·"</strong> ÎºÎ±Î¹ <strong>"Î ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î·"</strong> Î³Î¹Î± Ï€Î»Î¿Î®Î³Î·ÏƒÎ·</li>
        </ul>
    </div>
	
    
    <div class="help-section">
        <h3>ğŸ’¡ Î£Ï…Î¼Î²Î¿Ï…Î»Î­Ï‚ ÎœÎ¬Î¸Î·ÏƒÎ·Ï‚</h3>
        <p>Î‘ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ Î±Ï…Ï„Î­Ï‚ Ï„Î¹Ï‚ ÏƒÏ…Î¼Î²Î¿Ï…Î»Î­Ï‚ Î³Î¹Î± ÎºÎ±Î»ÏÏ„ÎµÏÎ± Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±:</p>
        <ul>
            <li>Î•Ï€Î±Î½Î¬Î»Î·ÏˆÎ· ÎµÎ¯Î½Î±Î¹ Ï„Î¿ ÎºÎ»ÎµÎ¹Î´Î¯ - Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ Ï„Î·Î½ ÎµÏ†Î±ÏÎ¼Î¿Î³Î® ÎºÎ±Î¸Î·Î¼ÎµÏÎ¹Î½Î¬</li>
        </ul>
    </div>
    
    <div class="help-section">
        <h3>ğŸ¯ Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î•Ï†Î±ÏÎ¼Î¿Î³Î®Ï‚</h3>
        <p>Î‘Ï…Ï„Î® Î· ÎµÏ†Î±ÏÎ¼Î¿Î³Î® ÏƒÎ±Ï‚ Î²Î¿Î·Î¸Î¬ Î½Î±:</p>
        <ul>
            <li>ÎÎ¬ Î²ÏÎ¯ÏƒÎºÎµÏ„Îµ Î³ÏÎ®Î³Î¿ÏÎ± .........Ï„Î¿Î½ Î´ÏÏŒÎ¼Î¿ ÏƒÎ±Ï‚!!</li>
			<li>Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î¡Î¿Î»ÏŒÎ¹ Î·Î¼ÎµÏÎ¿Î»ÏŒÎ³Î¹Î¿</li>
			<li>Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ZuccaRadio</li>
			<li>Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Post-it</li>
        </ul>
    </div>
    
    <div class="help-section">
        <h3>âŒ¨ï¸ Î£Ï…Î½Ï„Î¿Î¼ÎµÏÏƒÎµÎ¹Ï‚ Î Î»Î·ÎºÏ„ÏÎ¿Î»Î¿Î³Î¯Î¿Ï…</h3>
        <ul>
            <li><strong>ESC:</strong> ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ help menu</li>
            <li><strong>Î’Î¿Î®Î¸ÎµÎ¹Î±:</strong> ÎšÎ¿Ï…Î¼Ï€Î¯ Î³Î¹Î± Î¬Î½Î¿Î¹Î³Î¼Î± Î±Ï…Ï„Î¿Ï Ï„Î¿Ï… Ï€Î±ÏÎ±Î¸ÏÏÎ¿Ï…</li>
        </ul>
    </div>
    
    <div style="text-align: center; margin-top: 20px; color: #7f8c8d; font-style: italic;">
        <p>ÎšÎ±Î»Î® ÎµÏ€Î¹Ï„Ï…Ï‡Î¯Î± ÏƒÏ„Î·Î½ ÎµÎºÎ¼Î¬Î¸Î·ÏƒÎ·!</p>
    </div>
</div>

<!-- ===== POST-IT WIDGET ===== -->
<div class="postit-widget" id="postitWidget">
    <button class="close-btn" id="closePostit">&times;</button>
    <h3>ğŸ“‹ Post-it</h3>
    
    <div class="postit-input-area">
        <textarea id="postitInput" placeholder="Î“ÏÎ¬ÏˆÎµ Î­Î½Î± Post-it....."></textarea>
        <input type="date" id="postitDate">
    </div>
    
    <div class="color-picker">
        <div class="color-option selected" data-color="#ffeb3b" style="background: #ffeb3b;"></div>
        <div class="color-option" data-color="#81d4fa" style="background: #81d4fa;"></div>
        <div class="color-option" data-color="#a5d6a7" style="background: #a5d6a7;"></div>
        <div class="color-option" data-color="#f48fb1" style="background: #f48fb1;"></div>
        <div class="color-option" data-color="#ffcc80" style="background: #ffcc80;"></div>
        <div class="color-option" data-color="#ce93d8" style="background: #ce93d8;"></div>
    </div>
    
    <div class="postit-actions">
        <button class="btn-add" id="addPostitBtn">+ Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·</button>
        <button class="btn-clear" id="clearPostitBtn">âœ“ ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚</button>
    </div>
    
    <div class="postit-list" id="postitList">
        <!-- Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚ Î¸Î± Ï€ÏÎ¿ÏƒÏ„Î¯Î¸ÎµÎ½Ï„Î±Î¹ ÎµÎ´Ï -->
    </div>
</div>





<script>
/* =====================================================================
   ğŸ’» JAVASCRIPT Î“Î™Î‘ Î¤Î—Î Î•Î¦Î‘Î¡ÎœÎŸÎ“Î— "Î¤Î‘ Î”Î™ÎšÎ‘ ÎœÎŸÎ¥ Î§Î¡Î—Î£Î™ÎœÎ‘"
   =====================================================================
   Î•Î´Ï Î²ÏÎ¯ÏƒÎºÎµÏ„Î±Î¹ ÏŒÎ»Î· Î· Î»Î¿Î³Î¹ÎºÎ® Ï„Î·Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î®Ï‚. Î¤Î± ÎºÏÏÎ¹Î± Ï„Î¼Î®Î¼Î±Ï„Î± ÎµÎ¯Î½Î±Î¹:
   1. Î”Î·Î»ÏÏƒÎµÎ¹Ï‚ Î¼ÎµÏ„Î±Î²Î»Î·Ï„ÏÎ½
   2. Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎºÎ±Ï„Î·Î³Î¿ÏÎ¹ÏÎ½ ÎºÎ±Î¹ links
   3. Drag & Drop Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÏŒÏ„Î·Ï„Î±
   4. Post-it ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚
   5. Zuccaradio player
   6. Theme switcher
   7. Backup/Restore Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½
   ===================================================================== */

/* =====================================================================
   ğŸ’¡ TIPS SYSTEM - Î£Î¥Î£Î¤Î—ÎœÎ‘ Î¤Î¥Î§Î‘Î™Î©Î Î£Î¥ÎœÎ’ÎŸÎ¥Î›Î©Î
   =====================================================================
   Î•Î´Ï Ï€ÏÎ¿ÏƒÎ¸Î­Ï„ÎµÎ¹Ï‚ Ï„Î± Î´Î¹ÎºÎ¬ ÏƒÎ¿Ï… tips ÎºÎ±Î¹ Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¯Î¶ÎµÏ„Î±Î¹ Î· ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ® Ï„Î¿Ï…Ï‚
   --------------------------------------------------------------------- */

// ğŸ¯ Î•Î”Î© Î Î¡ÎŸÎ£Î˜Î•Î¤Î•Î™Î£ Î¤Î‘ TIPS Î£ÎŸÎ¥:
const userTips = [
  "  ğŸ’¡ÎÎ­Î¿:  ğŸ–±ï¸ Î£ÏÏÎµ links Î±Ï€ÏŒ Ï„Î¿Î½ browser ÏƒÎ¿Ï… Î±Ï€ÎµÏ…Î¸ÎµÎ¯Î±Ï‚ ÏƒÏ„Î¹Ï‚ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚!",
  "  ğŸ’¡Tip:  ğŸ’¾ Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ Backup/Restore Î³Î¹Î± Î½Î± Î´Î¹Î±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚ Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± ÏƒÎ¿Ï… Î±ÏƒÏ†Î±Î»Î®!",
  "  ğŸ’¡Tip:  ğŸ¨ Î”Î¿ÎºÎ¯Î¼Î±ÏƒÎµ Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ¬ themes Î±Ï€ÏŒ Ï„Î¿ dropdown menu!",
  "  ğŸ’¡Tip:  ğŸ“ Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ Ï„Î± Post-it Î³Î¹Î± Î³ÏÎ®Î³Î¿ÏÎµÏ‚ ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚!",
  "  ğŸ”‘â€‹Tip:  ğŸŒ â€‹ÎÎ± Î¼Î·Î½ Î¾ÎµÏ‡Î½Î¬Ï‚ Î½Î± Ï‡Î±Î¼Î¿Î³ÎµÎ»Î¬Ï‚ ÎºÎ¬Î½ÎµÎ¹ Ï„Î¿Ï…Ï‚ Î¬Î»Î»Î¿Ï…Ï‚ Î½Î± Î±Î½Î·ÏƒÏ…Ï‡Î¿ÏÎ½!",
  "  ğŸ’¡Tip:  ğŸ¶ Î‘Î½Î±ÎºÎ¬Î»Ï…ÏˆÎµ Î½Î­Î± Ï…Ï€Î­ÏÎ¿Ï‡Î· Î¼Î¿Ï…ÏƒÎ¹ÎºÎ® Î±Ï€ÏŒ Ï„Î¿ Zuccaradio player!",
  "  ğŸ’¡Tip:  ğŸ“± Î— ÎµÏ†Î±ÏÎ¼Î¿Î³Î® ÎµÎ¯Î½Î±Î¹ responsive - Î´Î¿Ï…Î»ÎµÏÎµÎ¹ Ï„Î­Î»ÎµÎ¹Î± ÎºÎ±Î¹ ÏƒÎµ ÎºÎ¹Î½Î·Ï„Î¬!",
  "  ğŸ’¡Tip:  âš¡ ÎšÎ¬Î½Îµ click Ï€Î¬Î½Ï‰ Î´ÎµÎ¾Î¹Î± ÏƒÎµ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î± Î³Î¹Î± Î½Î± Ï„Î·Î½ ÎµÏ€ÎµÎ¾ÎµÏÎ³Î±ÏƒÏ„ÎµÎ¯Ï‚!",
  "  ğŸ’¡Tip:  ğŸ”„ ÎœÎµÏ„Î±ÎºÎ¯Î½Î·ÏƒÎµ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚ Î¼Îµ drag & drop Î³Î¹Î± ÎºÎ±Î»ÏÏ„ÎµÏÎ· Î¿ÏÎ³Î¬Î½Ï‰ÏƒÎ·!",
  "  ğŸ’¡Tip:  â¤ï¸ ÎœÏŒÎ»Î¹Ï‚ Ï€ÏÎ¿ÏƒÏ„ÎµÎ¸ÎµÎ¯ Î¼Î¹Î± Î½Î­Î± Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± Î¸Î± ÎµÎ½Î·Î¼ÎµÏÏ‰Î¸ÎµÎ¯Ï„Îµ Î¬Î¼ÎµÏƒÎ± ÎµÎ´Ï !"
];

let currentTipIndex = 0;
let tipDisplayTimer = null;
let tipInterval = null;

// Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· tip banner
function showTip(tipText) {
  const banner = document.getElementById('tip-banner');
  if (!banner) return;
  
  banner.textContent = tipText;
  banner.setAttribute('data-text', tipText);  // Î“Î¹Î± Ï„Î¿ hover effect
  banner.style.display = 'block';
  
  // Reset animation
  banner.style.animation = 'none';
  setTimeout(() => {
    banner.style.animation = 'slideFromRight 1s ease-out forwards';
  }, 10);
  
  // Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Ï€ÏŒÎºÏÏ…ÏˆÎ· Î¼ÎµÏ„Î¬ Î±Ï€ÏŒ 6 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
  if (tipDisplayTimer) clearTimeout(tipDisplayTimer);
  tipDisplayTimer = setTimeout(() => {
    banner.style.display = 'none';
  }, 6000);
}

// Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Ï„Ï…Ï‡Î±Î¯Î¿Ï… tip
function showRandomTip() {
  if (userTips.length === 0) return;
  
  const randomIndex = Math.floor(Math.random() * userTips.length);
  showTip(userTips[randomIndex]);
}

// ÎˆÎ½Î±ÏÎ¾Î· Ï„Î¿Ï… tip system
function initTipsSystem() {
  // Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Ï€ÏÏÏ„Î¿Ï… tip Î¼ÎµÏ„Î¬ Î±Ï€ÏŒ 3 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
  setTimeout(() => {
    showRandomTip();
  }, 3000);
  
  // Î£Ï„Î· ÏƒÏ…Î½Î­Ï‡ÎµÎ¹Î±, ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ· tip ÎºÎ¬Î¸Îµ 30-60 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
  tipInterval = setInterval(() => {
    showRandomTip();
  }, Math.random() * 30000 + 30000); // 30-60 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
}

// Î Î±ÏÏƒÎ· tips ÏŒÏ„Î±Î½ ÎºÎ¬Î½ÎµÎ¹ hover ÏƒÏ„Î¿ banner
document.addEventListener('DOMContentLoaded', () => {
  const banner = document.getElementById('tip-banner');
  if (banner) {
    banner.addEventListener('mouseenter', () => {
      if (tipDisplayTimer) {
        clearTimeout(tipDisplayTimer);
      }
    });
    
    banner.addEventListener('mouseleave', () => {
      tipDisplayTimer = setTimeout(() => {
        banner.style.display = 'none';
      }, 2000);
    });
  }
});

// Î•ÎºÎºÎ¯Î½Î·ÏƒÎ· Ï„Î¿Ï… tips system Î¼ÎµÏ„Î¬ Ï„Î· Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Î·Ï‚ ÏƒÎµÎ»Î¯Î´Î±Ï‚
document.addEventListener('DOMContentLoaded', initTipsSystem);

/* --------------------------------------------------------------------- */








/* =====================================================================
   ğŸ“Œ 1. Î”Î—Î›Î©Î£Î•Î™Î£ ÎœÎ•Î¤Î‘Î’Î›Î—Î¤Î©Î
   =====================================================================
   Î•Î´Ï Î¿ÏÎ¯Î¶Î¿Î½Ï„Î±Î¹ ÏŒÎ»ÎµÏ‚ Î¿Î¹ Î²Î±ÏƒÎ¹ÎºÎ­Ï‚ Î¼ÎµÏ„Î±Î²Î»Î·Ï„Î­Ï‚ Ï„Î·Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î®Ï‚
   --------------------------------------------------------------------- */

// âœ… POST-IT NOTES VARIABLES (Bug Fix #2)
let postitNotes = [];
let selectedColor = '#ffeb3b';
let editingIndex = -1;

/* ===============================
   ğŸ“Œ ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· / ÎœÎµÏ„Î±Î²Î»Î·Ï„Î­Ï‚
   =============================== */
let collapsedCats = JSON.parse(localStorage.getItem("collapsedCats") || "[]");
let categories = {};
let catOrder = [];
let editing = null;
let historyStack = [];
let themeDefault = {
  bg1:"#1f1f1f", bg2:"#232429", card:"#2b2d33", text:"#eaeef5", accent:"#2f80ed"
};
let categoryColors = JSON.parse(localStorage.getItem("categoryColors") || "{}");
let firstLoad = true;



/* ===============================
   ğŸ“Œ FIX 3: FUNCTION DECLARATIONS BEFORE USE
   =============================== */

// âœ… fixButtonHeights - Ï„ÏÏÎ± Î´Î·Î»ÏÎ½ÎµÏ„Î±Î¹ Ï€ÏÎ¹Î½ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯
function fixButtonHeights() {
    const buttons = document.querySelectorAll('.topbar button, .topbar .zuccaradio-btn, .topbar .help-btn');
    buttons.forEach(btn => {
        btn.style.height = '38px';
        btn.style.minHeight = '38px';
        btn.style.padding = '8px 14px';
        btn.style.lineHeight = '1';
        btn.style.display = 'inline-flex';
        btn.style.alignItems = 'center';
        btn.style.justifyContent = 'center';
        btn.style.boxSizing = 'border-box';
    });
    
    const themeSelect = document.getElementById('themeSelect');
    if (themeSelect) {
        themeSelect.style.height = '38px';
        themeSelect.style.minHeight = '38px';
        themeSelect.style.padding = '0 10px';
        themeSelect.style.lineHeight = '38px';
        themeSelect.style.boxSizing = 'border-box';
    }
}

// âœ… optimizeAllExistingIcons
async function optimizeAllExistingIcons() {
    for (const cat in categories) {
        for (const link of categories[cat]) {
            if (link.iconType === "upload" && link.iconValue && 
                link.iconValue.startsWith('data:image') && 
                link.iconValue.length > 5000) {
                
                link.iconValue = await compressImageIfNeeded(link.iconValue, 64, 64, 0.7);
            }
        }
    }
}

/* ===============================
   ğŸ“Œ Default Favicon Generator
   =============================== */
function getDefaultFavicon() {
    const canvas = document.createElement('canvas');
    canvas.width = 64; 
    canvas.height = 64;
    const ctx = canvas.getContext('2d');
    
    ctx.fillStyle = '#415a77';
    ctx.fillRect(0, 0, 64, 64);
    
    ctx.fillStyle = '#e0e1dd';
    ctx.beginPath();
    ctx.arc(32, 32, 20, 0, 2 * Math.PI);
    ctx.fill();
    
    ctx.fillStyle = '#415a77';
    ctx.font = 'bold 24px Arial';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('L', 32, 32);
    
    return canvas.toDataURL('image/png');
}

/* ===============================
   ğŸ“Œ SVG Î•Î¹ÎºÎ¿Î½Î¯Î´Î¹Î± (Î´Î¹Î±Ï†Î±Î½Î®)
   =============================== */
function svgIcon(kind, active=false){
  const color = active ? "#ffd54f" : "#e8eaed";
  if(kind==="edit") return `
    <svg viewBox="0 0 24 24" aria-label="Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±" role="img">
      <path fill="${color}" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"/>
      <path fill="${color}" d="M20.71 7.04a1.003 1.003 0 0 0 0-1.42L18.37 3.29a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.83z"/>
    </svg>`;
  if(kind==="delete") return `
    <svg viewBox="0 0 24 24" aria-label="Î”Î¹Î±Î³ÏÎ±Ï†Î®" role="img">
      <path fill="${color}" d="M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1z"/>
    </svg>`;
  return `
    <svg viewBox="0 0 24 24" aria-label="Pin" role="img">
      <path fill="${color}" d="M16,12V5l1-1V3H7V4l1,1v7L5,15v2h6v4h2v-4h6v-2L16,12z"/>
    </svg>`;
}

/* ===============================
   ğŸ“Œ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î”ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½
   =============================== */
function saveData(){
  localStorage.setItem("categories", JSON.stringify(categories));
  localStorage.setItem("catOrder", JSON.stringify(catOrder));
  localStorage.setItem("categoryColors", JSON.stringify(categoryColors));
}

function loadData(){
  categories = JSON.parse(localStorage.getItem("categories") || "{}");
  catOrder = JSON.parse(localStorage.getItem("catOrder") || "[]");
  categoryColors = JSON.parse(localStorage.getItem("categoryColors") || "{}");
}

/* =====================================================================
   ğŸ“ 2. Î›Î•Î™Î¤ÎŸÎ¥Î¡Î“Î™Î•Î£ POST-IT Î£Î—ÎœÎ•Î™Î©Î£Î•Î©Î
   =====================================================================
   Î•Î´Ï Ï…Î»Î¿Ï€Î¿Î¹Î¿ÏÎ½Ï„Î±Î¹ ÏŒÎ»ÎµÏ‚ Î¿Î¹ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯ÎµÏ‚ Î³Î¹Î± Ï„Î¹Ï‚ Post-it ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚:
   - Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·/Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î±Ï€ÏŒ localStorage
   - Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î½Î­Ï‰Î½ ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÏ‰Î½
   - Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î± Ï…Ï€Î±ÏÏ‡Î¿Ï…ÏƒÏÎ½
   - Î”Î¹Î±Î³ÏÎ±Ï†Î® ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÏ‰Î½
   - ÎˆÎ¾Ï…Ï€Î½Î¿ Ï‡ÏÏ‰Î¼Î±Ï„Î¹ÏƒÎ¼ÏŒ ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î±Î½Î¬Î»Î¿Î³Î± Î¼Îµ Ï„Î¿ Ï‡ÏÏÎ¼Î± Ï†ÏŒÎ½Ï„Î¿Ï…
   --------------------------------------------------------------------- */

// âœ… Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Post-it notes
function savePostitNotes() {
    localStorage.setItem("postitNotes", JSON.stringify(postitNotes));
}

// âœ… Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Post-it notes
function loadPostitNotes() {
    const saved = JSON.parse(localStorage.getItem("postitNotes") || "[]");
    
    // ÎœÎµÏ„Î±Ï„ÏÎ¿Ï€Î® Ï€Î±Î»Î¹ÏÎ½ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ (Î±Ï€Î»Î¬ strings) ÏƒÎµ Î½Î­Î± Î¼Î¿ÏÏ†Î® (objects)
    postitNotes = saved.map(item => {
        if (typeof item === 'string') {
            // Î Î±Î»Î¹Î¬ Î¼Î¿ÏÏ†Î® - Î¼ÎµÏ„Î±Ï„ÏÎ¿Ï€Î®
            const today = new Date();
            const day = String(today.getDate()).padStart(2, '0');
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const year = today.getFullYear();
            return {
                text: item,
                date: `${day}/${month}/${year}`,
                color: '#ffeb3b'
            };
        }
        return item; // ÎÎ­Î± Î¼Î¿ÏÏ†Î® - Î®Î´Î· object
    });
    
    renderPostitNotes();
}

/* =====================================================================
   ğŸ¨ Î•ÎÎ¥Î ÎÎŸÎ£ Î§Î¡Î©ÎœÎ‘Î¤Î™Î£ÎœÎŸÎ£ POST-IT Î£Î—ÎœÎ•Î™Î©Î£Î•Î©Î
   =====================================================================
   Î‘Ï…Ï„Î­Ï‚ Î¿Î¹ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯ÎµÏ‚ Î´Î¹Î±ÏƒÏ†Î±Î»Î¯Î¶Î¿Ï…Î½ ÏŒÏ„Î¹ Ï„Î¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ Ï„Ï‰Î½ Post-it ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÏ‰Î½
   ÎµÎ¯Î½Î±Î¹ Ï€Î¬Î½Ï„Î± Î¿ÏÎ±Ï„ÏŒ, Î±Î½ÎµÎ¾Î¬ÏÏ„Î·Ï„Î± Î±Ï€ÏŒ Ï„Î¿ Ï‡ÏÏÎ¼Î± Ï†ÏŒÎ½Ï„Î¿Ï… Ï€Î¿Ï… ÎµÏ€Î¹Î»Î­Î³ÎµÎ¹ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚.
   --------------------------------------------------------------------- */

// ğŸ¯ Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± Î³Î¹Î± Î­Î»ÎµÎ³Ï‡Î¿ Î±Î½ Î­Î½Î± Ï‡ÏÏÎ¼Î± ÎµÎ¯Î½Î±Î¹ Î±Î½Î¿Î¹Ï‡Ï„ÏŒ Î® ÏƒÎºÎ¿ÏÏÎ¿
function isLightColor(color) {
    // ÎœÎµÏ„Î±Ï„ÏÎ¿Ï€Î® hex ÏƒÎµ RGB
    const hex = color.replace('#', '');
    const r = parseInt(hex.substr(0, 2), 16);
    const g = parseInt(hex.substr(2, 2), 16);
    const b = parseInt(hex.substr(4, 2), 16);
    
    // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ luminance (Ï†Ï‰Ï„ÎµÎ¹Î½ÏŒÏ„Î·Ï„Î±)
    const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
    
    // Î‘Î½ Î· Ï†Ï‰Ï„ÎµÎ¹Î½ÏŒÏ„Î·Ï„Î± ÎµÎ¯Î½Î±Î¹ > 0.5, ÎµÎ¯Î½Î±Î¹ Î±Î½Î¿Î¹Ï‡Ï„ÏŒ Ï‡ÏÏÎ¼Î±
    return luminance > 0.5;
}

// âœ… Render Post-it notes Î¼Îµ Î­Î¾Ï…Ï€Î½Î¿ Ï‡ÏÏ‰Î¼Î±Ï„Î¹ÏƒÎ¼ÏŒ ÎºÎµÎ¹Î¼Î­Î½Î¿Ï…
function renderPostitNotes() {
    const list = document.getElementById("postitList");
    if (!list) return;
    
    list.innerHTML = "";
    postitNotes.forEach((note, index) => {
        const item = document.createElement("div");
        item.className = "postit-item";
        
        // ÎˆÎ¾Ï…Ï€Î½Î¿Ï‚ ÎºÎ±Î¸Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï‡ÏÏÎ¼Î±Ï„Î¿Ï‚ ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î²Î¬ÏƒÎµÎ¹ Ï‡ÏÏÎ¼Î±Ï„Î¿Ï‚ ÏƒÎ·Î¼ÎµÎ¯Ï‰ÏƒÎ·Ï‚
        const textColor = isLightColor(note.color) ? '#333' : '#fff';
        const dateColor = isLightColor(note.color) ? '#666' : '#ff6b6b';
        
        item.innerHTML = `
                      <div class="postit-item-color" style="background: ${note.color};"></div>
            <div class="postit-content">
                <di<div class="postit-content">
    <div class="postit-date" style="color: ${dateColor};">
        <span>ğŸ“… ${note.date || 'Invalid Date'}</span>
        <div class="postit-item-actions">
            <button class="btn-edit" onclick="editPostitNote(${index})" title="Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±">âœï¸</button>
            <button class="btn-copy" onclick="copyPostitNote(${index})" title="Î‘Î½Ï„Î¹Î³ÏÎ±Ï†Î®">ğŸ“‹</button>
            <button class="btn-delete" onclick="deletePostitNote(${index})" title="Î”Î¹Î±Î³ÏÎ±Ï†Î®">ğŸ—‘ï¸</button>
        </div>
    </div>
    <div class="postit-text" style="color: ${textColor};">${note.text}</div>
</div>

        `;
        item.style.background = note.color;
        list.appendChild(item);
    });
}

// âœ… Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÏƒÎ·Î¼ÎµÎ¯Ï‰ÏƒÎ·Ï‚
function addPostitNote() {
    const input = document.getElementById("postitInput");
    const dateInput = document.getElementById("postitDate");
    const text = input.value.trim();
    const date = dateInput.value;
    
    if (!text) {
        alert("Î Î±ÏÎ±ÎºÎ±Î»Ï Î³ÏÎ¬ÏˆÏ„Îµ ÎºÎ¬Ï„Î¹!");
        return;
    }
    
    if (!date) {
        alert("Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¹Î»Î­Î¾Ï„Îµ Î·Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±!");
        return;
    }
    
    const note = {
        text: text,
        date: formatDate(date),
        color: selectedColor
    };
    
    if (editingIndex >= 0) {
        // Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î± Ï…Ï€Î¬ÏÏ‡Î¿Ï…ÏƒÎ±Ï‚ ÏƒÎ·Î¼ÎµÎ¯Ï‰ÏƒÎ·Ï‚
        postitNotes[editingIndex] = note;
        editingIndex = -1;
    } else {
        // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î½Î­Î±Ï‚ ÏƒÎ·Î¼ÎµÎ¯Ï‰ÏƒÎ·Ï‚
        postitNotes.push(note);
    }
    
    savePostitNotes();
    renderPostitNotes();
    clearPostitInputs();
}

// Format date to DD/MM/YYYY
function formatDate(dateStr) {
    const date = new Date(dateStr);
    const day = String(date.getDate()).padStart(2, '0');
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const year = date.getFullYear();
    return `${day}/${month}/${year}`;
}

// ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï€ÎµÎ´Î¯Ï‰Î½ ÎµÎ¹ÏƒÎ±Î³Ï‰Î³Î®Ï‚ (Ï‡Ï‰ÏÎ¯Ï‚ Î´Î¹Î±Î³ÏÎ±Ï†Î® post-it)
function clearPostitInputs() {
    const postitInput = document.getElementById("postitInput");
    const postitDate = document.getElementById("postitDate");
    
    // ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ ÎºÎµÎ¹Î¼Î­Î½Î¿Ï…
    if (postitInput) postitInput.value = "";
    
    // Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ Î·Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±Ï‚ ÏƒÏ„Î· ÏƒÎ·Î¼ÎµÏÎ¹Î½Î®
    if (postitDate) {
        const today = new Date().toISOString().split('T')[0];
        postitDate.value = today;
    }
    
    selectedColor = '#ffeb3b';
    editingIndex = -1;
    
    // Reset selected color
    document.querySelectorAll('.color-option').forEach(opt => {
        opt.classList.remove('selected');
        if (opt.dataset.color === '#ffeb3b') {
            opt.classList.add('selected');
        }
    });
    
    // Update textarea background ÎºÎ±Î¹ text color Î¼Îµ Ï„Î¿ Î±Î½Î¿Î¹Ï‡Ï„ÏŒ ÎºÎ¯Ï„ÏÎ¹Î½Î¿
    if (postitInput) {
        postitInput.style.background = '#fff9c4';
        // ÎšÎ±Î¸Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï‡ÏÏÎ¼Î±Ï„Î¿Ï‚ ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î²Î¬ÏƒÎµÎ¹ Ï†Ï‰Ï„ÎµÎ¹Î½ÏŒÏ„Î·Ï„Î±Ï‚ Ï†ÏŒÎ½Ï„Î¿Ï…
        const textColor = isLightColor('#fff9c4') ? '#333' : '#fff';
        postitInput.style.color = textColor;
    }
    if (postitDate) {
        postitDate.style.background = '#fff9c4';
        // ÎšÎ±Î¸Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï‡ÏÏÎ¼Î±Ï„Î¿Ï‚ ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î²Î¬ÏƒÎµÎ¹ Ï†Ï‰Ï„ÎµÎ¹Î½ÏŒÏ„Î·Ï„Î±Ï‚ Ï†ÏŒÎ½Ï„Î¿Ï…
        const textColor = isLightColor('#fff9c4') ? '#333' : '#fff';
        postitInput.style.color = '#333'; // Î Î¬Î½Ï„Î± Î¼Î±ÏÏÎ¿ Ï‡ÏÏÎ¼Î±
    }
}

// Î”Î¹Î±Î³ÏÎ±Ï†Î® ÎŸÎ›Î©Î Ï„Ï‰Î½ post-it Î¼ÎµÏ„Î¬ Î±Ï€ÏŒ ÎµÏ€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ·
function clearAllPostits() {
    // Î–Î·Ï„Î¬Î¼Îµ ÎµÏ€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ· Î±Ï€ÏŒ Ï„Î¿Î½ Ï‡ÏÎ®ÏƒÏ„Î·
    const confirmDelete = confirm("Î•Î¯ÏƒÏ„Îµ ÏƒÎ¯Î³Î¿Ï…ÏÎ¿Î¹ ÏŒÏ„Î¹ Î¸Î­Î»ÎµÏ„Îµ Î½Î± Î´Î¹Î±Î³ÏÎ¬ÏˆÎµÏ„Îµ ÏŒÎ»Î± Ï„Î± Post-it;");
    
    if (!confirmDelete) {
        return; // Î‘Î½ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Ï€Î±Ï„Î®ÏƒÎµÎ¹ "Î†ÎºÏ…ÏÎ¿", Î´ÎµÎ½ ÎºÎ¬Î½Î¿Ï…Î¼Îµ Ï„Î¯Ï€Î¿Ï„Î±
    }
    
    // Î”Î¹Î±Î³ÏÎ±Ï†Î® ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ post-it
    postitNotes = [];
    savePostitNotes();
    renderPostitNotes();
    
    // ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ±Î¹ Ï„Ï‰Î½ Ï€ÎµÎ´Î¯Ï‰Î½ ÎµÎ¹ÏƒÎ±Î³Ï‰Î³Î®Ï‚
    clearPostitInputs();
}

// Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î± ÏƒÎ·Î¼ÎµÎ¯Ï‰ÏƒÎ·Ï‚
function editPostitNote(index) {
    const note = postitNotes[index];
    if (!note) return;
    
    document.getElementById("postitInput").value = note.text;
    
    // Convert DD/MM/YYYY back to YYYY-MM-DD
    const [day, month, year] = note.date.split('/');
    document.getElementById("postitDate").value = `${year}-${month}-${day}`;
    
    selectedColor = note.color;
    editingIndex = index;
    
    // Update selected color
    document.querySelectorAll('.color-option').forEach(opt => {
        opt.classList.remove('selected');
        if (opt.dataset.color === selectedColor) {
            opt.classList.add('selected');
        }
    });
    
    // Update textarea background and text color
    const textarea = document.getElementById("postitInput");
    const dateInput = document.getElementById("postitDate");
    if (textarea) {
        textarea.style.background = selectedColor;
        // ÎšÎ±Î¸Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï‡ÏÏÎ¼Î±Ï„Î¿Ï‚ ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î²Î¬ÏƒÎµÎ¹ Ï†Ï‰Ï„ÎµÎ¹Î½ÏŒÏ„Î·Ï„Î±Ï‚ Ï†ÏŒÎ½Ï„Î¿Ï…
        const textColor = isLightColor(selectedColor) ? '#333' : '#fff';
        textarea.style.color = '#333'; // Î‘Î»Î»Î¬Î¶ÎµÎ¹Ï‚ Î¼ÏŒÎ½Î¿ Î±Ï…Ï„Î® Ï„Î· Î³ÏÎ±Î¼Î¼Î®
    }
    if (dateInput) {
        dateInput.style.background = selectedColor;
        // ÎšÎ±Î¸Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï‡ÏÏÎ¼Î±Ï„Î¿Ï‚ ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î²Î¬ÏƒÎµÎ¹ Ï†Ï‰Ï„ÎµÎ¹Î½ÏŒÏ„Î·Ï„Î±Ï‚ Ï†ÏŒÎ½Ï„Î¿Ï…
        const textColor = isLightColor(selectedColor) ? '#333' : '#fff';
        dateInput.style.color = textColor;
    }
    
    // Scroll to top
    document.getElementById("postitWidget").scrollTop = 0;
}

// Î‘Î½Ï„Î¹Î³ÏÎ±Ï†Î® ÏƒÎ·Î¼ÎµÎ¯Ï‰ÏƒÎ·Ï‚
function copyPostitNote(index) {
    const note = postitNotes[index];
    if (!note) return;
    
    const copyText = `${note.text} (${note.date})`;
    navigator.clipboard.writeText(copyText).then(() => {
        alert("Î‘Î½Ï„Î¹Î³ÏÎ¬Ï†Î·ÎºÎµ!");
    }).catch(() => {
        alert("Î£Ï†Î¬Î»Î¼Î± Î±Î½Ï„Î¹Î³ÏÎ±Ï†Î®Ï‚");
    });
}

// âœ… Î”Î¹Î±Î³ÏÎ±Ï†Î® ÏƒÎ·Î¼ÎµÎ¯Ï‰ÏƒÎ·Ï‚
function deletePostitNote(index) {
    postitNotes.splice(index, 1);
    savePostitNotes();
    renderPostitNotes();
}

// âœ… Toggle Post-it Widget
function togglePostitWidget() {
    const widget = document.getElementById("postitWidget");
    const btn = document.getElementById("postitWidgetBtn");
    
    if (!widget || !btn) return;
    
    const isVisible = widget.style.display === "block";
    
    if (isVisible) {
        widget.style.display = "none";
        btn.classList.remove("active");
    } else {
        widget.style.display = "block";
        btn.classList.add("active");
        renderPostitNotes();
    }
}

/* ===============================
   ğŸ“Œ Î¤Î¥Î§Î‘Î™Î‘ Î§Î¡Î©ÎœÎ‘Î¤Î‘ Î“Î™Î‘ ÎšÎ‘Î¤Î—Î“ÎŸÎ¡Î™Î•Î£
   =============================== */
function getRandomCategoryColor() {
  const colorPairs = [
    { bg: 'rgba(244, 162, 97, 0.2)', border: 'rgba(244, 162, 97, 0.3)' },
    { bg: 'rgba(42, 157, 244, 0.2)', border: 'rgba(42, 157, 244, 0.3)' },
    { bg: 'rgba(161, 255, 10, 0.2)', border: 'rgba(161, 255, 10, 0.3)' },
    { bg: 'rgba(255, 64, 129, 0.2)', border: 'rgba(255, 64, 129, 0.3)' },
    { bg: 'rgba(159, 89, 243, 0.2)', border: 'rgba(159, 89, 243, 0.3)' },
    { bg: 'rgba(255, 215, 0, 0.2)', border: 'rgba(255, 215, 0, 0.3)' },
    { bg: 'rgba(0, 230, 118, 0.2)', border: 'rgba(0, 230, 118, 0.3)' },
    { bg: 'rgba(156, 39, 176, 0.2)', border: 'rgba(156, 39, 176, 0.3)' },
    { bg: 'rgba(33, 150, 243, 0.2)', border: 'rgba(33, 150, 243, 0.3)' },
    { bg: 'rgba(229, 57, 53, 0.2)', border: 'rgba(229, 57, 53, 0.3)' },
    { bg: 'rgba(0, 150, 136, 0.2)', border: 'rgba(0, 150, 136, 0.3)' },
    { bg: 'rgba(121, 85, 72, 0.2)', border: 'rgba(121, 85, 72, 0.3)' }
  ];
  
  const randomIndex = Math.floor(Math.random() * colorPairs.length);
  return colorPairs[randomIndex];
}

/* ===============================
   ğŸ“Œ Undo / Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ
   =============================== */
function pushHistory(){
  historyStack.push(JSON.stringify({
    categories: JSON.parse(JSON.stringify(categories)),
    catOrder: [...catOrder],
    theme: getTheme()
  }));
  if(historyStack.length > 80) historyStack.shift();
  updateUndoBtn();
}

function updateUndoBtn(){
  const b = document.getElementById("undoBtnTop");
  if(historyStack.length === 0){ b.disabled = true; b.classList.add("gray"); }
  else { b.disabled = false; b.classList.remove("gray"); }
}

function undo(){
  if(historyStack.length === 0) return;
  const snap = JSON.parse(historyStack.pop());
  categories = snap.categories;
  catOrder = snap.catOrder;
  applyTheme(snap.theme);
  saveData(); saveTheme(snap.theme);
  render();
  updateUndoBtn();
}

// Î ÏÎ¿ÏƒÎ¸Î­Ï„ÎµÎ¹ staggered animation ÏƒÏ„Î¹Ï‚ ÎºÎ¬ÏÏ„ÎµÏ‚ (Î¼ÏŒÎ½Î¿ ÏƒÏ„Î¿ Ï€ÏÏÏ„Î¿ render)
function animateCards() {
  if (!firstLoad) return;
  const cards = document.querySelectorAll(".card");
  cards.forEach((card, i) => {
    card.style.animationDelay = (i * 0.1) + "s";
  });
  firstLoad = false;
}

/* ===============================
   ğŸ“Œ Î’Î¿Î·Î¸Î¿Î¯
   =============================== */
function normalizeUrl(u){
  if(!u) return "";
  let s = u.trim();
  if(!/^https?:\/\//i.test(s)){
    if(/^www\./i.test(s)) s = "https://" + s;
    else s = "https://" + s;
  }
  return s;
}

function dedupeAdd(cat, linkObj){
  const url = linkObj.url;
  if(!(categories[cat])) categories[cat] = [];
  
  const normalizeUrlForComparison = (url) => {
    try {
      const urlObj = new URL(url);
      return urlObj.hostname + urlObj.pathname.replace(/\/$/, '');
    } catch {
      return url.toLowerCase().replace(/\/$/, '');
    }
  };
  
  const normalizedNewUrl = normalizeUrlForComparison(url);
  
  const existingLink = categories[cat].find(L => {
    const existingUrl = normalizeUrlForComparison(L.url || "");
    return existingUrl === normalizedNewUrl;
  });
  
  if (existingLink) {
    const existingName = existingLink.name || "Î§Ï‰ÏÎ¯Ï‚ ÏŒÎ½Î¿Î¼Î±";
    alert(`âš ï¸ Î‘Ï…Ï„Î® Î· ÏƒÏ…Î½Ï„ÏŒÎ¼ÎµÏ…ÏƒÎ· Î®Î´Î· Ï…Ï€Î¬ÏÏ‡ÎµÎ¹!\n\nURL: ${url}\nÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±: ${cat}\nÎ¥Ï€Î¬ÏÏ‡Î¿Î½ ÏŒÎ½Î¿Î¼Î±: ${existingName}`);
    return false;
  }
  
  categories[cat].push(linkObj);
  return true;
}

function showAutoBackups() {
  const backups = JSON.parse(localStorage.getItem("autoBackups") || "[]");
  if (!backups.length) {
    alert("Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿ auto-backup!");
    return;
  }

  let msg = "Î”Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î± Auto-Backups:\n\n";
  backups.forEach((b, i) => {
    msg += i + ": " + b.timestamp + "\n";
  });
  msg += "\nÎ Î»Î·ÎºÏ„ÏÎ¿Î»ÏŒÎ³Î·ÏƒÎµ 0,1,2 Î³Î¹Î± Î½Î± Î´Î¹Î±Î»Î­Î¾ÎµÎ¹Ï‚:";

  const choice = prompt(msg);
  if (choice !== null && !isNaN(choice)) {
    restoreAutoBackup(parseInt(choice));
  }
}

/* ===============================
   ğŸ“Œ Render â€” Î£Ï‡ÎµÎ´Î¯Î±ÏƒÎ· UI
   =============================== */
function render(){
  const wrap = document.getElementById("categories");
  wrap.innerHTML = "";

  catOrder.forEach(cat => {
    const sec = document.createElement("div");
    sec.className = "category";
    sec.draggable = true;
    sec.dataset.cat = cat;

    const title = document.createElement("div");
    title.className = "category-title";

    const h2 = document.createElement("h2");
    h2.textContent = cat;
    
    if (!categoryColors[cat]) {
      categoryColors[cat] = getRandomCategoryColor();
      saveData();
    }
    
    const color = categoryColors[cat];
    h2.style.background = `linear-gradient(135deg, ${color.bg}, ${color.bg.replace('0.2', '0.1')})`;
    h2.style.border = `1px solid ${color.border}`;
    
    title.appendChild(h2);

    const actions = document.createElement("div");
    actions.className = "cat-actions";

    const toggleBtn = document.createElement("span");
    toggleBtn.textContent = collapsedCats.includes(cat) ? "â–¸" : "â–¾";
    toggleBtn.className = "toggle-btn";
    actions.appendChild(toggleBtn);

    const renameBtn = document.createElement("span");
    renameBtn.className = "cat-btn rename";
    renameBtn.textContent = "âœ";
    actions.appendChild(renameBtn);

    const delBtn = document.createElement("span");
    delBtn.className = "cat-btn delcat";
    delBtn.textContent = "ğŸ—‘";
    actions.appendChild(delBtn);

    title.appendChild(actions);
    sec.appendChild(title);

    const grid = document.createElement("div");
    grid.className = "grid";
    grid.dataset.cat = cat;
    if (collapsedCats.includes(cat)) grid.classList.add("collapsed");
    sec.appendChild(grid);

    toggleBtn.onclick = () => {
      const isCollapsed = grid.classList.toggle("collapsed");
      toggleBtn.textContent = isCollapsed ? "â–¸" : "â–¾";
      if (isCollapsed) {
        if (!collapsedCats.includes(cat)) collapsedCats.push(cat);
        const idx = catOrder.indexOf(cat);
        if (idx > -1) {
          catOrder.splice(idx, 1);
          catOrder.push(cat);
          saveData();
          render();
        }
      } else {
        collapsedCats = collapsedCats.filter(c => c !== cat);
      }
      localStorage.setItem("collapsedCats", JSON.stringify(collapsedCats));
    };

    const list = (categories[cat] || []);
    const orderIdx = list.map((_,i)=>i).sort((a,b)=>{
      const pa = !!(list[a] && list[a].pinned), pb = !!(list[b] && list[b].pinned);
      if(pa===pb) return a-b;
      return pb - pa;
    });

    orderIdx.forEach(idx=>{
      const l = list[idx] || {};

      let initialIcon = "";
      if(l.iconType === "upload" && l.iconValue){
        initialIcon = l.iconValue;
      }
      else if(l.iconType === "builtin" && l.iconValue){
        initialIcon = builtinToDataUrl(l.iconValue);
      }
      else if(l.iconType === "url" && l.iconValue){
        initialIcon = l.iconValue;
      }
      else if(l.url){
        try{
          const domain = (new URL(l.url)).hostname;
          if(domain) initialIcon = `https://www.google.com/s2/favicons?sz=64&domain=${domain}`;
          else initialIcon = getDefaultFavicon();
        }catch(e){
          initialIcon = getDefaultFavicon();
        }
      } else {
        initialIcon = getDefaultFavicon();
      }

      const card = document.createElement("div");
      card.className="card";
      card.draggable=true;
      card.dataset.cat=cat;
      card.dataset.idx=idx;
      if(l.pinned) card.classList.add("pinned");

      card.innerHTML = `
        <div class="menu-btn">â‹®</div>
        <div class="menu-popup">
          <button class="edit">âœï¸</button>
          <button class="delete">ğŸ—‘ï¸</button>
          <button class="pin">ğŸ“Œ</button>
        </div>
      `;

      const a = document.createElement("a");
      a.href = l.url || "#";
      a.target = "_blank";
      a.rel = "noopener";
      a.draggable = false;
      a.addEventListener("dragstart", e => e.preventDefault());

      const img = document.createElement("img");
      img.className = "favicon";
      img.setAttribute("alt", l.name || "");
      img.draggable = false;

      img.onerror = function() {
        this.src = getDefaultFavicon();
        this.style.width = '40px';
        this.style.height = '40px';
      };

      img.onload = function() {
        if(this.naturalWidth < 16 || this.naturalHeight < 16){
          this.src = getDefaultFavicon();
        }
        else if(this.naturalWidth > 64 || this.naturalHeight > 64) {
          this.style.maxWidth = '40px';
          this.style.maxHeight = '40px';
          this.style.objectFit = 'contain';
        }
        this.style.width = '40px';
        this.style.height = '40px';
      };

      img.src = initialIcon;

      const titleDiv = document.createElement("div");
      titleDiv.className = "link-title";
      titleDiv.style.color = "var(--text)";
      titleDiv.textContent = (l.name||"").slice(0,13);

      const descDiv = document.createElement("div");
      descDiv.className = "link-desc";
      descDiv.textContent = (l.desc || "").slice(0, 15);

      a.appendChild(img);
      a.appendChild(titleDiv);
      a.appendChild(descDiv);

      card.appendChild(a);
      grid.appendChild(card);
    });

    // âœ… Î”Î™ÎŸÎ¡Î˜Î©ÎœÎ•ÎÎŸ: Î§ÎµÎ¹ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï„ÏŒÏƒÎ¿ Î³Î¹Î± external URLs ÏŒÏƒÎ¿ ÎºÎ±Î¹ Î³Î¹Î± internal link movement
    sec.addEventListener("dragover", e => {
      e.preventDefault();
      
      // Î•Î»Î­Î³Ï‡Î¿Ï…Î¼Îµ Î±Î½ ÎµÎ¯Î½Î±Î¹ link movement Î® external URL
      const dragData = e.dataTransfer.getData("text/plain");
      let isLinkMovement = false;
      
      try {
        const parsed = JSON.parse(dragData);
        if (parsed && parsed.cat && parsed.idx !== undefined) {
          isLinkMovement = true;
        }
      } catch (ex) {
        // Î”ÎµÎ½ ÎµÎ¯Î½Î±Î¹ JSON, Î¬ÏÎ± ÎµÎ¯Î½Î±Î¹ external URL
      }
      
      if (!isLinkMovement) {
        sec.classList.add("drag-over");
      }
    });
    
    sec.addEventListener("dragleave", () => {
      sec.classList.remove("drag-over");
    });
    
    sec.addEventListener("drop", e => {
      e.preventDefault();
      sec.classList.remove("drag-over");
      
      const dragData = e.dataTransfer.getData("text/plain");
      const urlData = e.dataTransfer.getData("text/uri-list");
      
      // Î•Î»Î­Î³Ï‡Î¿Ï…Î¼Îµ Î±Î½ ÎµÎ¯Î½Î±Î¹ link movement
      try {
        const parsed = JSON.parse(dragData);
     





	 if (parsed && parsed.cat && parsed.idx !== undefined) {
        // Î‘Ï…Ï„ÏŒ ÎµÎ¯Î½Î±Î¹ internal link movement - Î´ÎµÎ½ Ï„Î¿ Ï‡ÎµÎ¹ÏÎ¹Î¶ÏŒÎ¼Î±ÏƒÏ„Îµ ÎµÎ´Ï
		return false;
        }
      } catch (ex) {
        // Î£Ï…Î½ÎµÏ‡Î¯Î¶Î¿Ï…Î¼Îµ Î³Î¹Î± external URL handling
      }
      
      // Î§ÎµÎ¹ÏÎ¹ÏƒÎ¼ÏŒÏ‚ external URLs
      const url = urlData || dragData;
   if (!url || url.startsWith('{')) return false; // Î‘Ï€Î¿Ï†ÎµÏÎ³Î¿Ï…Î¼Îµ JSON data
      
      // Î•Î»Î­Î³Ï‡Î¿Ï…Î¼Îµ Î±Î½ ÎµÎ¯Î½Î±Î¹ valid URL
      let validUrl = url;
      try {
        new URL(url);
      } catch (ex) {
        // Î‘Î½ Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ valid URL, Ï€ÏÎ¿ÏƒÏ€Î±Î¸Î¿ÏÎ¼Îµ Î½Î± Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎ¿Ï…Î¼Îµ https://
        if (!url.startsWith('http://') && !url.startsWith('https://')) {
          validUrl = 'https://' + url;
          try {
            new URL(validUrl);
          } catch (ex2) {
            console.warn('Invalid URL dropped:', url);
         return false;
          }
        } else {
          console.warn('Invalid URL dropped:', url);
          return false;
        }
      }
      
      fetchTitle(validUrl).then(title => {
        const newLink = {
          url: validUrl,
          name: title || (new URL(validUrl).hostname),
          desc: "",
          iconType: "auto",
          iconValue: ""
        };
        if (!categories[cat]) categories[cat] = [];
        categories[cat].push(newLink);
        saveData();
        render();
      }).catch(error => {
        console.error('Error fetching title for URL:', validUrl, error);
        // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¿ÏÎ¼Îµ Ï„Î¿ link Ï€Î±ÏÏŒÎ»Î± Î±Ï…Ï„Î¬
        const newLink = {
          url: validUrl,
          name: (new URL(validUrl).hostname),
          desc: "",
          iconType: "auto",
          iconValue: ""
        };
        if (!categories[cat]) categories[cat] = [];
        categories[cat].push(newLink);
        saveData();
        render();
      });
    });

    wrap.appendChild(sec);
  });
  


animateCards();
  enableCategoryDragDrop();
  enableLinkDragDrop(); // Î‘Î¥Î¤Î— Î· Î³ÏÎ±Î¼Î¼Î® Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï…Ï€Î¬ÏÏ‡ÎµÎ¹
}

/* ===============================
   ğŸ“Œ Î£Ï…Î½Î¬ÏÏ„Î·ÏƒÎ· Î³Î¹Î± Î½Î± Î²ÏÎ¯ÏƒÎºÎ¿Ï…Î¼Îµ Ï„Î¿Î½ Ï„Î¯Ï„Î»Î¿ ÏƒÎµÎ»Î¯Î´Î±Ï‚
   =============================== */
async function fetchTitle(url) {
  try {
    const res = await fetch(url, { mode: "cors" });
    const html = await res.text();
    const doc = new DOMParser().parseFromString(html, "text/html");
    return doc.querySelector("title")?.innerText.trim();
  } catch {
    return "";
  }
}

/* ===============================
   ğŸ“Œ WELCOME SOUND SYSTEM
   =============================== */

/* =====================================================================
   ğŸ”Š 6. WELCOME SOUND (Î‰Ï‡Î¿Ï‚ ÎšÎ±Î»Ï‰ÏƒÎ¿ÏÎ¯ÏƒÎ¼Î±Ï„Î¿Ï‚)
   =====================================================================
   Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± Ï€Î¿Ï… Ï€Î±Î¯Î¶ÎµÎ¹ Î­Î½Î±Î½ Î®Ï‡Î¿ ÎºÎ±Î»Ï‰ÏƒÎ¿ÏÎ¯ÏƒÎ¼Î±Ï„Î¿Ï‚ ÏƒÏ„Î¿ Ï€ÏÏÏ„Î¿ ÎºÎ»Î¹Îº Ï„Î¿Ï… Ï‡ÏÎ®ÏƒÏ„Î·.
   Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Ï„Î¿ Web Audio API Î³Î¹Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î¼ÎµÎ»Ï‰Î´Î¯Î±Ï‚ Ï‡Ï‰ÏÎ¯Ï‚ ÎµÎ¾Ï‰Ï„ÎµÏÎ¹ÎºÎ¬ Î±ÏÏ‡ÎµÎ¯Î±.
   --------------------------------------------------------------------- */
function playWelcomeSound() {
    const audio = document.getElementById('welcomeSound');
    if (audio) {
        // Î ÏÎ¿ÏƒÏ€Î±Î¸Î¿ÏÎ¼Îµ Ï€ÏÏÏ„Î± Ï„Î¿ HTML audio element
        audio.play().catch(error => {
            console.log('HTML Audio failed, trying Web Audio API fallback...');
            createWelcomeTone();
        });
    } else {
        createWelcomeTone();
    }
}

function createWelcomeTone() {
    try {
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¿ÏÎ¼Îµ Î­Î½Î± ÎµÏ…Ï‡Î¬ÏÎ¹ÏƒÏ„Î¿ "welcome" tone sequence
        const playTone = (frequency, startTime, duration) => {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(frequency, startTime);
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0, startTime);
            gainNode.gain.linearRampToValueAtTime(0.1, startTime + 0.1);
            gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + duration);
            
            oscillator.start(startTime);
            oscillator.stop(startTime + duration);
        };
        
        // Welcome melody (C - E - G - C)
        const now = audioContext.currentTime;
        playTone(261.63, now, 0.3);      // C4
        playTone(329.63, now + 0.2, 0.3); // E4
        playTone(392.00, now + 0.4, 0.3); // G4
        playTone(523.25, now + 0.6, 0.5); // C5
        
        console.log('ğŸ”Š Welcome sound played via Web Audio API');
    } catch (error) {
        console.log('Audio not supported:', error);
    }
}

/* ===============================
   ğŸ“Œ FIX 4: DOM READY HANDLING
   =============================== */

// âœ… Î’ÎµÎ»Ï„Î¹Ï‰Î¼Î­Î½Î¿ DOM ready handling
document.addEventListener('DOMContentLoaded', function() {
    // Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½
    loadData();
    loadPostitNotes();
    
    if(catOrder.length===0){
        categories={"Î•Î¹ÏƒÎ±Î³Ï‰Î³Î®":[]};
        catOrder=["Î•Î¹ÏƒÎ±Î³Ï‰Î³Î®"];
        saveData();
    }
    
    // Render
    render();
    updateUndoBtn();
    
    // Î¦ÏŒÏÏ„Ï‰ÏƒÎ· theme
    loadTheme();
    
    // Welcome sound - Î¸Î± Ï€Î±Î¯Î¾ÎµÎ¹ ÏƒÏ„Î¿ Ï€ÏÏÏ„Î¿ ÎºÎ»Î¹Îº Ï„Î¿Ï… Ï‡ÏÎ®ÏƒÏ„Î·
    let welcomeSoundPlayed = false;
    function playWelcomeSoundOnFirstClick() {
        if (!welcomeSoundPlayed) {
            welcomeSoundPlayed = true;
            playWelcomeSound();
            // Î‘Ï†Î±Î¹ÏÎ¿ÏÎ¼Îµ Ï„Î¿Î½ listener Î¼ÎµÏ„Î¬ Ï„Î¿ Ï€ÏÏÏ„Î¿ ÎºÎ»Î¹Îº
            document.removeEventListener('click', playWelcomeSoundOnFirstClick);
        }
    }
    // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· listener Î³Î¹Î± Ï„Î¿ Ï€ÏÏÏ„Î¿ ÎºÎ»Î¹Îº
    document.addEventListener('click', playWelcomeSoundOnFirstClick);
    
    // âœ… Performance optimization loaded!
    console.log('ğŸš€ Optimized Drag & Drop loaded successfully!');
    console.log('ğŸ’¡ Performance improvements:');
    console.log('   â€¢ Throttled drag operations (~60fps)');
    console.log('   â€¢ Debounced render and save operations');
    console.log('   â€¢ Fast DOM manipulation during drag');
    console.log('   â€¢ Reduced CSS transition durations');
    
    // Î¡Î¿Î»ÏŒÎ¹
    updateDateTime();
    setInterval(updateDateTime, 1000);
    
    // Help menu
    initHelpMenu();
    
    // Radio player
    initRadioPlayer();
    
    // Button heights
    setTimeout(fixButtonHeights, 100);
    
    // Subtitle
    loadSubtitle();
    
    // Î”Î¹Ï€Î»ÏŒ ÎºÎ»Î¹Îº ÏƒÏ„Î¿ ÏÎ¿Î»ÏŒÎ¹ Î³Î¹Î± ÎµÏ€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î± ÎµÏ€Ï‰Î½Ï…Î¼Î¯Î±Ï‚
    const titleWidget = document.getElementById("titleWidget");
    if (titleWidget) {
        titleWidget.addEventListener("dblclick", function() {
            const subtitleElement = document.querySelector('.titles h2');
            if (!subtitleElement) return;
            
            const currentText = subtitleElement.textContent;
            const newText = prompt("Î‘Î»Î»Î¬Î¾Ï„Îµ Ï„Î·Î½ ÎµÏ€Ï‰Î½Ï…Î¼Î¯Î±:", currentText);
            
            if (newText !== null && newText.trim() !== "") {
                saveSubtitle(newText);
            }
        });
    }
    
    // Event listeners Î³Î¹Î± Post-it
    const postitBtn = document.getElementById("postitWidgetBtn");
    const closePostit = document.getElementById("closePostit");
    const addPostitBtn = document.getElementById("addPostitBtn");
    const clearPostitBtn = document.getElementById("clearPostitBtn");
    const postitInput = document.getElementById("postitInput");
    
    if (postitBtn) postitBtn.addEventListener("click", togglePostitWidget);
    if (closePostit) closePostit.addEventListener("click", togglePostitWidget);
    if (addPostitBtn) addPostitBtn.addEventListener("click", addPostitNote);
    if (clearPostitBtn) clearPostitBtn.addEventListener("click", clearAllPostits);
    
    // Color picker event listeners
    document.querySelectorAll('.color-option').forEach(option => {
        option.addEventListener('click', function() {
            // Remove selected from all
            document.querySelectorAll('.color-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Add selected to clicked
            this.classList.add('selected');
            selectedColor = this.dataset.color;
            
            // Update textarea and date input background and text color
            const textarea = document.getElementById("postitInput");
            const dateInput = document.getElementById("postitDate");
            if (textarea) {
                textarea.style.background = selectedColor;
                // ÎšÎ±Î¸Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï‡ÏÏÎ¼Î±Ï„Î¿Ï‚ ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î²Î¬ÏƒÎµÎ¹ Ï†Ï‰Ï„ÎµÎ¹Î½ÏŒÏ„Î·Ï„Î±Ï‚ Ï†ÏŒÎ½Ï„Î¿Ï…
                const textColor = isLightColor(selectedColor) ? '#333' : '#fff';
                textarea.style.color = textColor;
            }
            if (dateInput) {
                dateInput.style.background = selectedColor;
                // ÎšÎ±Î¸Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï‡ÏÏÎ¼Î±Ï„Î¿Ï‚ ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… Î²Î¬ÏƒÎµÎ¹ Ï†Ï‰Ï„ÎµÎ¹Î½ÏŒÏ„Î·Ï„Î±Ï‚ Ï†ÏŒÎ½Ï„Î¿Ï…
                const textColor = isLightColor(selectedColor) ? '#333' : '#fff';
                dateInput.style.color = textColor;
            }
        });
    });
    
    // Set default date to today
    const dateInput = document.getElementById("postitDate");
    if (dateInput) {
        const today = new Date().toISOString().split('T')[0];
        dateInput.value = today;
    }
    
    // Auto-backup button
    const autoBackupBtn = document.getElementById("autoBackupBtn");
    if (autoBackupBtn) autoBackupBtn.addEventListener("click", showAutoBackups);
    
    // Î‘ÏÏ‡Î¹ÎºÎ® ÏÏÎ¸Î¼Î¹ÏƒÎ· Ï‡ÏÏÎ¼Î±Ï„Î¿Ï‚ ÎºÎµÎ¹Î¼Î­Î½Î¿Ï… ÏƒÏ„Î¿ Post-it textarea
    const initTextarea = document.getElementById("postitInput");
    const initDateInput = document.getElementById("postitDate");
    if (initTextarea) {
        initTextarea.style.background = selectedColor;
        const textColor = isLightColor(selectedColor) ? '#333' : '#fff';
        initTextarea.style.color = textColor;
    }
    if (initDateInput) {
        initDateInput.style.background = selectedColor;
        const textColor = isLightColor(selectedColor) ? '#333' : '#fff';
        initDateInput.style.color = textColor;
    }
    
    // Optimize images
    setTimeout(checkAndCompressExistingImages, 2000);
});

/* ===============================
   ğŸ“Œ Listeners â€” ÎšÎ¿Ï…Î¼Ï€Î¹Î¬ ÎºÎ±Î¹ Î•Î½Î­ÏÎ³ÎµÎ¹ÎµÏ‚
   =============================== */

// Modal Î½Î­Î¿ link
["addBtnTop","addBtnFoot"].forEach(id =>
  document.getElementById(id).onclick = () => {
    editing = null;
    document.getElementById("modalTitle").innerText = "ÎÎ­Î¿ link";
    document.getElementById("linkForm").reset();
    document.getElementById("iconPreview").style.display="none";
    document.getElementById("builtinIcon").style.display="none";
    document.getElementById("iconFile").style.display="none";
    document.getElementById("iconMode").value="auto";

    document.getElementById("categorySelect").innerHTML =
      catOrder.map(c=>`<option>${c}</option>`).join("");

    document.getElementById("modalForm").style.display = "flex";
  }
);

document.getElementById("cancelModal").onclick =
  () => document.getElementById("modalForm").style.display = "none";

const iconModeEl = document.getElementById("iconMode");
const builtinEl  = document.getElementById("builtinIcon");
const iconFileEl = document.getElementById("iconFile");
const iconUrlEl  = document.getElementById("iconUrl");
const iconPrev   = document.getElementById("iconPreview");
const iconPrevImg= document.getElementById("iconPreviewImg");

iconModeEl.addEventListener("change", ()=>{
  builtinEl.style.display  = iconModeEl.value==="builtin" ? "inline-block" : "none";
  iconFileEl.style.display = iconModeEl.value==="upload"  ? "inline-block" : "none";
  iconUrlEl.style.display  = iconModeEl.value==="url"     ? "inline-block" : "none";
  iconPrev.style.display   = "none";
});

builtinEl.addEventListener("change", ()=>{
  const url = builtinToDataUrl(builtinEl.value);
  iconPrevImg.src = url; 
  iconPrev.style.display="flex";
});

iconFileEl.addEventListener("change", ()=>{
  const f = iconFileEl.files && iconFileEl.files[0];
  if(!f) return;
  const r = new FileReader();
  r.onload = () => { 
    iconPrevImg.src = r.result; 
    iconPrev.style.display="flex"; 
  };
  r.readAsDataURL(f);
});

iconUrlEl.addEventListener("input", ()=>{
  const u = iconUrlEl.value.trim();
  if(u){
    iconPrevImg.src = u;
    iconPrev.style.display="flex";
  }else{
    iconPrev.style.display="none";
  }
});

function builtinToDataUrl(type){
  const map = {
    star: "â˜…",
    heart: "â¤",
    pill: "ğŸ’Š",
    firstaid: "ğŸ©¹",
    link: "ğŸ”—",
    doc: "ğŸ“„"
  };
  const emoji = map[type] || "ğŸ”—";
  const canvas = document.createElement("canvas");
  canvas.width = 64; 
  canvas.height = 64;
  const ctx = canvas.getContext("2d");
  ctx.font = "48px serif";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.fillText(emoji, 32, 32);
  return canvas.toDataURL("image/png");
}

const urlEl = document.getElementById("url"),
      nameEl = document.getElementById("name"),
      descEl = document.getElementById("desc"),
      catSel = document.getElementById("categorySelect"),
      newCatEl = document.getElementById("newCategory");

document.getElementById("linkForm").onsubmit = e => {
  e.preventDefault();
  const url = normalizeUrl(urlEl.value);
  const name = nameEl.value.trim();
  const desc = descEl.value.trim();
  if(!url){ alert("Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÎ¹ÏƒÎ¬Î³ÎµÏ„Îµ URL"); return; }

  let cat = catSel.value, newCat = newCatEl.value.trim();
  if(newCat) cat = newCat;

  if(!categories[cat]){ pushHistory(); categories[cat]=[]; catOrder.push(cat); }

  let iconType = iconModeEl.value;
  let iconValue = null;
  if(iconType==="builtin"){
    iconValue = builtinEl.value || "link";
  }else if(iconType==="upload"){
    if(iconFileEl.files && iconFileEl.files[0]){
      iconValue = iconPrevImg.src || null;
    }else{
      iconType = "auto";
    }
  }else if(iconType==="url"){
    if(iconUrlEl.value.trim()){
      iconValue = iconUrlEl.value.trim();
    }else{
      iconType = "auto";
    }
  }

  pushHistory();
  const baseObj = { url, name, desc, iconType, iconValue };
  if(editing){
    const prev = categories[editing.cat][editing.idx] || {};
    const updated = { ...baseObj, pinned: !!prev.pinned };
    categories[editing.cat][editing.idx] = updated;
  }else{
    const linkObj = { ...baseObj, pinned:false };
    dedupeAdd(cat, linkObj);
  }

  saveData(); render();
  document.getElementById("modalForm").style.display = "none";
};

document.addEventListener("click", e => {
  const target = e.target;

  if (target.closest(".menu-btn")) {
    const btn = target.closest(".menu-btn");
    const menu = btn.nextElementSibling;
    document.querySelectorAll(".menu-popup").forEach(m => {
      if (m !== menu) m.style.display = "none";
    });
    menu.style.display = (menu.style.display === "flex" ? "none" : "flex");
    return;
  }

  if (!target.closest(".menu-popup")) {
    document.querySelectorAll(".menu-popup").forEach(m => m.style.display = "none");
  }

  if (target.closest(".delete")) {
    const c = target.closest(".card");
    const catName = c.dataset.cat;
    pushHistory();
    categories[catName].splice(+c.dataset.idx, 1);
    if (categories[catName].length === 0) {
      delete categories[catName];
      catOrder = catOrder.filter(x => x !== catName);
    }
    saveData();
    render();
    return;
  }

  if (target.closest(".edit")) {
    const c = target.closest(".card");
    editing = { cat: c.dataset.cat, idx: +c.dataset.idx };
    const l = categories[editing.cat][editing.idx];

    urlEl.value = l.url;
    nameEl.value = l.name || "";
    descEl.value = l.desc || "";
    catSel.innerHTML = catOrder.map(x =>
      `<option ${x === editing.cat ? "selected" : ""}>${x}</option>`
    ).join("");
    newCatEl.value = "";

    iconModeEl.value = l.iconType || "auto";
    builtinEl.style.display = iconModeEl.value === "builtin" ? "inline-block" : "none";
    iconFileEl.style.display = iconModeEl.value === "upload" ? "inline-block" : "none";
    iconPrev.style.display = "none";
    if (l.iconType === "builtin") {
      builtinEl.value = l.iconValue || "link";
      iconPrevImg.src = builtinToDataUrl(builtinEl.value);
      iconPrev.style.display = "flex";
    } else if (l.iconType === "upload" && l.iconValue) {
      iconPrevImg.src = l.iconValue;
      iconPrev.style.display = "flex";
    }

    document.getElementById("modalTitle").innerText = "Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î± link";
    document.getElementById("modalForm").style.display = "flex";
    return;
  }

  if (target.closest(".rename")) {
    const cat = target.closest(".category").dataset.cat;
    const newN = prompt("ÎÎ­Î¿ ÏŒÎ½Î¿Î¼Î±:", cat);
    if (newN && newN !== cat) {
      pushHistory();
      categories[newN] = categories[cat];
      delete categories[cat];
      catOrder[catOrder.indexOf(cat)] = newN;
      saveData();
      render();
    }
    return;
  }

  if (target.closest(".delcat")) {
    const cat = target.closest(".category").dataset.cat;
    if (confirm("Î”Î¹Î±Î³ÏÎ±Ï†Î® " + cat + ";")) {
      pushHistory();
      delete categories[cat];
      catOrder = catOrder.filter(c => c !== cat);
      saveData();
      render();
    }
    return;
  }

  if (target.closest(".pin")) {
    const card = target.closest(".card");
    const cat = card.dataset.cat;
    const idx = +card.dataset.idx;
    const item = categories[cat][idx];
    if (!item) return;
    pushHistory();
    item.pinned = !item.pinned;
    saveData();
    render();
    return;
  }
});

/* ===============================
   ğŸ“Œ Î•Î»Î­Î³Ï‡ÎµÎ¹ ÎºÎ±Î¹ ÏƒÏ…Î¼Ï€Î¹Î­Î¶ÎµÎ¹ Î¼ÎµÎ³Î¬Î»ÎµÏ‚ ÎµÎ¹ÎºÏŒÎ½ÎµÏ‚
   =============================== */
function compressImageIfNeeded(dataUrl, maxWidth = 64, maxHeight = 64, quality = 0.8) {
  return new Promise((resolve) => {
    const img = new Image();
    img.onload = function() {
      if (img.width <= maxWidth && img.height <= maxHeight) {
        resolve(dataUrl);
        return;
      }

      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      
      let width = img.width;
      let height = img.height;
      
      if (width > height) {
        if (width > maxWidth) {
          height = Math.round((height * maxWidth) / width);
          width = maxWidth;
        }
      } else {
        if (height > maxHeight) {
          width = Math.round((width * maxHeight) / height);
          height = maxHeight;
        }
      }
      
      canvas.width = width;
      canvas.height = height;
      
      ctx.drawImage(img, 0, 0, width, height);
      resolve(canvas.toDataURL('image/png', quality));
    };
    
    img.onerror = function() {
      resolve('assets/default-favicon.png');
    };
    
    img.src = dataUrl;
  });
}

function checkAndCompressExistingImages() {
  Object.keys(categories).forEach(cat => {
    categories[cat].forEach(async (link) => {
      if (link.iconType === "upload" && link.iconValue && 
          link.iconValue.startsWith('data:image') && 
          link.iconValue.length > 10000) {
        
        console.log("Î£Ï…Î¼Ï€Î¯ÎµÏƒÎ· Î¼ÎµÎ³Î¬Î»Î·Ï‚ ÎµÎ¹ÎºÏŒÎ½Î±Ï‚ ÏƒÎµ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±:", cat);
        link.iconValue = await compressImageIfNeeded(link.iconValue, 64, 64, 0.7);
        saveData();
      }
    });
  });
}

/* ===============================
   ğŸ“Œ Backup & Restore
   =============================== */
document.getElementById("backupBtn").onclick=()=>{
  const blob=new Blob([JSON.stringify({
    categories,catOrder,theme:getTheme(),postitNotes,version:4
  },null,2)],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="bookmarks_and_notes_backup.json";
  a.click();
};

document.getElementById("restoreBtn").onclick=()=>{
  const choice = confirm("OK: Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ Î±Ï€ÏŒ JSON backup\nCancel: Î•Î¹ÏƒÎ±Î³Ï‰Î³Î® Î±Ï€ÏŒ HTML ÏƒÎµÎ»Î¹Î´Î¿Î´ÎµÎ¯ÎºÏ„ÎµÏ‚");
  const inp=document.createElement("input");
  inp.type="file"; inp.accept = choice ? ".json" : ".html,.htm,.txt";
  inp.onchange=()=>{
    const r=new FileReader();
    r.onload=()=>{
      if(choice){
        try{
          const d=JSON.parse(r.result);
          if(d.categories && d.catOrder){
            pushHistory();
            categories=d.categories;catOrder=d.catOrder;
            if(d.postitNotes) {
              postitNotes = d.postitNotes;
              savePostitNotes();
            }
            if(d.theme){applyTheme(d.theme);saveTheme(d.theme);}
            saveData(); render(); loadPostitNotes(); updateUndoBtn();
            alert("âœ… Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ Î¿Î»Î¿ÎºÎ»Î·ÏÏÎ¸Î·ÎºÎµ!");
          } else { alert("ÎœÎ· Î­Î³ÎºÏ…ÏÎ¿ JSON."); }
        }catch{ alert("ÎœÎ· Î­Î³ÎºÏ…ÏÎ¿ JSON."); }
      } else {
        const merge = confirm("OK: Î£Ï…Î³Ï‡ÏÎ½ÎµÏ…ÏƒÎ·\nCancel: Î‘Î½Ï„Î¹ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·");
        const parser = new DOMParser();
        const doc = parser.parseFromString(r.result,"text/html");
        const anchors = Array.from(doc.querySelectorAll("a[href]"));
        if(anchors.length===0){ alert("Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ links ÏƒÏ„Î¿ HTML."); return; }
        if(!merge){ pushHistory(); categories={}; catOrder=[]; }

        function closestHeading(el){
          let cur=el; for(let i=0;i<4 && cur;i++, cur=cur.previousElementSibling){
            if(/H[1-3]/.test(cur.tagName)) return cur.textContent.trim();
          }
          let p=el.parentElement; while(p){
            const h = p.querySelector("h3,h2,h1"); if(h) return h.textContent.trim();
            p=p.parentElement;
          }
          return "Î•Î¹ÏƒÎ±Î³Ï‰Î³Î®";
        }

        let added=0;
        anchors.forEach(a=>{
          let href=a.getAttribute("href")||"";
          if(!href) return;
          if(!/^https?:\/\//i.test(href) && !/^www\./i.test(href)) return;
          const url = normalizeUrl(href);
          const name = (a.getAttribute("title")||a.textContent||"").trim();
          const desc = "";
          const cat = closestHeading(a);
          if(!(categories[cat])){ categories[cat]=[]; catOrder.push(cat); }
          const ok = dedupeAdd(cat, {url,name,desc,iconType:"auto",iconValue:null,pinned:false});
          if(ok) added++;
        });

        saveData(); render(); updateUndoBtn();
        alert("Î•Î¹ÏƒÎ±Î³Ï‰Î³Î® HTML Î¿Î»Î¿ÎºÎ»Î·ÏÏÎ¸Î·ÎºÎµ. Î ÏÎ¿ÏƒÏ„Î­Î¸Î·ÎºÎ±Î½ "+added+" links.");
      }
    };
    r.readAsText(inp.files[0]);
  };
  inp.click();
};

/* ===============================
   ğŸ“Œ Î Î±Î»Î­Ï„Î± Î§ÏÏ‰Î¼Î¬Ï„Ï‰Î½
   =============================== */
document.getElementById("paletteBtn").onclick=
  ()=>document.getElementById("paletteModal").style.display="flex";
document.getElementById("closePalette").onclick=
  ()=>document.getElementById("paletteModal").style.display="none";

["bg1","bg2","card","text","accent"].forEach(id=>{
  const el = document.getElementById(id);
  if(!el) return;
  el.oninput=e=>{
    document.documentElement.style.setProperty("--"+id,e.target.value);
    const sw = document.getElementById('preview-'+id);
    if(sw) sw.style.background = e.target.value;
    pushHistory();
    saveTheme(getTheme());
  };
});

document.getElementById("defaultPalette").onclick=()=>{
  applyTheme(themeDefault);
  saveTheme(themeDefault);
  ["bg1","bg2","card","text","accent"].forEach(id=>{
    const el=document.getElementById(id);
    if(el) el.value = themeDefault[id];
    const sw = document.getElementById('preview-'+id);
    if(sw) sw.style.background = themeDefault[id];
  });
  pushHistory();
};

document.getElementById("undoBtnTop").onclick=undo;

/* ===============================
   ğŸ“Œ FIX 1 COMPLETION: Drag & Drop ÎŸÎ›ÎŸÎšÎ›Î—Î¡Î©Î£Î—
   =============================== */

// âœ… Î’ÎŸÎ—Î˜Î—Î¤Î™ÎšÎ•Î£ Î£Î¥ÎÎ‘Î¡Î¤Î—Î£Î•Î™Î£ Î“Î™Î‘ Î’Î•Î›Î¤Î™Î£Î¤ÎŸÎ ÎŸÎ™Î—Î£Î—
function throttle(func, delay) {
  let timeoutId;
  let lastExecTime = 0;
  return function (...args) {
    const currentTime = Date.now();
    
    if (currentTime - lastExecTime > delay) {
      func.apply(this, args);
      lastExecTime = currentTime;
    } else {
      clearTimeout(timeoutId);
      timeoutId = setTimeout(() => {
        func.apply(this, args);
        lastExecTime = Date.now();
      }, delay - (currentTime - lastExecTime));
    }
  };
}

function debounce(func, delay) {
  let timeoutId;
  return function (...args) {
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => func.apply(this, args), delay);
  };
}

/* =====================================================================
   ğŸ¯ 3. DRAG & DROP Î›Î•Î™Î¤ÎŸÎ¥Î¡Î“Î™Î•Î£ Î“Î™Î‘ LINKS
   =====================================================================
   Î‘Ï…Ï„Î® Î· Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹:
   - ÎœÎµÏ„Î±ÎºÎ¯Î½Î·ÏƒÎ· links Î¼Î­ÏƒÎ± ÏƒÏ„Î·Î½ Î¯Î´Î¹Î± ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±
   - ÎœÎµÏ„Î±ÎºÎ¯Î½Î·ÏƒÎ· links Î±Ï€ÏŒ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î± ÏƒÎµ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±
   - Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î½Î­Ï‰Î½ links Î¼Îµ drag Î±Ï€ÏŒ ÎµÎ¾Ï‰Ï„ÎµÏÎ¹ÎºÎ­Ï‚ ÏƒÎµÎ»Î¯Î´ÎµÏ‚
   - ÎŸÏ€Ï„Î¹ÎºÎ® Î±Î½Î±Ï„ÏÎ¿Ï†Î¿Î´ÏŒÏ„Î·ÏƒÎ· ÎºÎ±Ï„Î¬ Ï„Î¿ drag
   --------------------------------------------------------------------- */
function enableLinkDragDrop() {
  let dragSrc = null;
  
  // Î’ÎµÎ»Ï„Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Î¼Î­Î½ÎµÏ‚ ÎµÎºÎ´ÏŒÏƒÎµÎ¹Ï‚ Ï„Ï‰Î½ Î²Î±ÏÎ­Ï‰Î½ ÏƒÏ…Î½Î±ÏÏ„Î®ÏƒÎµÏ‰Î½
  const debouncedRender = debounce(render, 50);
  const debouncedSave = debounce(saveData, 200);
  
  const throttledDragover = throttle((e) => {
    if (!dragSrc) {
  e.preventDefault();
  return false;
}
 
    const targetCard = e.target.closest(".card");
    const targetCategory = e.target.closest(".category");
    const targetGrid = e.target.closest(".grid");
    
    // ÎšÎ±Î¸Î±ÏÎ¯Î¶Î¿Ï…Î¼Îµ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿Ï…Ï‚ drop indicators
    document.querySelectorAll('.drop-indicator').forEach(el => el.remove());
    document.querySelectorAll('.card.drop-target').forEach(el => el.classList.remove('drop-target'));
    document.querySelectorAll('.category.drop-target').forEach(el => el.classList.remove('drop-target'));
    
    if (targetCard && targetCard !== dragSrc) {
      e.dataTransfer.dropEffect = 'move';
      targetCard.classList.add('drop-target');
      
      // Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¿ÏÎ¼Îµ drop indicator Î³Î¹Î± precise positioning
      const rect = targetCard.getBoundingClientRect();
      const mouseY = e.clientY;
      const isAfter = mouseY > rect.top + rect.height / 2;
      
      const indicator = document.createElement('div');
      indicator.className = 'drop-indicator';
      indicator.style.cssText = `
        position: absolute;
        height: 3px;
        background: #007acc;
        border-radius: 2px;
        left: ${rect.left}px;
        width: ${rect.width}px;
        top: ${isAfter ? rect.bottom - 1 : rect.top - 2}px;
        z-index: 1000;
        pointer-events: none;
      `;
      document.body.appendChild(indicator);
      
    } else if (targetGrid && !targetCard) {
      e.dataTransfer.dropEffect = 'move';
      if (targetCategory) {
        targetCategory.classList.add('drop-target');
      }
    }
  }, 16); // ~60fps
  
  document.addEventListener("dragstart", e => {
    const card = e.target.closest(".card");
    if (card && card.draggable) {
      dragSrc = card;
      e.dataTransfer.setData("text/plain", JSON.stringify({
        cat: card.dataset.cat,
        idx: card.dataset.idx,
        type: "link-move" // Î¤Î±Ï…Ï„ÏŒÏ„Î·Ï„Î± Î³Î¹Î± link movement
      }));
      e.dataTransfer.effectAllowed = 'move';
      card.classList.add("dragging");
      
      // Î ÏÎ¿ÏƒÎ¸Î­Ï„Î¿Ï…Î¼Îµ visual feedback
      card.style.opacity = '0.5';
      console.log('ğŸ”„ Drag started for link:', card.dataset.cat, card.dataset.idx);
    }
  });
  
  document.addEventListener("dragend", e => {
    const card = e.target.closest(".card");
    if (card) {
      card.classList.remove("dragging", "drop-target");
      card.style.opacity = '';
    }
    
    // ÎšÎ±Î¸Î±ÏÎ¯Î¶Î¿Ï…Î¼Îµ ÏŒÎ»Î¿Ï…Ï‚ Ï„Î¿Ï…Ï‚ indicators
    document.querySelectorAll('.drop-indicator').forEach(el => el.remove());
    document.querySelectorAll('.card.drop-target').forEach(el => el.classList.remove('drop-target'));
    document.querySelectorAll('.category.drop-target').forEach(el => el.classList.remove('drop-target'));
    
    dragSrc = null;
  });
  
  document.addEventListener("dragover", throttledDragover);
  
 document.addEventListener("drop", e => {
  e.preventDefault();    // âœ… ÎœÎ•Î¤Î‘ÎšÎ™ÎÎ—Î£Î— Î•Î”Î©Î©Î©!
  
  document.querySelectorAll('.drop-indicator').forEach(el => el.remove());
  document.querySelectorAll('.card.drop-target').forEach(el => el.classList.remove('drop-target'));
  document.querySelectorAll('.category.internal-drag-over').forEach(el => el.classList.remove('internal-drag-over'));
  
  if (!dragSrc) return;  // âœ… Î¤Î©Î¡Î‘ ÎœÎ ÎŸÎ¡Î•Î™ ÎÎ‘ ÎšÎ‘ÎÎ•Î™ RETURN ÎœÎ•Î¤Î‘ Î¤ÎŸ PREVENT
    
    try {
      const dragDataStr = e.dataTransfer.getData("text/plain");
      if (!dragDataStr) {
  e.preventDefault();
  return false;
}
      
      let dragData;
      try {
        dragData = JSON.parse(dragDataStr);
      } catch (ex) {
        // Î”ÎµÎ½ ÎµÎ¯Î½Î±Î¹ JSON, Î¬ÏÎ± Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ link movement
        e.preventDefault();
return false;
      }
      
      // Î•Î»Î­Î³Ï‡Î¿Ï…Î¼Îµ Î±Î½ ÎµÎ¯Î½Î±Î¹ link movement
      if (!dragData || dragData.type !== "link-move") {
  e.preventDefault();
  return false;
}
      
      const sourceCat = dragData.cat;
      const sourceIdx = parseInt(dragData.idx);
      
      const targetCard = e.target.closest(".card");
      const targetCategory = e.target.closest(".category");
      const targetGrid = e.target.closest(".grid");
      
      if (!targetCard && !targetGrid) return;
      
      let targetCat;
      let targetIdx;
      
      if (targetCard) {
        targetCat = targetCard.dataset.cat;
        targetIdx = parseInt(targetCard.dataset.idx);
        
        // Determine if we should insert before or after based on mouse position
        const rect = targetCard.getBoundingClientRect();
        const mouseY = e.clientY;
        const isAfter = mouseY > rect.top + rect.height / 2;
        
        if (isAfter) {
          targetIdx++;
        }
      } else if (targetGrid) {
        targetCat = targetGrid.dataset.cat;
        targetIdx = categories[targetCat] ? categories[targetCat].length : 0;
      }
      
      // Î‘Ï€Î¿Ï†ÎµÏÎ³Î¿Ï…Î¼Îµ Ï„Î·Î½ Î¯Î´Î¹Î± Î¸Î­ÏƒÎ·
      if (sourceCat === targetCat && sourceIdx === targetIdx) {
        return;
      }
      
      // Î•ÎºÏ„ÎµÎ»Î¿ÏÎ¼Îµ Ï„Î· Î¼ÎµÏ„Î±ÎºÎ¯Î½Î·ÏƒÎ·
      pushHistory();
      
      const sourceItems = categories[sourceCat];
      if (!sourceItems || sourceIdx >= sourceItems.length) {
        console.error('Invalid source item:', sourceCat, sourceIdx);
        return;
      }
      
      const [movedItem] = sourceItems.splice(sourceIdx, 1);
      if (!movedItem) {
        console.error('Failed to extract moved item');
        return;
      }
      
      // Î ÏÎ¿ÏƒÎ±ÏÎ¼ÏŒÎ¶Î¿Ï…Î¼Îµ target index Î±Î½ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹
      if (targetCat === sourceCat && targetIdx > sourceIdx) {
        targetIdx--;
      }
      
      if (!categories[targetCat]) {
        categories[targetCat] = [];
      }
      
      categories[targetCat].splice(targetIdx, 0, movedItem);
      
      console.log(`âœ… Link moved from ${sourceCat}[${sourceIdx}] to ${targetCat}[${targetIdx}]`);
      
      // Î§ÏÎ®ÏƒÎ· Î²ÎµÎ»Ï„Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Ï‰Î½ ÏƒÏ…Î½Î±ÏÏ„Î®ÏƒÎµÏ‰Î½
      debouncedSave();
      debouncedRender();
      
    } catch (error) {
      console.error('âŒ Drop error:', error);
    }
    
    dragSrc = null;
  });
  
  console.log('ğŸš€ Enhanced Link Drag & Drop enabled!');
}

/* =====================================================================
   ğŸ“ 4. DRAG & DROP Î›Î•Î™Î¤ÎŸÎ¥Î¡Î“Î™Î•Î£ Î“Î™Î‘ ÎšÎ‘Î¤Î—Î“ÎŸÎ¡Î™Î•Î£
   =====================================================================
   Î‘Ï…Ï„Î® Î· Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î·Î½ Î±Î½Î±Î´Î¹Î¬Ï„Î±Î¾Î· Ï„Ï‰Î½ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¹ÏÎ½ Î¼Îµ drag & drop.
   ÎŸÎ¹ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚ Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Î¼ÎµÏ„Î±ÎºÎ¹Î½Î·Î¸Î¿ÏÎ½ ÏƒÎµ Î¿Ï€Î¿Î¹Î±Î´Î®Ï€Î¿Ï„Îµ ÏƒÎµÎ¹ÏÎ¬ Î¸Î­Î»ÎµÎ¹ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚.
   --------------------------------------------------------------------- */
function enableCategoryDragDrop() {
  const wrap = document.getElementById("categories");
  if (!wrap) return;

  // Î’ÎµÎ»Ï„Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Î¼Î­Î½ÎµÏ‚ ÎµÎºÎ´ÏŒÏƒÎµÎ¹Ï‚
  const debouncedSave = debounce(saveData, 200);
  
  // Throttled dragover Î³Î¹Î± ÎºÎ±Î»ÏÏ„ÎµÏÎ· Î±Ï€ÏŒÎ´Î¿ÏƒÎ·
  const throttledCategoryDragover = throttle((e) => {
    e.preventDefault();
    const dragging = document.querySelector(".category.dragging");
    if (!dragging) return;
    
    const others = [...wrap.querySelectorAll(".category:not(.dragging)")];
    const after = others.find(el => {
      const rect = el.getBoundingClientRect();
      const offset = e.clientY - rect.top - rect.height / 2;
      return offset < 0;
    });
    
    if (after) {
      wrap.insertBefore(dragging, after);
    } else {
      wrap.appendChild(dragging);
    }
  }, 33); // ~30fps Î³Î¹Î± ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚ (Î»Î¹Î³ÏŒÏ„ÎµÏÎ¿ ÏƒÏ…Ï‡Î½Î¬)




// Î‘Ï€ÏŒÎ»Ï…Ï„Î· Ï€ÏÎ¿ÏƒÏ„Î±ÏƒÎ¯Î± Î±Ï€ÏŒ ÏƒÏ…Î½Ï„Î¿Î¼ÎµÏÏƒÎµÎ¹Ï‚ - ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ Î Î¡Î™Î ÏŒÎ»Î¿Ï…Ï‚ Ï„Î¿Ï…Ï‚ Î¬Î»Î»Î¿Ï…Ï‚ handlers
document.addEventListener('drop', function(e) {
  // Î Î¬Î½Ï„Î± Î±Ï€Î¿Ï„ÏÎ­Ï€Î¿Ï…Î¼Îµ Ï„Î¿ default browser behavior (shortcuts)
  e.preventDefault();
}, true); // true = capture phase, ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ Ï€ÏÏÏ„Î¿Ï‚

// ÎœÎµÏ„Î¬ Î±Ï†Î®Î½Î¿Ï…Î¼Îµ Ï„Î¿Ï…Ï‚ specific handlers Î½Î± ÎºÎ¬Î½Î¿Ï…Î½ Ï„Î· Î´Î¿Ï…Î»ÎµÎ¹Î¬ Ï„Î¿Ï…Ï‚
document.addEventListener('drop', function(e) {
  // Î‘Ï…Ï„ÏŒÏ‚ Î¿ handler Î´ÎµÎ½ ÎºÎ¬Î½ÎµÎ¹ Ï„Î¯Ï€Î¿Ï„Î± - Î±Ï€Î»ÏÏ‚ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î³Î¹Î± ÏƒÏ…Î¼Î²Î±Ï„ÏŒÏ„Î·Ï„Î±
}, false);

  
 
 
 
  document.querySelectorAll(".category").forEach(catEl => {
    catEl.addEventListener("dragstart", e => {
     e.dataTransfer.setData("text/plain", JSON.stringify({
  cat: catEl.dataset.cat,
  type: "category-move"
}));
      e.dataTransfer.effectAllowed = 'move';
      catEl.classList.add("dragging");
    });
    
    catEl.addEventListener("dragend", () => {
      catEl.classList.remove("dragging");
    });
  });

  wrap.addEventListener("dragover", throttledCategoryDragover);

  wrap.addEventListener("drop", e => {
    e.preventDefault();
    const newOrder = [...wrap.querySelectorAll(".category")].map(el => el.dataset.cat);
    if (JSON.stringify(newOrder) !== JSON.stringify(catOrder)) {
      pushHistory();
      catOrder = newOrder;
      debouncedSave(); // Î§ÏÎ®ÏƒÎ· Î²ÎµÎ»Ï„Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î·Ï‚ ÎµÎºÎ´ÏŒÏƒÎ·Ï‚
    }
  });
}
/* ===============================
   ğŸ“Œ Î˜Î­Î¼Î±Ï„Î±
   =============================== */
const themes = {
  dark: { bg1:"#0d1b2a", bg2:"#1b263b", card:"#415a77", text:"#e0e1dd", accent:"#00bcd4" },
  light: { bg1:"#f0f4f8", bg2:"#ffffff", card:"#e0e7ef", text:"#2c3e50", accent:"#1565c0" },
  green: { bg1:"#2b2f24", bg2:"#3b4330", card:"#5a6b4c", text:"#f2f5e9", accent:"#a4c639" },
  brown: { bg1:"#332020", bg2:"#4a2b2b", card:"#663d3d", text:"#faeeee", accent:"#e57373"},
  purple: { bg1:"#2a1f38", bg2:"#3a2b4d", card:"#513d66", text:"#f5edf9", accent:"#ba68c8" },
  blue: { bg1:"#102840", bg2:"#16324f", card:"#1e4060", text:"#e3f2fd", accent:"#64b5f6" },
  orange: { bg1:"#402010", bg2:"#5a2b15", card:"#73381c", text:"#fff3e0", accent:"#ffb74d" },
  pink: { bg1:"#3d1f2b", bg2:"#522a3d", card:"#66384e", text:"#fce4ec", accent:"#f48fb1" }
};

function applyTheme(t){
  for(const [k,v] of Object.entries(t)){
    document.documentElement.style.setProperty("--"+k, v);
  }
}

function getTheme(){
  const cs = getComputedStyle(document.documentElement);
  return {
    bg1: cs.getPropertyValue("--bg1").trim(),
    bg2: cs.getPropertyValue("--bg2").trim(),
    card: cs.getPropertyValue("--card").trim(),
    text: cs.getPropertyValue("--text").trim(),
    accent: cs.getPropertyValue("--accent").trim()
  };
}

function changeTheme(theme) {
    const root = document.documentElement;
    const helpBtn = document.getElementById('helpBtn');
    
    root.className = '';
    
    if (theme !== 'default') {
        root.classList.add(theme + '-theme');
    }
    
    if (helpBtn) {
        helpBtn.classList.remove('default', 'dark', 'light', 'green', 'brown', 'purple', 'blue', 'orange', 'pink');
        helpBtn.classList.add(theme);
    }
    
    localStorage.setItem('selectedTheme', theme);
}

function saveTheme(nameOrObj){ 
  if(typeof nameOrObj === "string"){
    localStorage.setItem("themeName", nameOrObj);
    localStorage.removeItem("customTheme");
  } else {
    localStorage.setItem("themeName", "custom");
    localStorage.setItem("customTheme", JSON.stringify(nameOrObj));
  }
}

function loadTheme(){
  let name = localStorage.getItem("themeName") || "dark";
  let t = null;

  if(name === "custom"){
    t = JSON.parse(localStorage.getItem("customTheme") || "null");
    if(t) applyTheme(t);
  } else {
    t = themes[name] || themes.dark;
    applyTheme(t);
  }

  const helpBtn = document.getElementById('helpBtn');
  if (helpBtn) {
    helpBtn.classList.remove('default', 'dark', 'light', 'green', 'brown', 'purple', 'blue', 'orange', 'pink');
    helpBtn.classList.add(name === 'custom' ? 'default' : name);
  }

  const sel = document.getElementById("themeSelect");
  if(sel){
    if(name === "custom"){
      if(![...sel.options].some(o => o.value === "custom")){
        sel.add(new Option("Custom", "custom"));
      }
      sel.value = "custom";
    } else {
      sel.value = name;
    }
  }
}

document.getElementById("themeSelect").addEventListener("change", e => {
  let chosen = e.target.value;
  if(themes[chosen]){
    applyTheme(themes[chosen]);
    saveTheme(chosen);
    changeTheme(chosen);
  }
});

/* ===============================
   ğŸ“Œ Auto-Backup System
   =============================== */

function createAutoBackup() {
  const backupData = {
    categories: JSON.parse(JSON.stringify(categories)),
    catOrder: [...catOrder],
    theme: getTheme(),
    postitNotes: JSON.parse(JSON.stringify(postitNotes)),
    timestamp: new Date().toLocaleString('el-GR')
  };
  
  let backups = JSON.parse(localStorage.getItem("autoBackups") || "[]");
  backups.unshift(backupData);
  
  if (backups.length > 5) {
    backups = backups.slice(0, 5);
  }
  
  localStorage.setItem("autoBackups", JSON.stringify(backups));
  // ÎœÏŒÎ½Î¿ debug info, ÏŒÏ‡Î¹ ÏƒÏ„Î¿ production console
  if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
    console.log("Auto-backup created:", backupData.timestamp);
  }
}

function restoreAutoBackup(index) {
  const backups = JSON.parse(localStorage.getItem("autoBackups") || "[]");
  
  if (index < 0 || index >= backups.length) {
    alert("ÎœÎ· Î­Î³ÎºÏ…ÏÎ· ÎµÏ€Î¹Î»Î¿Î³Î® backup!");
    return;
  }
  
  const backup = backups[index];
  
  if (confirm(`Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ Î±Ï€ÏŒ backup Ï„Î·Ï‚ ${backup.timestamp}`)) {
    pushHistory();
    
    categories = {};
    catOrder = [];
    
    Object.keys(backup.categories || {}).forEach(cat => {
      categories[cat] = (backup.categories[cat] || []).map(link => ({
        url: link.url || "",
        name: link.name || "",
        desc: link.desc || "",
        iconType: link.iconType || "auto",
        iconValue: link.iconValue || null,
        pinned: !!link.pinned
      }));
      catOrder.push(cat);
    });
    
    if (backup.postitNotes) {
      postitNotes = JSON.parse(JSON.stringify(backup.postitNotes));
      savePostitNotes();
    }
    
    if (backup.theme) {
      applyTheme(backup.theme);
      saveTheme(backup.theme);
    }
    
    setTimeout(async () => {
      await optimizeAllExistingIcons();
      saveData();
      render();
      loadPostitNotes();
      updateUndoBtn();
      alert("âœ… Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ Î¿Î»Î¿ÎºÎ»Î·ÏÏÎ¸Î·ÎºÎµ!");
    }, 100);
  }
}

const originalSaveData = saveData;
saveData = function() {
  originalSaveData();
  createAutoBackup();
};

setTimeout(createAutoBackup, 1000);

/* ===============================
   ğŸ“Œ Palette row styling
   =============================== */
document.querySelectorAll("input[type=color]").forEach(input => {
  const preview = document.getElementById("preview-" + input.id);
  if (preview) {
    preview.style.background = input.value;

    input.addEventListener("input", () => {
      preview.style.background = input.value;
    });

    preview.addEventListener("click", () => input.click());

    const label = document.querySelector("label[for=" + input.id + "]");
    if (label) {
      label.addEventListener("click", () => input.click());
    }
  }
});

["bg1","bg2","card","text","accent"].forEach(id=>{
  const el=document.getElementById(id);
  const sw=document.getElementById('preview-'+id);
  if(el && sw) sw.style.background = el.value || getTheme()[id];
});

/* ===============================
   ğŸ“Œ Î¡ÎŸÎ›ÎŸÎ™ - Î—ÎœÎ•Î¡ÎŸÎœÎ—ÎÎ™Î‘
   =============================== */
function updateDateTime() {
  const now = new Date();
  
  const days = ['ÎšÏ…ÏÎ¹Î±ÎºÎ®', 'Î”ÎµÏ…Ï„Î­ÏÎ±', 'Î¤ÏÎ¯Ï„Î·', 'Î¤ÎµÏ„Î¬ÏÏ„Î·', 'Î Î­Î¼Ï€Ï„Î·', 'Î Î±ÏÎ±ÏƒÎºÎµÏ…Î®', 'Î£Î¬Î²Î²Î±Ï„Î¿'];
  const months = ['Î™Î±Î½Î¿Ï…Î±ÏÎ¯Î¿Ï…', 'Î¦ÎµÎ²ÏÎ¿Ï…Î±ÏÎ¯Î¿Ï…', 'ÎœÎ±ÏÏ„Î¯Î¿Ï…', 'Î‘Ï€ÏÎ¹Î»Î¯Î¿Ï…', 'ÎœÎ±ÎÎ¿Ï…', 'Î™Î¿Ï…Î½Î¯Î¿Ï…', 
                 'Î™Î¿Ï…Î»Î¯Î¿Ï…', 'Î‘Ï…Î³Î¿ÏÏƒÏ„Î¿Ï…', 'Î£ÎµÏ€Ï„ÎµÎ¼Î²ÏÎ¯Î¿Ï…', 'ÎŸÎºÏ„Ï‰Î²ÏÎ¯Î¿Ï…', 'ÎÎ¿ÎµÎ¼Î²ÏÎ¯Î¿Ï…', 'Î”ÎµÎºÎµÎ¼Î²ÏÎ¯Î¿Ï…'];
  
  const time = now.toLocaleTimeString('el-GR', { 
    hour: '2-digit', 
    minute: '2-digit', 
    second: '2-digit' 
  });
  
  const dayName = days[now.getDay()];
  const day = now.getDate();
  const monthName = months[now.getMonth()];
  const year = now.getFullYear();
  
  const date = `${dayName}, ${day} ${monthName} ${year}`;
  
  const timeEl = document.getElementById('currentTime');
  const dateEl = document.getElementById('currentDate');
  
  if (timeEl) timeEl.textContent = time;
  if (dateEl) dateEl.textContent = date;
}

/* =====================================================================
   ğŸµ 5. ZUCCARADIO RADIO PLAYER
   =====================================================================
   Î•Î´Ï Ï…Î»Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ Ï„Î¿ ÏÎ±Î´Î¹ÏŒÏ†Ï‰Î½Î¿ Zuccaradio:
   - Î Î±ÏÏƒÎ·/Î‘Î½Î±Ï€Î±ÏÎ±Î³Ï‰Î³Î®
   - ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î­Î½Ï„Î±ÏƒÎ·Ï‚
   - Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½ Ï„ÏÎ±Î³Î¿Ï…Î´Î¹Î¿Ï
   - Auto-retry ÏƒÎµ Ï€ÎµÏÎ¯Ï€Ï„Ï‰ÏƒÎ· ÏƒÏ†Î¬Î»Î¼Î±Ï„Î¿Ï‚
   --------------------------------------------------------------------- */

let radioPlayer = null;
let isRadioPlaying = false;
let radioAudio = null;
let radioInterface = null;

function initRadioPlayer() {
    createRadioInterface();
    
    const zuccaradioBtn = document.getElementById("zuccaradioBtn");
    if (zuccaradioBtn) {
        zuccaradioBtn.addEventListener("click", toggleRadioInterface);
    }
}

function createRadioInterface() {
    radioInterface = document.createElement('div');
    radioInterface.className = 'radio-player';
    radioInterface.style.cssText = `
        position: fixed;
        top: 10px;
        left: 10px;
        transform: none;
        background: rgba(30, 30, 30, 0.3);
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 14px;
        padding: 16px;
        z-index: 10000;
        display: none;
        min-width: 250px;
        max-width: 250px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4), inset 0 1px 1px rgba(255, 255, 255, 0.05);
        color: var(--text);
        overflow: hidden;
    `;
    
    radioInterface.innerHTML = `
        <button class="close-radio" style="
            position: absolute;
            top: 8px;
            right: 8px;
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: var(--text);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        ">&times;</button>
        
        <h3 style="margin: 0 0 12px 0; text-align: center; color: var(--accent); font-size: 16px;">ğŸµ Zuccaradio</h3>
        
        <div class="radio-controls" style="
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 12px;
        ">
            <button id="playRadio" style="
                padding: 8px 12px;
                background: var(--accent);
                color: white;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px;
                flex: 1;
            ">â–¶</button>
            
            <button id="stopRadio" style="
                padding: 8px 12px;
                background: #e74c3c;
                color: white;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px;
                flex: 1;
            ">â¹</button>
        </div>
        
        <div class="volume-controls" style="
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        ">
            <span style="font-size: 14px;">ğŸ”Š</span>
            <input type="range" id="radioVolume" min="0" max="1" step="0.1" value="0.7" style="
                flex: 1;
                accent-color: var(--accent);
                height: 6px;
            ">
        </div>
        
        <div class="radio-info" style="
            text-align: center;
            font-size: 12px;
            color: var(--text);
            opacity: 0.8;
            line-height: 1.3;
        ">Î‘ÎºÎ¿ÏÏƒÏ„Îµ Zuccaradio</div>
    `;
    
    document.body.appendChild(radioInterface);
    
    radioInterface.querySelector('#playRadio').addEventListener('click', toggleRadioPlay);
    radioInterface.querySelector('#stopRadio').addEventListener('click', stopRadio);
    radioInterface.querySelector('#radioVolume').addEventListener('input', (e) => {
        if (radioAudio) {
            radioAudio.volume = e.target.value;
            updateRadioInfo(`ÎˆÎ½Ï„Î±ÏƒÎ·: ${Math.round(radioAudio.volume * 100)}%`);
        }
    });
    radioInterface.querySelector('.close-radio').addEventListener('click', closeRadioInterface);
    
    const closeBtn = radioInterface.querySelector('.close-radio');
    closeBtn.addEventListener('mouseenter', function() {
        this.style.background = 'rgba(255,255,255,0.1)';
    });
    closeBtn.addEventListener('mouseleave', function() {
        this.style.background = 'none';
    });
}

function toggleRadioInterface() {
    if (radioInterface && radioInterface.style.display === 'block') {
        closeRadioInterface();
    } else {
        openRadioInterface();
    }
}

function openRadioInterface() {
    if (radioInterface) {
        radioInterface.style.display = 'block';
        document.getElementById("zuccaradioBtn").classList.add("active");
    }
}

function closeRadioInterface() {
    if (radioInterface) {
        radioInterface.style.display = 'none';
        document.getElementById("zuccaradioBtn").classList.remove("active");
        // Î”Î•Î Î±Ï†Î±Î¹ÏÎ¿ÏÎ¼Îµ Ï„Î·Î½ "playing" - Î¼Î­Î½ÎµÎ¹ Î±Î½ Ï„Î¿ ÏÎ±Î´Î¹ÏŒÏ†Ï‰Î½Î¿ Ï€Î±Î¯Î¶ÎµÎ¹
    }
}

function toggleRadioPlay() {
    if (!isRadioPlaying) {
        playRadio();
    } else {
        pauseRadio();
    }
}

function playRadio() {
    if (!radioAudio) {
        radioAudio = new Audio('https://stream.zuccaradio.com/stream');
        radioAudio.volume = document.querySelector('#radioVolume').value;
        
        radioAudio.addEventListener('loadstart', function() {
            updateRadioInfo('Î¦ÏŒÏÏ„Ï‰ÏƒÎ· ÏÎ±Î´Î¹Î¿Ï†ÏÎ½Î¿Ï…...');
        });
        
        radioAudio.addEventListener('canplay', function() {
            updateRadioInfo('Î‘Î½Î±Ï€Î±ÏÎ±Î³Ï‰Î³Î® Zuccaradio...');
        });
        
        radioAudio.addEventListener('error', function() {
            updateRadioInfo('Î£Ï†Î¬Î»Î¼Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚ ÏÎ±Î´Î¹Î¿Ï†ÏÎ½Î¿Ï…');
            resetRadioState();
        });
    }
    
    radioAudio.play().then(() => {
        isRadioPlaying = true;
        updatePlayButton();
        updateRadioInfo('Î‘Î½Î±Ï€Î±ÏÎ±Î³Ï‰Î³Î® Zuccaradio...');
        // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Ï„Î·Ï‚ ÎºÎ»Î¬ÏƒÎ·Ï‚ "playing" - Ï„Î¿ ÎºÎ¿Ï…Î¼Ï€Î¯ Î³Î¯Î½ÎµÏ„Î±Î¹ Î Î¡Î‘Î£Î™ÎÎŸ
        const btn = document.getElementById("zuccaradioBtn");
        if (btn) {
            btn.classList.add("playing");
            btn.textContent = "â¸ Zuccaradio";
        }
    }).catch(error => {
        console.error('Radio play error:', error);
        updateRadioInfo('Î£Ï†Î¬Î»Î¼Î±: Î”ÎµÎ½ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î±ÎºÎ¿Ï…ÏƒÏ„ÎµÎ¯ Ï„Î¿ ÏÎ±Î´Î¹ÏŒÏ†Ï‰Î½Î¿');
        resetRadioState();
    });
}

function pauseRadio() {
    if (radioAudio && isRadioPlaying) {
        radioAudio.pause();
        isRadioPlaying = false;
        updatePlayButton();
        updateRadioInfo('Î Î±ÏÏƒÎ· Zuccaradio');
        // Î‘Ï†Î±Î¯ÏÎµÏƒÎ· Ï„Î·Ï‚ ÎºÎ»Î¬ÏƒÎ·Ï‚ "playing" - Ï„Î¿ ÎºÎ¿Ï…Î¼Ï€Î¯ ÎµÏ€Î¹ÏƒÏ„ÏÎ­Ï†ÎµÎ¹ ÎšÎŸÎšÎšÎ™ÎÎŸ
        const btn = document.getElementById("zuccaradioBtn");
        if (btn) {
            btn.classList.remove("playing");
            btn.textContent = "ğŸµ Zuccaradio";
        }
    }
}

function stopRadio() {
    if (radioAudio) {
        radioAudio.pause();
        radioAudio.currentTime = 0;
        resetRadioState();
        updateRadioInfo('Î¡Î±Î´Î¹ÏŒÏ†Ï‰Î½Î¿ ÏƒÏ„Î±Î¼Î±Ï„Î·Î¼Î­Î½Î¿');
    }
}

function resetRadioState() {
    isRadioPlaying = false;
    updatePlayButton();
    // Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ Ï„Î¿Ï… ÎºÎ¿Ï…Î¼Ï€Î¹Î¿Ï ÏƒÏ„Î·Î½ ÎºÎ±Î½Î¿Î½Î¹ÎºÎ® ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· (ÎšÎŸÎšÎšÎ™ÎÎŸ)
    const btn = document.getElementById("zuccaradioBtn");
    if (btn) {
        btn.classList.remove("playing");
        btn.textContent = "ğŸµ Zuccaradio";
    }
}

function updatePlayButton() {
    const playBtn = document.getElementById('playRadio');
    if (playBtn) {
        playBtn.textContent = isRadioPlaying ? 'â¸' : 'â–¶';
    }
}

function updateRadioInfo(message) {
    const infoElement = radioInterface.querySelector('.radio-info');
    if (infoElement) {
        infoElement.textContent = message;
    }
}

document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && radioInterface && radioInterface.style.display === 'block') {
        closeRadioInterface();
    }
});

/* ===============================
   ğŸ“Œ Î•Î Î•ÎÎ•Î¡Î“Î‘Î£Î™Î‘ Î¥Î ÎŸÎ¤Î™Î¤Î›ÎŸÎ¥ ÎœÎ• DOUBLE-CLICK
   =============================== */

let currentSubtitle = "Î£Ï…ÏƒÏ„ÎµÎ³Î±ÏƒÎ¼Î­Î½Î± Î¦Î±ÏÎ¼Î±ÎºÎµÎ¯Î± ÎÎµÎ¿Îº. & ÎÎ¹Îº. ÎœÎµÎ½ÎµÎ¾Î¹Î¬Î´Î·Ï‚ & Î£Î™Î‘ ÎŸ.Î•.";

function loadSubtitle() {
  const savedSubtitle = localStorage.getItem("customSubtitle");
  if (savedSubtitle) {
    currentSubtitle = savedSubtitle;
    updateSubtitleDisplay();
  }
}

function saveSubtitle(subtitle) {
  currentSubtitle = subtitle;
  localStorage.setItem("customSubtitle", subtitle);
  updateSubtitleDisplay();
}

function updateSubtitleDisplay() {
  const subtitleElement = document.querySelector('.titles h2');
  if (subtitleElement) {
    subtitleElement.textContent = currentSubtitle;
  }
}

/* ===============================
   ğŸ“Œ Help Menu
   =============================== */

function initHelpMenu() {
    const helpMenu = document.getElementById('helpMenu');
    const helpOverlay = document.getElementById('helpOverlay');
    const closeHelp = document.getElementById('closeHelp');
    const helpBtn = document.getElementById('helpBtn');
    
    function showHelpMenu() {
        helpMenu.style.display = 'block';
        helpOverlay.style.display = 'block';
        document.body.style.overflow = 'hidden';
    }
    
    function hideHelpMenu() {
        helpMenu.style.display = 'none';
        helpOverlay.style.display = 'none';
        document.body.style.overflow = '';
    }
    
    if (helpBtn) helpBtn.addEventListener('click', showHelpMenu);
    if (closeHelp) closeHelp.addEventListener('click', hideHelpMenu);
    if (helpOverlay) helpOverlay.addEventListener('click', hideHelpMenu);
    
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            hideHelpMenu();
        }
    });
}


// Î ÏÎ¿ÏƒÎ¸Î­ÏƒÏ„Îµ Î±Ï…Ï„ÏŒ ÏƒÏ„Î¿ Ï„Î­Î»Î¿Ï‚ Ï„Î¿Ï… JavaScript
function setupVideoBackground() {
  const video = document.querySelector('.video-background video');
  if (video) {

    // Î¡ÏÎ¸Î¼Î¹ÏƒÎ· Ï„Î±Ï‡ÏÏ„Î·Ï„Î±Ï‚ Î±Î½Î±Ï€Î±ÏÎ±Î³Ï‰Î³Î®Ï‚
    video.playbackRate = 0.9; // Î Î¹Î¿ Î±ÏÎ³ÏŒ video
    function toggleVideoBlur() {
  const container = document.querySelector('.video-background');
  container.classList.toggle('blurred');
}

    // Î¡ÏÎ¸Î¼Î¹ÏƒÎ· Î´Î¹Î±Ï†Î¬Î½ÎµÎ¹Î±Ï‚ Î¼Îµ ÎºÎ¿Ï…Î¼Ï€Î¯
    window.adjustVideoOpacity = function(opacity) {
      video.style.opacity = opacity;
    };
  }
}

// ÎšÎ±Î»Î­ÏƒÏ„Îµ Ï„Î· ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ· ÏŒÏ„Î±Î½ Ï†Î¿ÏÏ„ÏÏƒÎµÎ¹ Î· ÏƒÎµÎ»Î¯Î´Î±
document.addEventListener('DOMContentLoaded', setupVideoBackground);

// ğŸ¬ Video toggle function - ÎœÎ• AUTO-PLAY FIX
function toggleVideo() {
    const videoBackground = document.querySelector('.video-background');
    const toggleButton = document.getElementById('videoToggle');
    const audioButton = document.getElementById('audioButton');
    const video = document.querySelector('.video-background video'); // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· video element
    
    if (!videoBackground || !toggleButton) {
        console.log('Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ elements');
        return;
    }
    
    // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î±Î½ Ï„Î¿ video ÎµÎ¯Î½Î±Î¹ ÎºÏÏ…Ï†ÏŒ
    if (videoBackground.style.display === 'none' || videoBackground.classList.contains('hidden')) {
        // Î•ÎÎ•Î¡Î“ÎŸÎ ÎŸÎ™Î—Î£Î— VIDEO
        videoBackground.style.display = 'block';
        videoBackground.classList.remove('hidden');
        toggleButton.textContent = 'ğŸ“¹ Video';
        toggleButton.classList.remove('video-off');
        toggleButton.classList.add('video-on');
        
        // ğŸ¬ Î•ÎšÎšÎ™ÎÎ—Î£Î— VIDEO MANUALLY
        if (video) {
            video.currentTime = 0; // Reset ÏƒÏ„Î·Î½ Î±ÏÏ‡Î®
            video.play().catch(e => console.log('Autoplay blocked:', e));
            console.log('Video Î¾ÎµÎºÎ¯Î½Î·ÏƒÎµ Î½Î± Ï€Î±Î¯Î¶ÎµÎ¹');
        }
        
        // Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· audio button
        if (audioButton) {
            audioButton.style.display = 'inline-block';
        }
        
        console.log('Video ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î¿');
    } else {
        // Î‘Î Î•ÎÎ•Î¡Î“ÎŸÎ ÎŸÎ™Î—Î£Î— VIDEO
        videoBackground.style.display = 'none';
        videoBackground.classList.add('hidden');
        toggleButton.textContent = 'ğŸ“¹ Video';
        toggleButton.classList.remove('video-on');
        toggleButton.classList.add('video-off');
        
        // ğŸ›‘ Î£Î¤Î‘ÎœÎ‘Î¤Î—ÎœÎ‘ VIDEO
        if (video) {
            video.pause();
            video.currentTime = 0;
            console.log('Video ÏƒÏ„Î±Î¼Î¬Ï„Î·ÏƒÎµ');
        }
        
        // Î‘Ï€ÏŒÎºÏÏ…ÏˆÎ· audio button
        if (audioButton) {
            audioButton.style.display = 'none';
        }
        
        console.log('Video Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î¿');
    }
}

// ğŸ”Š Audio toggle function Î³Î¹Î± Ï„Î¿ video
function toggleVideoAudio() {
    const video = document.querySelector('.video-background video');
    const button = document.getElementById('audioButton');
    
    if (!video || !button) {
        console.log('Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ video Î® audio button');
        return;
    }
    
    if (video.muted) {
        // Î•ÎÎ•Î¡Î“ÎŸÎ ÎŸÎ™Î—Î£Î— Î—Î§ÎŸÎ¥
        video.muted = false;
        video.volume = 1.0; // Î¡ÏÎ¸Î¼Î¹ÏƒÎ· Î­Î½Ï„Î±ÏƒÎ·Ï‚ ÏƒÏ„Î¿ maximum
        button.innerHTML = 'ğŸ”Š Audio';
        button.classList.remove('audio-off');
        button.classList.add('audio-on');
        console.log('Î‰Ï‡Î¿Ï‚ ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î¿Ï‚');
    } else {
        // Î‘Î Î•ÎÎ•Î¡Î“ÎŸÎ ÎŸÎ™Î—Î£Î— Î—Î§ÎŸÎ¥
        video.muted = true;
        button.innerHTML = 'ğŸ”‡ Audio';
        button.classList.remove('audio-on');
        button.classList.add('audio-off');
        console.log('Î‰Ï‡Î¿Ï‚ Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î¿Ï‚');
    }
}



// ğŸ¯ Î‘ÏÏ‡Î¹ÎºÎ® ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· ÎºÎ¿Ï…Î¼Ï€Î¹ÏÎ½
document.addEventListener('DOMContentLoaded', function() {
    const videoBackground = document.querySelector('.video-background');
    const audioButton = document.getElementById('audioButton');
    const toggleButton = document.getElementById('videoToggle');
    
    // ÎŸÏÎ¹ÏƒÎ¼ÏŒÏ‚ Î±ÏÏ‡Î¹ÎºÎ®Ï‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚
    if (videoBackground && audioButton && toggleButton) {
        if (videoBackground.style.display === 'none' || videoBackground.classList.contains('hidden')) {
            audioButton.style.display = 'none';
            toggleButton.classList.add('video-off');
        } else {
            toggleButton.classList.add('video-on');
        }
    }
	// ğŸ¯ Auto-Navigation: Î•ÎºÎºÎ¯Î½Î·ÏƒÎ· Ï„Î¿Ï… auto-navigation system
initAutoNavigation();
});






// === AUTO-NAVIGATION SYSTEM - Î”Î™ÎŸÎ¡Î˜Î©ÎœÎ•ÎÎŸ ===
// ğŸ”§ Î¡Î¥Î˜ÎœÎ™Î£Î•Î™Î£: IDLE_THRESHOLD=60s, CYCLE_INTERVAL=25s

let autoNavigationEnabled = false;
let lastHighlightedCard = null;
let idleTimer = null;
let autoCycleTimer = null;

// â° Î§ÏÎ¿Î½Î¹ÎºÎ­Ï‚ Î¡Ï…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ (Î¤Î‘Î§Î¥Î¤Î—Î¤Î‘)
const IDLE_THRESHOLD = 30000;      // 60 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î± = 1 Î»ÎµÏ€Ï„ÏŒ Î±Î´ÏÎ¬Î½ÎµÎ¹Î±
const CYCLE_INTERVAL = 10000;      // 25 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î± Î±Î»Î»Î±Î³Î® ÎºÎ¬ÏÏ„Î±Ï‚

// ğŸ¯ Î¤Ï…Ï‡Î±Î¯Î± Î•Ï€Î¹ÏƒÎ®Î¼Î±Î½ÏƒÎ· ÎšÎ¬ÏÏ„Î±Ï‚
function highlightRandomCard() {
  const cards = document.querySelectorAll('.card');
  if (cards.length === 0) return;

  // Î‘Ï†Î±Î¯ÏÎµÏƒÎ· Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î·Ï‚ ÎµÏ€Î¹ÏƒÎ®Î¼Î±Î½ÏƒÎ·Ï‚
  if (lastHighlightedCard) {
    lastHighlightedCard.classList.remove('autonav-highlight');
  }

  // Î•Ï€Î¹Î»Î¿Î³Î® Î½Î­Î±Ï‚ Ï„Ï…Ï‡Î±Î¯Î±Ï‚ ÎºÎ¬ÏÏ„Î±Ï‚
  let randomCard;
  do {
    randomCard = cards[Math.floor(Math.random() * cards.length)];
  } while (randomCard === lastHighlightedCard && cards.length > 1);

  // Î•Ï†Î±ÏÎ¼Î¿Î³Î® Î½Î­Î±Ï‚ ÎµÏ€Î¹ÏƒÎ®Î¼Î±Î½ÏƒÎ·Ï‚
  randomCard.classList.add('autonav-highlight');
  lastHighlightedCard = randomCard;
}

// ğŸš€ Idle Detection Setup
function setupIdleDetection() {
  // Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ timer
  if (idleTimer) clearTimeout(idleTimer);

  // ÎÎ­Î¿Ï‚ timer
  idleTimer = setTimeout(() => {
    if (!autoNavigationEnabled) {  // ğŸ”§ Î”Î™ÎŸÎ¡Î˜Î©Î£Î—: ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î±Î½ Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ Î®Î´Î· ÎµÎ½ÎµÏÎ³ÏŒ
      autoNavigationEnabled = true;
      console.log('ğŸ¯ Auto-Navigation: Î•Î½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®Î¸Î·ÎºÎµ Î»ÏŒÎ³Ï‰ Î±Î´ÏÎ¬Î½ÎµÎ¹Î±Ï‚');
      startAutoCycle();
    }
  }, IDLE_THRESHOLD);
}

// ğŸ”„ Reset Idle Timer
function resetIdleTimer() {
  // ğŸ”§ Î”Î™ÎŸÎ¡Î˜Î©Î£Î—: Î Î¬Î½Ï„Î± ÎºÎ¬Î½Îµ reset ÏƒÏ„Î¿Î½ timer
  setupIdleDetection();
  
  // ğŸ”§ Î”Î™ÎŸÎ¡Î˜Î©Î£Î—: Î£Ï„Î±Î¼Î¬Ï„Î± Î±Î½ Ï„Î¿ auto-navigation ÎµÎ¯Î½Î±Î¹ ÎµÎ½ÎµÏÎ³ÏŒ
  if (autoNavigationEnabled) {
    console.log('â¸ï¸ Auto-Navigation: Î£Ï„Î±Î¼Î¬Ï„Î·ÏƒÎµ Î»ÏŒÎ³Ï‰ Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î±Ï‚');
    autoNavigationEnabled = false;
    if (autoCycleTimer) clearInterval(autoCycleTimer);
    if (lastHighlightedCard) {
      lastHighlightedCard.classList.remove('autonav-highlight');
      lastHighlightedCard = null;
    }
  }
}

// ğŸ® Start Auto Cycle
function startAutoCycle() {
  if (autoCycleTimer) clearInterval(autoCycleTimer);
  
  highlightRandomCard(); // Î ÏÏÏ„Î· ÎµÏ€Î¹ÏƒÎ®Î¼Î±Î½ÏƒÎ·
  autoCycleTimer = setInterval(highlightRandomCard, CYCLE_INTERVAL);
}

// ğŸ¯ ÎšÏÏÎ¹Î± Î£Ï…Î½Î¬ÏÏ„Î·ÏƒÎ· Î•ÎºÎºÎ¯Î½Î·ÏƒÎ·Ï‚
function initAutoNavigation() {
  console.log('ğŸš€ Auto-Navigation System: Î•ÎºÎºÎ¯Î½Î·ÏƒÎ·...');
  
  // Event Listeners Î³Î¹Î± user activity
  ['click', 'mousemove', 'keypress', 'scroll', 'touchstart'].forEach(event => {
    document.addEventListener(event, () => {
      resetIdleTimer();  // ğŸ”§ Î”Î™ÎŸÎ¡Î˜Î©Î£Î—: ÎšÎ¬Î»ÎµÏƒÎµ Ï€Î¬Î½Ï„Î± Ï„Î· resetIdleTimer
    }, { passive: true });
  });
  
  
  

  // Î•ÎºÎºÎ¯Î½Î·ÏƒÎ· idle detection
  setupIdleDetection();
  
  console.log('âœ… Auto-Navigation System: ÎˆÏ„Î¿Î¹Î¼Î¿! Î ÎµÏÎ¹Î¼Î­Î½ÎµÎ¹ 60s Î±Î´ÏÎ¬Î½ÎµÎ¹Î±...');
}







/* =====================================================================
   ğŸ‰ Î¤Î•Î›ÎŸÎ£ Î•Î¦Î‘Î¡ÎœÎŸÎ“Î—Î£ "Î¤Î‘ Î”Î™ÎšÎ‘ ÎœÎŸÎ¥ Î§Î¡Î—Î£Î™ÎœÎ‘"
   =====================================================================
   Î‘Ï…Ï„Î® Î· ÎµÏ†Î±ÏÎ¼Î¿Î³Î® ÎµÎ¯Î½Î±Î¹ Ï€Î»Î®ÏÏ‰Ï‚ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÎ® ÎºÎ±Î¹ Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÎ¹:
   âœ… ÎˆÎ¾Ï…Ï€Î½Î· Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÏƒÎµÎ»Î¹Î´Î¿Î´ÎµÎ¹ÎºÏ„ÏÎ½
   âœ… Optimized Drag & Drop performance  
   âœ… Post-it ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚ Î¼Îµ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î· Ï€ÏÎ¿ÏƒÎ±ÏÎ¼Î¿Î³Î® Ï‡ÏÏ‰Î¼Î¬Ï„Ï‰Î½
   âœ… Zuccaradio web radio
   âœ… Welcome sound ÏƒÏ„Î¿ Ï€ÏÏÏ„Î¿ ÎºÎ»Î¹Îº
   âœ… Î Î»Î®ÏÎ· ÎµÎ»Î»Î·Î½Î¹ÎºÎ¬ ÏƒÏ‡ÏŒÎ»Î¹Î± Î³Î¹Î± ÎµÏÎºÎ¿Î»Î· ÏƒÏ…Î½Ï„Î®ÏÎ·ÏƒÎ·
   âœ… Auto-Navigation system Î¼Îµ Ï„Ï…Ï‡Î±Î¯Î¿ highlight
   
   
   Î“Î¹Î± Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î· Î® ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚, ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î®ÏƒÏ„Îµ Î¼Îµ Ï„Î¿ Doukas Pharmacy SupportÂ®
   --------------------------------------------------------------------- */




</script>

</body>
</html>
